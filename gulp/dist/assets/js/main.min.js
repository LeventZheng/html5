var common=window.common={extend:function(){var e=arguments[0];for(var o in e)this[o]=e[o]}};common.device=function(){var e={type:"noMobile",os:"window",version:"0",platform:"window"},o=navigator.userAgent,t=o.match(/(iPad).*OS\s([\d_]+)/),n=!t&&o.match(/(iPod).*OS\s([\d_]+)/),r=!t&&!n&&o.match(/(iPhone\sOS)\s([\d_]+)/),a=!t&&!n&&!r&&o.match(/(Android)\s([\d\.]+)/);return t&&(e.type="iPad",e.version=t[2].replace(/_/g,"."),e.os="iPad OS",e.platform="ios"),n&&(e.type="iPod",e.version=n[2].replace(/_/g,"."),e.os="iPod OS",e.platform="ios"),r&&(e.type="iPhone",e.version=r[2].replace(/_/g,"."),e.os="iPhone OS",e.platform="ios"),a&&(e.type="android",e.version=a[2],e.os="android",e.platform="android"),e}(),common.support={isMobile:"noMobile"!=common.device.type,isWeixin:navigator.userAgent.toLowerCase().indexOf("micromessenger")>=0,isDebugMode:!1,online:function(){return window.navigator.onLine}},common.event=function(){return{start:common.support.isMobile?"touchstart":"mousedown",move:common.support.isMobile?"touchmove":"mousemove",end:common.support.isMobile?"touchend":"mouseup",deviceready:common.support.isMobile?"deviceready":"DOMContentLoaded",viewWillAppear:common.support.isMobile?"viewWillAppear":"DOMContentLoaded"}}(),common.URL={IP_URL_MATCH:{test:"http://img.mama100.cn/hyt_h5/B2B/flash_sale/",formal:"http://h.mama100.com/hyt_h5/B2B/flash_sale/"},IMG_URL_MATCH:{test:"http://192.168.115.20:44080/mcs-web",formal:"http://hyt.mama100.com/mcs-web"},IMG_URL:null},common.extend({getCurrentUrlPath:function(){var e=document.location.toString(),o=e.lastIndexOf("/");return e.substring(0,o)+"/"},getQueryString:function(e,o){var t=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),n=e.match(t),r="";return null!=n&&(r=n[2]),t=null,n=null,null==r||""==r||"undefined"==r?"":r},removeESC:function(e){return e.replace(/[\'\"\\\/\b\f\n\r\t]/g,"")},removeSpecialCharacter:function(e){return e.replace(/[\@\#\$\%\^\&\*\(\)\{\}\:\"\L\<\>\?\[\]]/)},removePrevPages:function(e){Mama100hytJSBridge.getStack(function(o){for(var t=[],n=-1,r=0;r<o.length-1;r++)o[r].name==e?n=r:n>-1&&t.push(r);Mama100hytJSBridge.closePages(function(e){},function(e){},t)},function(e){})},handlePayResult:function(e,o){var t={status:"unknown",amount:null,reason:null};if("alipay"==e.payType)if(9e3==e.payResult.resultStatus){var n=common.getQueryString(e.payResult.result,"success");n=common.removeESC(n);var r=common.removeESC(common.getQueryString(e.payResult.result,"out_trade_no"));if("true"==n&&r==o){t.status="success";var a=common.getQueryString(e.payResult.result,"total_fee");a=common.removeESC(a),t.amount=a}}else 6001==e.payResult.resultStatus&&(t.status="fail",t.reason=encodeURI(e.payResult.memo));else"weixin"==e.payType&&(0==e.payResult.errCode?e.payResult.prepayId==o&&(t.status="success"):-2==e.payResult.errCode&&(t.status="fail",t.reason=encodeURI("操作已经取消")));return t}}),common.URL.IMG_URL=common.URL.IMG_URL_MATCH.formal,common.getCurrentUrlPath()==common.URL.IP_URL_MATCH.test&&(common.URL.IMG_URL=common.URL.IMG_URL_MATCH.test);