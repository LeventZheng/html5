!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(55);var i=n(2),o=r(i),a=n(8),s=n(11),c=r(s),u=n(49),l=r(u),d=n(53),f=r(d),h=n(6),p=r(h),m=n(54),g=r(m),v=window.UApp=window.UApp||{};v.configSDK=a.configSDK,v.BrowserUtil=p["default"],v.ClipboardManager=g["default"],v.Authenticator=c["default"],v.ApplicationSession=l["default"],v.ConferenceSession=f["default"],v.enableDebugInfo=function(){try{window.localStorage.setItem("uz_debug","true")}catch(e){}o["default"].init_logging("debug")},v.disableDebugInfo=function(){try{window.localStorage.removeItem("uz_debug")}catch(e){}o["default"].init_logging("warn")},function(){try{"true"===window.localStorage.getItem("uz_debug")&&o["default"].init_logging("debug")}catch(e){}}()},function(e,t){"use strict";var n=!0,r={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};e.exports={log:r.log,disableLog:r.disableLog,browserDetails:r.detectBrowser(),extractVersion:r.extractVersion}},function(e,t){"use strict";function n(e,t,n){e.prototype[t]||Object.defineProperty(e.prototype,t,{enumerable:!1,value:n})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={};n(Array,"push8",function(e){this.push(255&e)}),n(Array,"push16",function(e){this.push(e>>8&255,255&e)}),n(Array,"push32",function(e){this.push(e>>24&255,e>>16&255,e>>8&255,255&e)}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(o){if("object"!==("undefined"==typeof o?"undefined":r(o))&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var a,s,c=[];for(a in o)e.call(o,a)&&c.push(a);if(t)for(s=0;s<i;s++)e.call(o,n[s])&&c.push(n[s]);return c}}()),i._log_level="warn",i.init_logging=function(e){switch("undefined"==typeof e?e=i._log_level:i._log_level=e,"undefined"==typeof window.console&&("undefined"!=typeof window.opera?window.console={log:window.opera.postError,warn:window.opera.postError,error:window.opera.postError}:window.console={log:function(e){},warn:function(e){},error:function(e){}}),i.Debug=i.Info=i.Warn=i.Error=function(e){},e){case"debug":i.Debug=function(){var e;(e=console).log.apply(e,arguments)};case"info":i.Info=function(){var e;(e=console).log.apply(e,arguments)};case"warn":i.Warn=function(){var e;(e=console).warn.apply(e,arguments)};case"error":i.Error=function(){var e;(e=console).error.apply(e,arguments)};case"none":break;default:throw new Error("invalid logging type '"+e+"'")}},i.get_logging=function(){return i._log_level},i.init_logging(),i.make_property=function(e,t,n,r){var i;i="arr"===r?function(e){return"undefined"!=typeof e?this["_"+t][e]:this["_"+t]}:function(){return this["_"+t]};var o,a=function(e){return e?function(n,r){"undefined"!=typeof r?this["_"+t][r]=e(n):this["_"+t]=e(n)}:function(e,n){"undefined"!=typeof n?this["_"+t][n]=e:this["_"+t]=e}};if("bool"===r)o=a(function(e){return!(!e||e in{0:1,no:1,false:1})});else if("int"===r)o=a(function(e){return parseInt(e,10)});else if("float"===r)o=a(parseFloat);else if("str"===r)o=a(String);else if("func"===r)o=a(function(e){return e?e:function(){}});else{if("arr"!==r&&"dom"!==r&&"raw"!=r)throw new Error("Unknown property type "+r);o=a()}"undefined"==typeof e["get_"+t]&&(e["get_"+t]=i),"undefined"==typeof e["set_"+t]&&("rw"===n?e["set_"+t]=o:"wo"===n&&(e["set_"+t]=function(e,n){if("undefined"!=typeof this["_"+t])throw new Error(t+" can only be set once");o.call(this,e,n)})),e["_raw_set_"+t]=function(e,t){o.call(this,e,t)}},i.make_properties=function(e,t){for(var n=0;n<t.length;n++)i.make_property(e.prototype,t[n][0],t[n][1],t[n][2])},i.set_defaults=function(e,t,n){var r,o=Object.keys(n),a=Object.keys(t),s={};for(r=0;r<o.length;r++)s[o[r]]=1;for(r=0;r<a.length;r++)s[a[r]]=1;var c=Object.keys(s);for(r=0;r<c.length;r++){var u=e["_raw_set_"+c[r]];u?c[r]in t?u.call(e,t[c[r]]):u.call(e,n[c[r]]):i.Warn("Invalid property "+c[r])}},i.decodeUTF8=function(e){return decodeURIComponent(escape(e))},i.getPosition=function(e){var t=e.getBoundingClientRect();return{x:t.left+window.pageXOffset,y:t.top+window.pageYOffset,width:t.width,height:t.height}},i.getEventPosition=function(e,t,n){var r,o,a,s;r=e?e:window.event,r=r.changedTouches?r.changedTouches[0]:r.touches?r.touches[0]:r,r.pageX||r.pageY?(o=r.pageX,a=r.pageY):(r.clientX||r.clientY)&&(o=r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=r.clientY+document.body.scrollTop+document.documentElement.scrollTop),s=i.getPosition(t),"undefined"==typeof n&&(n=1);var c=o-s.x,u=a-s.y,l=Math.max(Math.min(c,s.width-1),0),d=Math.max(Math.min(u,s.height-1),0);return{x:l/n,y:d/n,realx:c/n,realy:u/n}},i.addEvent=function(e,t,n){if(e.attachEvent)return e.attachEvent("on"+t,n);if(e.addEventListener)return e.addEventListener(t,n,!1),!0;throw new Error("Handler could not be attached")},i.removeEvent=function(e,t,n){if(e.detachEvent)return e.detachEvent("on"+t,n);if(e.removeEventListener)return e.removeEventListener(t,n,!1),!0;throw new Error("Handler could not be removed")},i.stopEvent=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},i._cursor_uris_supported=null,i.browserSupportsCursorURIs=function(){if(null===i._cursor_uris_supported)try{var e=document.createElement("canvas");e.style.cursor='url("data:image/x-icon;base64,AAACAAEACAgAAAIAAgA4AQAAFgAAACgAAAAIAAAAEAAAAAEAIAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAA==") 2 2, default',e.style.cursor?(i.Info("Data URI scheme cursor supported"),i._cursor_uris_supported=!0):(i.Warn("Data URI scheme cursor not supported"),i._cursor_uris_supported=!1)}catch(e){i.Error("Data URI scheme cursor test exception:",e),i._cursor_uris_supported=!1}return i._cursor_uris_supported},i.Features={xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},function(){var e=function(){return!!window.opera},t=function(){return!!window.ActiveXObject&&(window.XMLHttpRequest?document.querySelectorAll?6:5:4)},n=function(){try{return!navigator.taintEnabled&&(i.Features.xpath?i.Features.query?525:420:419)}catch(e){return!1}},r=function(e){var t=/WebKit\/([0-9\.]*) /,n=(navigator.userAgent.match(t)||["",e])[1];return parseFloat(n,10)},o=function(){return!(!document.getBoxObjectFor&&null==window.mozInnerScreenX)&&(document.getElementsByClassName?19:18)};i.Engine={presto:e(),trident:t(),webkit:n(),gecko:o()},i.Engine.webkit&&(i.Engine.webkit=r(i.Engine.webkit))}(),t["default"]=i},function(e,t,n){(function(r){function i(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function c(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof r&&"env"in r)return{ENV:"production",NODE_ENV:"production"}.DEBUG}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(67),t.log=a,t.formatArgs=o,t.save=s,t.load=c,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(c())}).call(t,n(37))},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)o.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var c=0,u=o.length;c<u;c++)(o[c].fn!==t||r&&!o[c].once||n&&o[c].context!==n)&&s.push(o[c]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,t){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e="none",t=navigator.userAgent,n=navigator.appVersion;return t.match(/Edge/)?e="edge":t.match(/Firefox/)?e="mozilla":t.match(/Chrome/)?n.match(/Chrome\/([\w\W]*?)\./)[1]>=26&&(e="chrome-stable"):(t.match(/Bowser/)||t.match(/Safari/)||t.match(/AppleWebKit/))&&(e="bowser"),e}function o(){var e={name:"unknown",version:0,os:"unknown",osVersion:"unknown",ieMode:!1},t=navigator.appVersion,n=navigator.userAgent,r=navigator.appName,i=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10),a=void 0,s=void 0,c=void 0,u=!1;(s=n.indexOf("Opera"))!=-1?(r="Opera",i=n.substring(s+6),(s=n.indexOf("Version"))!=-1&&(i=n.substring(s+8))):(s=n.indexOf("OPR"))!=-1?(r="Opera",i=n.substring(s+4)):(s=n.indexOf("MetaSr"))!=-1?(r="sougou",i=n.substring(s+7),(s=n.indexOf("LCJB"))!=-1&&(u=!0)):(s=n.indexOf("LBBROWSER"))!=-1?(r="Liebao",i=n.substring(s+10)):(s=n.indexOf("2345Explorer"))!=-1?(r="2345Explorer",i=n.substring(s+13),(s=n.indexOf("LCJB"))!=-1&&(u=!0)):(s=n.indexOf("Maxthon"))!=-1?(r="Maxthon",i=n.substring(s+8)):(s=n.indexOf("QQBrowser"))!=-1?(r="QQBrowser",i=n.substring(s+10),(s=n.indexOf("LCJB"))!=-1&&(u=!0)):(s=n.indexOf("MSIE"))!=-1?(r="Microsoft Internet Explorer",i=n.substring(s+5)):"Netscape"==r&&n.indexOf("Trident/")!=-1?(r="Microsoft Internet Explorer",i=n.substring(s+5),(s=n.indexOf("rv:"))!=-1&&(i=n.substring(s+3))):(s=n.indexOf("Edge"))!=-1?(r="Edge",i=n.substring(s+5)):(s=n.indexOf("Chrome"))!=-1?(r="Chrome",i=n.substring(s+7)):(s=n.indexOf("Safari"))!=-1?(r="Safari",i=n.substring(s+7),(s=n.indexOf("Version"))!=-1&&(i=n.substring(s+8)),n.indexOf("CriOS")!=-1&&(r="Chrome")):(s=n.indexOf("Firefox"))!=-1?(r="Firefox",i=n.substring(s+8)):(a=n.lastIndexOf(" ")+1)<(s=n.lastIndexOf("/"))&&(r=n.substring(a,s),i=n.substring(s+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),(c=i.indexOf(";"))!=-1&&(i=i.substring(0,c)),(c=i.indexOf(" "))!=-1&&(i=i.substring(0,c)),(c=i.indexOf(")"))!=-1&&(i=i.substring(0,c)),o=parseInt(""+i,10),isNaN(o)&&(i=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10));var l=(/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(t),"unknown"),d=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in d){var h=d[f];if(h.r.test(n)){l=h.s;break}}var p="unknown";switch(/Windows/.test(l)&&(p=/Windows (.*)/.exec(l)[1],l="Windows"),l){case"Mac OS X":p=/Mac OS X (10[\.\_\d]+)/.exec(n)[1];break;case"Android":p=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":p=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),p=p[1]+"."+p[2]+"."+(0|p[3])}return e.name=r,e.version=o,e.os=l,e.osVersion=p,e.ieMode=u,e}function a(){return new c["default"](function(e,t){var n=null;try{n=new RTCPeerConnection,n.createOffer(function(t){var r=t.sdp,i=[],o=[];r.indexOf("opus")>=0&&o.push("opus"),r.indexOf("isac")>=0&&o.push("isac"),r.indexOf("G722")>=0&&o.push("G722"),r.indexOf("PCMU")>=0&&o.push("PCMU"),r.indexOf("PCMA")>=0&&o.push("PCMA"),r.indexOf("VP8")>=0&&i.push("VP8"),r.indexOf("VP9")>=0&&i.push("VP9"),r.indexOf("H264")>=0&&i.push("H264"),n.close(),e({video:i,audio:o})},function(e){n.close(),t()},{offerToReceiveAudio:1,offerToReceiveVideo:1})}catch(e){n&&n.close(),t()}})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(10),c=r(s);t["default"]={getBrowser:i,getBrowserInfo:o,getWebRTCCodecs:a}},function(e,t,n){(function(e){function r(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=y[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,n,!0,r)},i.readAsArrayBuffer(e.data)}function a(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(v)return o(e,n,r);var i=new Uint8Array(1);i[0]=y[e.type];var a=new w([i.buffer,e.data]);return r(a)}function s(e){try{e=p.decode(e)}catch(e){return!1}return e}function c(e,t,n){for(var r=new Array(e.length),i=h(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},a=0;a<e.length;a++)o(a,e[a],i)}var u,l=n(74),d=n(27),f=n(46),h=n(45),p=n(111);e&&e.ArrayBuffer&&(u=n(62));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=m||g;t.protocol=3;var y=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},_=l(y),b={type:"error",data:"parser error"},w=n(64);t.encodePacket=function(t,n,o,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof o&&(s=o,o=null);var c=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&c instanceof ArrayBuffer)return i(t,n,s);if(w&&c instanceof e.Blob)return a(t,n,s);if(c&&c.base64)return r(t,s);var u=y[t.type];return void 0!==t.data&&(u+=o?p.encode(String(t.data)):String(t.data)),s(""+u)},t.encodeBase64Packet=function(n,r){var i="b"+t.packets[n.type];if(w&&n.data instanceof e.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(n.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var s=new Uint8Array(n.data),c=new Array(s.length),u=0;u<s.length;u++)c[u]=s[u];a=String.fromCharCode.apply(null,c)}return i+=e.btoa(a),r(i)},t.decodePacket=function(e,n,r){if(void 0===e)return b;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&(e=s(e),e===!1))return b;var i=e.charAt(0);return Number(i)==i&&_[i]?e.length>1?{type:_[i],data:e.substring(1)}:{type:_[i]}:b}var o=new Uint8Array(e),i=o[0],a=f(e,1);return w&&"blob"===n&&(a=new w([a])),{type:_[i],data:a}},t.decodeBase64Packet=function(e,t){var n=_[e.charAt(0)];if(!u)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=u.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function i(e){return e.length+":"+e}function o(e,r){t.encodePacket(e,!!a&&n,!0,function(e){r(null,i(e))})}"function"==typeof n&&(r=n,n=null);var a=d(e);return n&&a?w&&!v?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void c(e,o,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var i;if(""==e)return r(b,0,1);for(var o,a,s="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"!=l)s+=l;else{if(""==s||s!=(o=Number(s)))return r(b,0,1);if(a=e.substr(c+1,o),s!=a.length)return r(b,0,1);if(a.length){if(i=t.decodePacket(a,n,!0),b.type==i.type&&b.data==i.data)return r(b,0,1);var d=r(i,c+o,u);if(!1===d)return}c+=o,s=""}}return""!=s?r(b,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}return e.length?void c(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}t?i[o++]=0:i[o++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),n(i.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,w){var c=new w([t.buffer,s.buffer,e]);n(null,c)}})}c(e,r,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[],a=!1;i.byteLength>0;){for(var s=new Uint8Array(i),c=0===s[0],u="",l=1;255!=s[l];l++){if(u.length>310){a=!0;break}u+=s[l]}if(a)return r(b,0,1);i=f(i,2+u.length),u=parseInt(u);var d=f(i,0,u);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(var l=0;l<h.length;l++)d+=String.fromCharCode(h[l])}o.push(d),i=f(i,u)}var p=o.length;o.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,p)})}}).call(t,function(){return this}())},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.CLIENT_ID=e.clientId,r.CLIENT_SECRET=e.clientSecret,r.SERVER_URL=e.serverURL||"",r.SESSION_MGR_URL=e.sessionManagerURL||"",r.CONFERENCE_MGR_URL=e.conferenceManagerURL||""}Object.defineProperty(t,"__esModule",{value:!0}),t.configSDK=n;var r={USE_CONTROL_CHANNEL_SSL:!0,SERVER_URL:"",SESSION_MGR_URL:"",CLIENT_ID:"",CLIENT_SECRET:""};t["default"]=r},function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(t,r){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){G=e}function a(e){Y=e}function s(){return function(){return t.nextTick(f)}}function c(){return"undefined"!=typeof Q?function(){Q(f)}:d()}function u(){var e=0,t=new $(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<V;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}V=0}function h(){try{var e=n(115);return Q=e.runOnLoop||e.runOnContext,c()}catch(e){return d()}}function p(e,t){var n=arguments,r=this,i=new this.constructor(g);void 0===i[ie]&&N(i);var o=r._state;return o?!function(){var e=n[o-1];Y(function(){return O(o,i,e,r._result)})}():A(r,i,e,t),i}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return S(n,e),n}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(e){return ce.error=e,ce}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function w(e,t,n){Y(function(e){var r=!1,i=b(n,t,function(n){r||(r=!0,t!==n?S(e,n):E(e,n))},function(t){r||(r=!0,P(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,P(e,i))},e)}function k(e,t){t._state===ae?E(e,t._result):t._state===se?P(e,t._result):A(t,void 0,function(t){return S(e,t)},function(t){return P(e,t)})}function C(e,t,n){t.constructor===e.constructor&&n===p&&t.constructor.resolve===m?k(e,t):n===ce?(P(e,ce.error),ce.error=null):void 0===n?E(e,t):i(n)?w(e,t,n):E(e,t)}function S(t,n){t===n?P(t,v()):e(n)?C(t,n,_(n)):E(t,n)}function T(e){e._onerror&&e._onerror(e._result),R(e)}function E(e,t){e._state===oe&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Y(R,e))}function P(e,t){e._state===oe&&(e._state=se,e._result=t,Y(T,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ae]=n,i[o+se]=r,0===o&&e._state&&Y(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?O(n,r,i,o):i(o);e._subscribers.length=0}}function I(){this.error=null}function x(e,t){try{return e(t)}catch(e){return ue.error=e,ue}}function O(e,t,n,r){var o=i(n),a=void 0,s=void 0,c=void 0,u=void 0;if(o){if(a=x(n,r),a===ue?(u=!0,s=a.error,a.error=null):c=!0,t===a)return void P(t,y())}else a=r,c=!0;t._state!==oe||(o&&c?S(t,a):u?P(t,s):e===ae?E(t,a):e===se&&P(t,a))}function M(e,t){try{t(function(t){S(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}function D(){return le++}function N(e){e[ie]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[ie]||N(this.promise),q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):P(this.promise,B())}function B(){return new Error("Array Methods must be provided an Array")}function X(e){return new K(this,e).promise}function L(e){var t=this;return new t(q(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function U(e){var t=this,n=new t(g);return P(n,e),n}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ie]=D(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&W(),this instanceof z?M(this,e):j())}function F(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z}var H=void 0;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q=H,V=0,Q=void 0,G=void 0,Y=function(e,t){ne[V]=e,ne[V+1]=t,V+=2,2===V&&(G?G(f):re())},J="undefined"!=typeof window?window:void 0,Z=J||{},$=Z.MutationObserver||Z.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?s():$?u():te?l():void 0===J?h():d();var ie=Math.random().toString(36).substring(16),oe=void 0,ae=1,se=2,ce=new I,ue=new I,le=0;return K.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===oe&&n<e;n++)this._eachEntry(t[n],n)},K.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var i=_(e);if(i===p&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(g);C(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},K.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===oe&&(this._remaining--,e===se?P(r,n):this._result[t]=n),0===this._remaining&&E(r,this._result)},K.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(se,t,e)})},z.all=X,z.race=L,z.resolve=m,z.reject=U,z._setScheduler=o,z._setAsap=a,z._asap=Y,z.prototype={constructor:z,then:p,catch:function(e){return this.then(null,e)}},z.polyfill=F,z.Promise=z,z})}).call(t,n(37),function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return m=t||h["default"].CLIENT_ID,g=h["default"].CLIENT_SECRET,new u["default"](function(e,t){AdapterJS.webRTCReady(function(t){return e(t)})}).then(function(t){return e?e:d["default"].authorize(a(),s())}).then(function(e){p=e})}function o(){return p}function a(){return m}function s(){return g}Object.defineProperty(t,"__esModule",{value:!0});var c=n(10),u=r(c),l=n(14),d=r(l),f=n(8),h=r(f),p=null,m=null,g=null;t["default"]={authorize:i,getClientId:a,getToken:o
}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),u=r(c),l=n(2),d=r(l),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(n.local=!1,n.room=void 0,n.params=e,n.streamID=n.params.streamID,n.stream=n.params.stream,n.url=n.params.url,n.data=n.params.data,n.recording=n.params.recording,n.video=n.params.video,n.audio=n.params.audio,n.screen=n.params.screen,n.videoSize=n.params.videoSize,n.extensionId=n.params.extensionId,n.attributes=n.params.attributes,void 0!==n.params.local&&n.params.local!==!0||(n.local=!0),n.videoSize&&(!(n.videoSize instanceof Array)||4!==n.videoSize.length))throw new Error("Invalid Video Size");return n}return a(t,e),s(t,[{key:"getID",value:function(){return this.streamID}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){d["default"].Error("Failed to set attributes data. This Stream object has not been published.")}},{key:"sendData",value:function(e){d["default"].Error("Failed to send data. This Stream object has not that channel enabled.")}},{key:"updateLocalAttributes",value:function(e){this.attributes=e}},{key:"hasAudio",value:function(){return this.audio}},{key:"hasVideo",value:function(){return this.video}},{key:"hasData",value:function(){return this.data}},{key:"hasScreen",value:function(){return this.screen}},{key:"init",value:function(){var e=this;try{if((this.audio||this.video||this.screen)&&void 0===this.url){d["default"].Info("Requested access to local media");var t=this.video;1!=t&&1!=this.screen||!this.videoSize?1==this.screen&&void 0===t&&(t=!0):t={mandatory:{minWidth:this.videoSize[0],minHeight:this.videoSize[1],maxWidth:this.videoSize[2],maxHeight:this.videoSize[3]}};var n={video:t,audio:this.audio,fake:this.fake,screen:this.screen,extensionId:this.extensionId};navigator.mediaDevices.getUserMedia(n).then(function(t){d["default"].Info("User has granted access to local media."),e.stream=t,e.emit("access-accepted")})["catch"](function(t){d["default"].Error("Failed to get access to local media. Error was:",t),e.emit("access-denied",{msg:t})})}else this.emit("access-accepted")}catch(e){d["default"].Error("Failed to get access to local media. Error was:",e),this.emit("access-denied",{msg:e})}}},{key:"close",value:function(){this.local&&(this.room&&this.room.unpublish(this),this.stream&&this.stream.getTracks().forEach(function(e){e.stop()}),this.stream=void 0)}},{key:"checkOptions",value:function(e,t){t===!0?(e.video||e.audio||e.screen)&&(d["default"].Warn("Cannot update type of subscription"),e.video=void 0,e.audio=void 0,e.screen=void 0):this.local===!1&&(e.video===!0&&this.hasVideo()===!1&&(d["default"].Warn("Trying to subscribe to video when there is no video, won't subscribe to video"),e.video=!1),e.audio===!0&&this.hasAudio()===!1&&(d["default"].Warn("Trying to subscribe to audio when there is no audio, won't subscribe to audio"),e.audio=!1)),this.local===!1&&(this.hasVideo()||e.slideShowMode!==!0||(d["default"].Warn("Cannot enable slideShowMode if it is not a video subscription, please check your parameters"),e.slideShowMode=!1))}},{key:"updateConfiguration",value:function(e,t){if(e){if(!this.pc)return void d["default"].Info("This stream has no peerConnection attached, ignoring");this.checkOptions(e,!0),this.pc.updateSpec(e,t)}}}]),t}(u["default"]);t["default"]=f},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(112),s=r(a),c=n(8),u=r(c);t["default"]={authorize:function(e,t){return new o["default"](function(n,r){return e&&t?void s["default"].post(u["default"].SERVER_URL+"/eaas-clienttoken/oauth/token",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:["client_id="+e,"client_secret="+t,"grant_type=thirdParty","type=Client"].join("&")},function(e,t,i){if(e)return r(e);if(200===t.statusCode){var o=JSON.parse(i),a=o.access_token;return n(a)}return r({code:"ERR_0001",desc:"Authentication failed. Check the client id and client secret."})}):r({code:"ERR_0002",desc:"Please provide the client id and client secret."})})},requestStartSession:function(e,t){return new o["default"](function(n,r){s["default"].post(u["default"].SESSION_MGR_URL+"api/session/start",{headers:{Authorization:"Bearer "+e},json:t},function(e,t,i){200===t.statusCode&&i.success?n(i.data):r(i&&"undefined"!=typeof i.errorCode?i.errorCode:t.statusCode)})})},requestJoinSession:function(e,t){return new o["default"](function(n,r){s["default"].put(u["default"].SESSION_MGR_URL+"api/session/join",{headers:{Authorization:"Bearer "+e},json:t},function(e,t,i){200===t.statusCode&&i.success?n(i.data):r(i&&"undefined"!=typeof i.errorCode?i.errorCode:t.statusCode)})})},getMCUAddress:function(e){return new o["default"](function(t,n){s["default"].get(u["default"].CONFERENCE_MGR_URL+"/availableMcu?roomId="+e,function(e,r,i){var o={};try{o=JSON.parse(i)}catch(e){}200===r.statusCode&&o.success?t({mcuURL:o.data.url}):n("undefined"!=typeof o.errorCode?o.errorCode:r.statusCode)})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=function(e,t){for(var r=n(t),i=Object.keys(e),o=i.length,a=0;a<o;a++)for(var s=i[a],c=e[s],u=c.length,l=0;l<u;l++)r.on(s,c[l])},t=function(){var e=["animation-iteration-count","column-count","flex-grow","flex-shrink","font-weight","line-height","opacity","order","orphans","widows","z-index"];return function(t,n){if(h(t,e))return n;var r="string"==typeof n?n:n.toString();return n&&!/\D/.test(r)&&(r+="px"),r}}(),i=function(e){var t=document.createElement("div"),n=/[\w:-]+/.exec(e)[0],r=R[n],i=e.trim();r&&(i=r.intro+i+r.outro),t.insertAdjacentHTML("afterbegin",i);var o=t.lastChild;if(r)for(var a=r.outro.match(/</g).length;a--;)o=o.lastChild;return t.textContent="",o},o={afterbegin:function(e){this.insertBefore(e,this.firstChild)},afterend:function(e){var t=this.parentElement;t&&t.insertBefore(e,this.nextSibling)},beforebegin:function(e){var t=this.parentElement;t&&t.insertBefore(e,this)},beforeend:function(e){this.appendChild(e)}},a=function(t,n){if(!(t.nodeType>1)){var r=u(t);r&&e(r,n);for(var i,o=T("*",t),a=o.length,s=0;s<a;s++){var r=u(o[s]);r&&(i||(i=T("*",n)),e(r,i[s]))}}},s=function(e,t,r,i,o){var a=[],s=this;return this.each(function(){for(var n=e?this.parentElement:this;n&&(!o||o!=n)&&(i&&!s.is(i,n)||(a.push(n),!r))&&!t;)n=n.parentElement}),n(v(a))},c=function(e){return E(e)[0]},u=function(e){return e.sprintEventListeners},l=function(e,t){return Object.keys(u(e)).filter(function(e){return E(t).every(function(t){return h(t,E(e))})})},d=function(e,r,i){if(null==i){var o=e.get(0);if(!o||o.nodeType>1)return;var a=r[0].toUpperCase()+r.substring(1);if(o==document){var s=b["offset"+a],c=window["inner"+a];return s>c?s:c}return o==window?window["inner"+a]:o.getBoundingClientRect()[r]}var u="function"==typeof i,l=u?"":t(r,i);return e.each(function(e){this==document||this==window||this.nodeType>1||(u&&(l=t(r,i.call(this,e,n(this)[r]()))),this.style[r]=l)})},f=function e(t,r){var i=r.length,s=r;if(i>1&&t.indexOf("after")>-1){s=[];for(var c=i;c--;)s.push(r[c])}for(var c=0;c<i;c++){var u=s[c];if("string"==typeof u||"number"==typeof u)this.each(function(){this.insertAdjacentHTML(t,u)});else{if("function"!=typeof u){var l=u instanceof I,d=[],f=function(){return l?u.get():Array.isArray(u)?w(u,!0,!0):u.nodeType?[u]:P(u)}(),h=f.length;if(this.each(function(e){for(var n=document.createDocumentFragment(),r=0;r<h;r++){var i,s=f[r];e?(i=s.cloneNode(!0),a(s,i)):i=s,n.appendChild(i),d.push(i)}o[t].call(this,n)}),l&&(u.dom=d,u.length=d.length),c<i-1)continue;return d}this.each(function(r){var i=u.call(this,r,this.innerHTML);e.call(n(this),t,[i])})}}},h=function(e,t){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},p=function(e){return/\./.test(e)},m=function(e,t,n){if(null==t)return"add"==e?this:this.removeAttr("class");var r,i,o;return"string"==typeof t&&(r=!0,i=t.trim().split(" "),o=i.length),this.each(function(a,s){if(!(this.nodeType>1)){if(!r){var c=t.call(s,a,s.className);if(!c)return;i=c.trim().split(" "),o=i.length}for(var u=0;u<o;u++){var l=i[u];l&&(null==n?s.classList[e](l):s.classList.toggle(l,n))}}})},g=function(){for(var e=["mozMatchesSelector","webkitMatchesSelector","msMatchesSelector","matches"],t=e.length;t--;){var n=e[t];if(Element.prototype[n])return n}}(),v=function(e){for(var t=[],n=0,r=e.length,i=0;i<r;i++){for(var o=e[i],a=!1,s=0;s<n;s++)if(o===t[s]){a=!0;break}a||(t[n++]=o)}return t},y=function(){var e=function(e,t,n){var r=Object.keys(u(e)).filter(function(e){return c(t)===c(e)}).map(function(t){return u(e)[t]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return e===n});return!(r.length<2)},t=function(t,n,r){return function(i){r&&r!==i||(t.removeEventListener(n,i),p(n)&&!e(t,n,i)&&t.removeEventListener(c(n),i))}},n=function(e,t){return e.filter(function(e){return t&&t!==e})};return function(e,r){return function(i){u(e)[i].forEach(t(e,i,r)),u(e)[i]=n(u(e)[i],r)}}}(),_=function(e,t){return function(n){l(e,n).forEach(y(e,t))}},b=document.documentElement,w=function(e,t,n){for(var r=e.length,i=r;i--;)if(!e[i]&&0!==e[i]||t&&e[i]instanceof I||n&&("string"==typeof e[i]||"number"==typeof e[i])){for(var o=[],a=0;a<r;a++){var s=e[a];if(s||0===s)if(t&&s instanceof I)for(var c=0;c<s.length;c++)o.push(s.get(c));else!n||"string"!=typeof s&&"number"!=typeof s?o.push(s):o.push(document.createTextNode(s))}return o}return e},k=function(){var e;return function(t,n,r){if(!e){var i=b.scrollTop;b.scrollTop=i+1;var o=b.scrollTop;b.scrollTop=i,e=o>i?b:document.body}if(null==r){var a=t.get(0);if(!a)return;return a!=window&&a!=document||(a=e),a[n]}return t.each(function(){var t=this;t!=window&&t!=document||(t=e),t[n]=r})}}(),C=function(e,t,r,i){var o=[],a=t+"ElementSibling";return e.each(function(){for(var t=this;(t=t[a])&&(!i||!e.is(i,t));)r&&!e.is(r,t)||o.push(t)}),n(v(o))},S=function(e,t,n){var r=t+"ElementSibling";return e.map(function(){var t=this[r];if(t&&(!n||e.is(n,t)))return t},!1)},T=function(e,t){if(t=t||document,/^[\#.]?[\w-]+$/.test(e)){var n=e[0];if("."==n)return P(t.getElementsByClassName(e.slice(1)));if("#"==n){var r=t.getElementById(e.slice(1));return r?[r]:[]}return"body"==e?[document.body]:P(t.getElementsByTagName(e))}return P(t.querySelectorAll(e))},E=function(e){return w(e.split("."))},P=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t},A=function(){var e=function(e,t){var r=n(e).clone(!0).get(0),i=r;if(r&&!(this.nodeType>1)){for(;i.firstChild;)i=i.firstChild;if("inner"==t){for(;this.firstChild;)i.appendChild(this.firstChild);this.appendChild(r)}else{var o="all"==t?this.get(0):this,a=o.parentNode,s=o.nextSibling;"all"==t?this.each(function(){i.appendChild(this)}):i.appendChild(o),a.insertBefore(r,s)}}};return function(t,r){return"function"==typeof t?this.each(function(e){n(this)["inner"==r?"wrapInner":"wrap"](t.call(this,e))}):"all"==r?e.call(this,t,r):this.each(function(){e.call(this,t,r)}),this}}(),R={legend:{intro:"<fieldset>",outro:"</fieldset>"},area:{intro:"<map>",outro:"</map>"},param:{intro:"<object>",outro:"</object>"},thead:{intro:"<table>",outro:"</table>"},tr:{intro:"<table><tbody>",outro:"</tbody></table>"},col:{intro:"<table><tbody></tbody><colgroup>",outro:"</colgroup></table>"},td:{intro:"<table><tbody><tr>",outro:"</tr></tbody></table>"}};["tbody","tfoot","colgroup","caption"].forEach(function(e){R[e]=R.thead}),R.th=R.td;var I=function e(t,n){if("string"==typeof t)"<"==t[0]?this.dom=[i(t)]:this.dom=n&&n instanceof e?n.find(t).get():T(t,n);else if(Array.isArray(t))this.dom=w(t);else if(t instanceof NodeList||t instanceof HTMLCollection)this.dom=P(t);else{if(t instanceof e)return t;if("function"==typeof t)return this.ready(t);this.dom=t?[t]:[]}this.length=this.dom.length};I.prototype={add:function(e){for(var t=this.get(),r=n(e),i=r.get(),o=0;o<r.length;o++)t.push(i[o]);return n(v(t))},addClass:function(e){return m.call(this,"add",e)},after:function(){return f.call(this,"afterend",arguments),this},append:function(){return f.call(this,"beforeend",arguments),this},appendTo:function(e){return n(f.call(n(e),"beforeend",[this]))},attr:function(e,t){var n="function"==typeof t;if("string"==typeof t||"number"==typeof t||n)return this.each(function(r){this.nodeType>1||this.setAttribute(e,n?t.call(this,r,this.getAttribute(e)):t)});if("object"==("undefined"==typeof e?"undefined":r(e))){var i=Object.keys(e),o=i.length;return this.each(function(){if(!(this.nodeType>1))for(var t=0;t<o;t++){var n=i[t];this.setAttribute(n,e[n])}})}var a=this.get(0);if(a&&!(a.nodeType>1)){var s=a.getAttribute(e);if(null!=s)return s?s:e}},before:function(){return f.call(this,"beforebegin",arguments),this},children:function(e){var t=[],r=this;return this.each(function(){if(!(this.nodeType>1))for(var n=this.children,i=n.length,o=0;o<i;o++){var a=n[o];e&&!r.is(e,a)||t.push(a)}}),n(t)},clone:function(e){return this.map(function(){if(this){var t=this.cloneNode(!0);return e&&a(this,t),t}},!1)},closest:function(e,t){return s.call(this,!1,!1,!0,e,t)},css:function(e,n){var i="undefined"==typeof n?"undefined":r(n),o="string"==i;if(o||"number"==i){var a=o&&/=/.test(n);if(a)var s=parseInt(n[0]+n.slice(2));return this.each(function(){if(!(this.nodeType>1)){if(a)var r=parseInt(getComputedStyle(this).getPropertyValue(e)),i=r+s;this.style[e]=t(e,a?i:n)}})}if("function"==i)return this.each(function(t){if(!(this.nodeType>1)){var r=getComputedStyle(this).getPropertyValue(e);this.style[e]=n.call(this,t,r)}});if("string"==typeof e){var c=this.get(0);if(!c||c.nodeType>1)return;return getComputedStyle(c).getPropertyValue(e)}if(Array.isArray(e)){var c=this.get(0);if(!c||c.nodeType>1)return;for(var u={},l=getComputedStyle(c),d=e.length,f=0;f<d;f++){var h=e[f];u[h]=l.getPropertyValue(h)}return u}var p=Object.keys(e),m=p.length;return this.each(function(){if(!(this.nodeType>1))for(var n=0;n<m;n++){var r=p[n];this.style[r]=t(r,e[r])}})},detach:function(){return this.map(function(){var e=this.parentElement;if(e)return e.removeChild(this),this},!1)},each:function(e){for(var t=this.dom,n=this.length,r=0;r<n;r++){var i=t[r];e.call(i,r,i)}return this},empty:function(){return this.each(function(){this.innerHTML=""})},eq:function(e){return n(this.get(e))},filter:function(e){var t="function"==typeof e,n=this;return this.map(function(r){if(!(this.nodeType>1||!t&&!n.is(e,this)||t&&!e.call(this,r,this)))return this},!1)},find:function(e){if("string"==typeof e){var t=[];return this.each(function(){if(!(this.nodeType>1))for(var n=T(e,this),r=n.length,i=0;i<r;i++)t.push(n[i])}),n(v(t))}for(var r=e.nodeType?[e]:e.get(),i=r.length,o=[],a=0,s=0;s<this.length;s++){var c=this.get(s);if(!(c.nodeType>1))for(var u=0;u<i;u++){var l=r[u];if(c.contains(l)&&(o[a++]=l,!(a<i)))return n(o)}}return n(o)},first:function(){return this.eq(0)},get:function(e){return null==e?this.dom:(e<0&&(e+=this.length),this.dom[e])},has:function(e){if("string"==typeof e)return this.map(function(){if(!(this.nodeType>1)&&T(e,this)[0])return this},!1);for(var t=[],r=this.length;r--;){var i=this.get(r);if(i.contains(e)){t.push(i);break}}return n(t)},hasClass:function(e){for(var t=this.length;t--;){var n=this.get(t);if(n.nodeType>1)return;if(n.classList.contains(e))return!0}return!1},height:function(e){return d(this,"height",e)},html:function(e){if(null==e){var t=this.get(0);if(!t)return;return t.innerHTML}return"function"==typeof e?this.each(function(t){var r=e.call(this,t,this.innerHTML);n(this).html(r)}):this.each(function(){this.innerHTML=e})},index:function(e){if(this.length){var t,r;e?"string"==typeof e?(t=this.get(0),r=n(e)):(t=e instanceof I?e.get(0):e,r=this):(t=this.get(0),r=this.first().parent().children());for(var i=r.get(),o=i.length;o--;)if(i[o]==t)return o;return-1}},insertAfter:function(e){return n(e).after(this),this},insertBefore:function(e){return n(e).before(this),this},is:function(e,t){var n=t?[t]:this.get(),i=n.length;if("string"==typeof e){for(var o=0;o<i;o++){var a=n[o];if(!(a.nodeType>1)&&a[g](e))return!0}return!1}if("object"==("undefined"==typeof e?"undefined":r(e))){var s;s=e instanceof I?e.get():e.length?e:[e];for(var c=s.length,o=0;o<i;o++)for(var u=0;u<c;u++)if(n[o]===s[u])return!0;return!1}if("function"==typeof e){for(var o=0;o<i;o++)if(e.call(this,o,this))return!0;return!1}},last:function(){return this.eq(-1)},map:function(e,t){null==t&&(t=!0);for(var r=this.get(),i=this.length,o=[],a=0;a<i;a++){var s=r[a],c=e.call(s,a,s);if(t&&Array.isArray(c))for(var u=c.length,l=0;l<u;l++)o.push(c[l]);else o.push(c)}return n(o)},next:function(e){return S(this,"next",e)},nextAll:function(e){return C(this,"next",e)},nextUntil:function(e,t){return C(this,"next",t,e)},not:function(e){var t="function"==typeof e,n=this;return this.map(function(r){if(t){if(e.call(this,r,this))return}else if(n.is(e,this))return;return this},!1)},off:function(e,t){return"object"==("undefined"==typeof e?"undefined":r(e))?(Object.keys(e).forEach(function(t){this.off(t,e[t])},this),this):(e&&(e=e.trim().split(" ")),this.each(function(){if(u(this))return e?void e.forEach(_(this,t)):void Object.keys(u(this)).forEach(y(this))}))},offset:function(e){if(!e){var t=this.get(0);if(!t||t.nodeType>1)return;var i=t.getBoundingClientRect();return{top:i.top,left:i.left}}return"object"==("undefined"==typeof e?"undefined":r(e))?this.each(function(){if(!(this.nodeType>1)){var t=n(this);"static"==t.css("position")?t.css("position","relative"):t.css({top:0,left:0});var r=t.offset();t.css({top:e.top-r.top+"px",left:e.left-r.left+"px"})}}):"function"==typeof e?this.each(function(t){var r=n(this),i=e.call(this,t,r.offset());r.offset(i)}):void 0},offsetParent:function(){var e=[];return this.each(function(){if(!(this.nodeType>1)){for(var t=this;t!=b;){t=t.parentNode;var n=getComputedStyle(t).getPropertyValue("position");if(!n)break;if("static"!=n)return void e.push(t)}e.push(b)}}),n(e)},on:function(e,t){if(t){var n=e.trim().split(" ");return this.each(function(){u(this)||(this.sprintEventListeners={}),n.forEach(function(e){u(this)[e]||(u(this)[e]=[]),u(this)[e].push(t),this.addEventListener(e,t),p(e)&&this.addEventListener(c(e),t)},this)})}return Object.keys(e).forEach(function(t){this.on(t,e[t])},this),this},parent:function(e){return s.call(this,!0,!0,!1,e)},parents:function(e){return s.call(this,!0,!1,!1,e)},position:function(){var e={first:this.offset(),prt:this.parent().offset()};if(e.first)return{top:e.first.top-e.prt.top,left:e.first.left-e.prt.left}},prop:function(e,t){if("object"==("undefined"==typeof e?"undefined":r(e))){var n=Object.keys(e),i=n.length;return this.each(function(){for(var t=0;t<i;t++){var r=n[t];this[r]=e[r]}})}if(null==t){var o=this.get(0);if(!o)return;return o[e]}var a="function"==typeof t;return this.each(function(n){this[e]=a?t.call(this,n,this[e]):t})},prepend:function(){return f.call(this,"afterbegin",arguments),this},prependTo:function(e){return n(f.call(n(e),"afterbegin",[this]))},prev:function(e){return S(this,"previous",e)},prevAll:function(e){return C(this,"previous",e)},prevUntil:function(e,t){return C(this,"previous",t,e)},ready:function(e){return this.dom=[document],this.length=1,this.on("DOMContentLoaded",e)},remove:function(e){var t=this;return this.each(function(){var n=this.parentElement;n&&(e&&!t.is(e,this)||n.removeChild(this))})},removeAttr:function(e){if(e){var t=e.trim().split(" "),n=t.length;this.each(function(){if(!(this.nodeType>1))for(var e=0;e<n;e++)this.removeAttribute(t[e])})}return this},removeClass:function(e){return m.call(this,"remove",e)},removeProp:function(e){return this.each(function(){this[e]=void 0})},replaceAll:function(e){return n(e).replaceWith(this),this},replaceWith:function(e){return"function"==typeof e?this.each(function(t){n(this).replaceWith(e.call(this,t,this))}):this.before(e).remove()},scrollLeft:function(e){return k(this,"scrollLeft",e)},scrollTop:function(e){return k(this,"scrollTop",e)},siblings:function e(t){var e=[],r=this;return this.each(function(i,o){n(this).parent().children().each(function(){this==o||t&&!r.is(t,this)||e.push(this)})}),n(e)},size:function(){return this.length},slice:function(e,t){var r=this.get(),i=[],o=e>=0?e:e+this.length,a=this.length;for(t<0?a+=t:t>=0&&(a=t>this.length?this.length:t);o<a;o++)i.push(r[o]);return n(i)},text:function(e){if(null==e){var t=[];return this.each(function(){t.push(this.textContent)}),t.join("")}var n="function"==typeof e;return this.each(function(t){this.textContent=n?e.call(this,t,this.textContent):e})},toggleClass:function(e,t){return m.call(this,"toggle",e,t)},trigger:function(e){if(!window.CustomEvent||"function"!=typeof window.CustomEvent){var t=function(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};t.prototype=window.Event.prototype,window.CustomEvent=t}return this.each(function(){l(this,e).forEach(function(e){this.dispatchEvent(new t(e,{bubbles:!0,cancelable:!0}))},this)})},unwrap:function(){return this.parent().each(function(){this!=document.body&&this!=b&&n(this).replaceWith(this.childNodes)}),this},val:function(e){if(null==e){var t=this.get(0);if(!t)return;if(t.multiple){var r=[];return this.first().children(":checked").each(function(){r.push(this.value)}),r}return t.value}if(Array.isArray(e)){var i=this;return this.each(function(){return this.multiple?void i.children().each(function(){this.selected=h(this.value,e)}):void(this.checked=h(this.value,e))})}return"function"==typeof e?this.each(function(t){n(this).val(e.call(this,t,this.value))}):this.each(function(){this.value=e})},width:function(e){return d(this,"width",e)},wrap:function(e){return A.call(this,e)},wrapAll:function(e){return A.call(this,e,"all")},wrapInner:function(e){return A.call(this,e,"inner")}},n=function(e,t){return new I(e,t)}}(),t["default"]=n},function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var i=n(7),o=n(9);e.exports=r,o(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(t){var r=n(77);e.exports=function(e){var n=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t,n){function r(){}function i(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=f.stringify(e.data)),d("encoded %j as %s",e,n),n}function o(e,t){function n(e){var n=p.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}p.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return l();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(n.nsp+=o,r==e.length)break}else n.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(n.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=c(n,e.substr(r))),d("decoded %s as %j",e,n),n}function c(e,t){try{e.data=f.parse(t)}catch(e){return l()}return e}function u(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:t.ERROR,data:"parser error"}}var d=n(97)("socket.io-parser"),f=n(80),h=n(96),p=n(95),m=n(42);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=r,t.Decoder=a,r.prototype.encode=function(e,n){if(d("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)o(e,n);else{var r=i(e);n([r])}},h(a.prototype),a.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new u(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),u=n(6),l=r(u),d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.localDesc=null,this.gotCandidate=!1,this.params=n,this.params.localCandidates=[],this.params.remoteCandidates=[],this.params.remoteDescriptionSet=!1,this.browser=l["default"].getBrowser(),this.con={optional:[{DtlsSrtpKeyAgreement:!0}]},this.connectionConfig={iceServers:this.params.iceServers||[]},this.connectionConfig.iceServers.forEach(function(e){e.urls=e.urls||[];var t=e.url;t&&e.urls.push(t)}),"undefined"==typeof this.params.audio&&(this.params.audio=!0),"undefined"==typeof this.params.video&&(this.params.video=!0),this.iceCandidateNormalStatus=!1,this.iceCandidateCheckCount=0,this.iceCandidateCheckTimer=null,this.mediaConstraints=this.getMediaConstrains(),this.peerConnection=new RTCPeerConnection(this.connectionConfig,this.con),this.peerConnection.onicecandidate=function(e){t.iceCandidateNormalStatus=!0,e.candidate?(t.gotCandidate=!0,e.candidate.candidate.match(/a=/)||(e.candidate.candidate="a="+e.candidate.candidate),t.params.remoteDescriptionSet?t.params.callback({type:"candidate",candidate:e.candidate}):(t.params.localCandidates.push(e.candidate),c["default"].Debug("Local Candidates stored: ",t.params.localCandidates.length,t.params.localCandidates))):c["default"].Debug("Gathered all candidates for this peer connection")},this.peerConnection.onaddstream=function(e){var n=t.onaddstream;n&&n(e)},this.peerConnection.onremovestream=function(e){var n=t.onremovestream;n&&n(e)}}return a(e,[{key:"getMediaConstrains",value:function(){var e={offerToReceiveAudio:this.params.audio,offerToReceiveVideo:this.params.video};return"chrome-stable"===this.browser&&(e={mandatory:{OfferToReceiveAudio:this.params.audio,OfferToReceiveVideo:this.params.video}}),e}},{key:"updateSpec",value:function(e,t){(e.minVideoBW||void 0!==e.slideShowMode)&&(c["default"].Debug("MinVideo Changed to ",e.minVideoBW),c["default"].Debug("SlideShowMode Changed to ",e.slideShowMode),this.params.callback({type:"updatestream",config:e}))}},{key:"createOffer",value:function(e){var t=this;this.peerConnection.createOffer(this._setLocalDesc.bind(this),this._errorCallback.bind(this),this.mediaConstraints);var n=l["default"].getBrowserInfo();"Firefox"===n.name&&n.version<=45&&this.checkIceCandidate(),clearTimeout(this._offerTimer),this._offerTimer=setTimeout(function(){"undefined"!=typeof t.params.trace&&t.params.trace({type:"timeout"})},1e4)}},{key:"checkIceCandidate",value:function(){this.iceCandidateCheckCount+=1,clearTimeout(this.iceCandidateCheckTimer),this.iceCandidateCheckCount>=2?(this.iceCandidateNormalStatus||"undefined"==typeof this.params.trace||this.params.trace({type:"abnormalCandidate"}),this.iceCandidateCheckCount=0):this.iceCandidateCheckTimer=setTimeout(this.checkIceCandidate,3e3)}},{key:"addStream",value:function(e){this.peerConnection.addStream(e)}},{key:"close",value:function(){this.state="closed",this.peerConnection.close()}},{key:"processSignalingMessage",value:function(e){var t=this,n=e.type;if("offer"===n)e.sdp=this._setMaxBWToSDP(e.sdp),this.peerConnection.setRemoteDescription(new RTCSessionDescription(e),function(){t.peerConnection.createAnswer(t._setLocalDescP2P.bind(t),t._errorCallback.bind(t),t.mediaConstraints),
t.params.remoteDescriptionSet=!0},function(e){c["default"].Error("Error setting Remote Description",e)});else if("answer"===n)c["default"].Info("Set remote and local description"),e.sdp=this._setMaxBWToSDP(e.sdp),this.peerConnection.setLocalDescription(this.localDesc,function(){t.peerConnection.setRemoteDescription(new RTCSessionDescription(e),function(){for(c["default"].Info("Remote Description successfully set"),t.params.remoteDescriptionSet=!0;t.params.remoteCandidates.length>0&&t.gotCandidate;)c["default"].Info("Setting stored remote candidates"),t.peerConnection.addIceCandidate(t.params.remoteCandidates.shift());for(;t.params.localCandidates.length>0;)c["default"].Info("Sending Candidate from list"),t.params.callback({type:"candidate",candidate:t.params.localCandidates.shift()});for(var n=e.sdp||"",r=n.split("\n"),i=!1,o=!1,a=null,s=null,u=0;u<r.length;u++){var l=r[u];if(/m=video.*/.test(l))i=!0,o=!1;else if(/m=audio.*/.test(l))i=!1,o=!0;else if(i&&!a||o&&!s){var d=l.match(/a=ssrc:(.*?)\s+.*?/);d&&i?a=d[1]:d&&o&&(s=d[1])}}c["default"].Debug(">>>>> ssrcVideo",a),c["default"].Debug(">>>>> ssrcAudio",s),"undefined"!=typeof t.params.trace&&t.params.trace({type:"ssrc",audio:s,video:a})},function(e){c["default"].Error("Error Setting Remote Description",e)})},function(e){c["default"].Error("Failure setting Local Description",e)});else if("candidate"===n)try{var r=void 0;r="object"===o(e.candidate)?e.candidate:JSON.parse(e.candidate),r.candidate=r.candidate.replace(/ generation 0/g,""),r.candidate=r.candidate.replace(/ udp /g," UDP "),r.sdpMLineIndex=parseInt(r.sdpMLineIndex);var i=new RTCIceCandidate(r);if(this.params.remoteDescriptionSet&&this.gotCandidate)for(this.peerConnection.addIceCandidate(i);this.params.remoteCandidates.length>0;)c["default"].Info("Setting stored remote candidates"),this.peerConnection.addIceCandidate(this.params.remoteCandidates.shift());else this.params.remoteCandidates.push(i)}catch(t){c["default"].Error("Error parsing candidate",e.candidate,t)}else"failed"!==n&&"ready"!==n||(clearTimeout(this._offerTimer),"undefined"!=typeof this.params.trace&&this.params.trace({type:n}))}},{key:"_errorCallback",value:function(e){c["default"].Error("Error in Stack ",e)}},{key:"_setMaxBWToSDP",value:function(e){var t=void 0,n=void 0;return this.params.video&&this.params.maxVideoBW&&(t=e.match(/m=video.*\r\n/),null==t&&(t=e.match(/m=video.*\n/)),t&&t.length>0&&(n=t[0]+"b=AS:"+this.params.maxVideoBW+"\r\n",e=e.replace(t[0],n))),this.params.audio&&this.params.maxAudioBW&&(t=e.match(/m=audio.*\r\n/),null==t&&(t=e.match(/m=audio.*\n/)),t&&t.length>0&&(n=t[0]+"b=AS:"+this.params.maxAudioBW+"\r\n",e=e.replace(t[0],n))),e}},{key:"_setLocalDesc",value:function(e){e.sdp=this._setMaxBWToSDP(e.sdp),e.sdp=e.sdp.replace(/a=ice-options:google-ice\r\n/g,""),this.params.callback(e),this.localDesc=e}},{key:"_setLocalDescP2P",value:function(e){e.sdp=this._setMaxBWToSDP(e.sdp),e.sdp=e.sdp.replace(/a=ice-options:google-ice\r\n/g,""),this.params.callback(e),this.localDesc=e,this.peerConnection.setLocalDescription(e)}}]),e}();t["default"]=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.send=0,this.types=[],this.datas=[]}return r(e,[{key:"setData",value:function(t,n){t!==e.TEXT&&t!==e.HTML||(n.length>2&&"\t"==n.substring(0,3)&&(n=n.substring(3)),n=n.replace(/\r?\n/g,"\r\n")),this.types.push(t),this.datas.push(n)}},{key:"getData",value:function(t){var n=this.datas[this.types.indexOf(t)];if(!n&&t===e.RTF){var r=this.types.indexOf[e.HTML];n=this.datas[r]}return n}}]),e}();i.HTML="HTML",i.TEXT="TEXT",i.RTF="RTF",i.PNG="PNG",t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={XK_VoidSymbol:16777215,XK_BackSpace:65288,XK_Tab:65289,XK_Linefeed:65290,XK_Clear:65291,XK_Return:65293,XK_Pause:65299,XK_Scroll_Lock:65300,XK_Sys_Req:65301,XK_Escape:65307,XK_Delete:65535,XK_Home:65360,XK_Left:65361,XK_Up:65362,XK_Right:65363,XK_Down:65364,XK_Prior:65365,XK_Page_Up:65365,XK_Next:65366,XK_Page_Down:65366,XK_End:65367,XK_Begin:65368,XK_Select:65376,XK_Print:65377,XK_Execute:65378,XK_Insert:65379,XK_Undo:65381,XK_Redo:65382,XK_Menu:65383,XK_Find:65384,XK_Cancel:65385,XK_Help:65386,XK_Break:65387,XK_Mode_switch:65406,XK_script_switch:65406,XK_Num_Lock:65407,XK_KP_Space:65408,XK_KP_Tab:65417,XK_KP_Enter:65421,XK_KP_F1:65425,XK_KP_F2:65426,XK_KP_F3:65427,XK_KP_F4:65428,XK_KP_Home:65429,XK_KP_Left:65430,XK_KP_Up:65431,XK_KP_Right:65432,XK_KP_Down:65433,XK_KP_Prior:65434,XK_KP_Page_Up:65434,XK_KP_Next:65435,XK_KP_Page_Down:65435,XK_KP_End:65436,XK_KP_Begin:65437,XK_KP_Insert:65438,XK_KP_Delete:65439,XK_KP_Equal:65469,XK_KP_Multiply:65450,XK_KP_Add:65451,XK_KP_Separator:65452,XK_KP_Subtract:65453,XK_KP_Decimal:65454,XK_KP_Divide:65455,XK_KP_0:65456,XK_KP_1:65457,XK_KP_2:65458,XK_KP_3:65459,XK_KP_4:65460,XK_KP_5:65461,XK_KP_6:65462,XK_KP_7:65463,XK_KP_8:65464,XK_KP_9:65465,XK_F1:65470,XK_F2:65471,XK_F3:65472,XK_F4:65473,XK_F5:65474,XK_F6:65475,XK_F7:65476,XK_F8:65477,XK_F9:65478,XK_F10:65479,XK_F11:65480,XK_L1:65480,XK_F12:65481,XK_L2:65481,XK_F13:65482,XK_L3:65482,XK_F14:65483,XK_L4:65483,XK_F15:65484,XK_L5:65484,XK_F16:65485,XK_L6:65485,XK_F17:65486,XK_L7:65486,XK_F18:65487,XK_L8:65487,XK_F19:65488,XK_L9:65488,XK_F20:65489,XK_L10:65489,XK_F21:65490,XK_R1:65490,XK_F22:65491,XK_R2:65491,XK_F23:65492,XK_R3:65492,XK_F24:65493,XK_R4:65493,XK_F25:65494,XK_R5:65494,XK_F26:65495,XK_R6:65495,XK_F27:65496,XK_R7:65496,XK_F28:65497,XK_R8:65497,XK_F29:65498,XK_R9:65498,XK_F30:65499,XK_R10:65499,XK_F31:65500,XK_R11:65500,XK_F32:65501,XK_R12:65501,XK_F33:65502,XK_R13:65502,XK_F34:65503,XK_R14:65503,XK_F35:65504,XK_R15:65504,XK_Shift_L:65505,XK_Shift_R:65506,XK_Control_L:65507,XK_Control_R:65508,XK_Caps_Lock:65509,XK_Shift_Lock:65510,XK_Meta_L:65511,XK_Meta_R:65512,XK_Alt_L:65513,XK_Alt_R:65514,XK_Super_L:65515,XK_Super_R:65516,XK_Hyper_L:65517,XK_Hyper_R:65518,XK_ISO_Level3_Shift:65027,XK_space:32,XK_exclam:33,XK_quotedbl:34,XK_numbersign:35,XK_dollar:36,XK_percent:37,XK_ampersand:38,XK_apostrophe:39,XK_quoteright:39,XK_parenleft:40,XK_parenright:41,XK_asterisk:42,XK_plus:43,XK_comma:44,XK_minus:45,XK_period:46,XK_slash:47,XK_0:48,XK_1:49,XK_2:50,XK_3:51,XK_4:52,XK_5:53,XK_6:54,XK_7:55,XK_8:56,XK_9:57,XK_colon:58,XK_semicolon:59,XK_less:60,XK_equal:61,XK_greater:62,XK_question:63,XK_at:64,XK_A:65,XK_B:66,XK_C:67,XK_D:68,XK_E:69,XK_F:70,XK_G:71,XK_H:72,XK_I:73,XK_J:74,XK_K:75,XK_L:76,XK_M:77,XK_N:78,XK_O:79,XK_P:80,XK_Q:81,XK_R:82,XK_S:83,XK_T:84,XK_U:85,XK_V:86,XK_W:87,XK_X:88,XK_Y:89,XK_Z:90,XK_bracketleft:91,XK_backslash:92,XK_bracketright:93,XK_asciicircum:94,XK_underscore:95,XK_grave:96,XK_quoteleft:96,XK_a:97,XK_b:98,XK_c:99,XK_d:100,XK_e:101,XK_f:102,XK_g:103,XK_h:104,XK_i:105,XK_j:106,XK_k:107,XK_l:108,XK_m:109,XK_n:110,XK_o:111,XK_p:112,XK_q:113,XK_r:114,XK_s:115,XK_t:116,XK_u:117,XK_v:118,XK_w:119,XK_x:120,XK_y:121,XK_z:122,XK_braceleft:123,XK_bar:124,XK_braceright:125,XK_asciitilde:126,XK_nobreakspace:160,XK_exclamdown:161,XK_cent:162,XK_sterling:163,XK_currency:164,XK_yen:165,XK_brokenbar:166,XK_section:167,XK_diaeresis:168,XK_copyright:169,XK_ordfeminine:170,XK_guillemotleft:171,XK_notsign:172,XK_hyphen:173,XK_registered:174,XK_macron:175,XK_degree:176,XK_plusminus:177,XK_twosuperior:178,XK_threesuperior:179,XK_acute:180,XK_mu:181,XK_paragraph:182,XK_periodcentered:183,XK_cedilla:184,XK_onesuperior:185,XK_masculine:186,XK_guillemotright:187,XK_onequarter:188,XK_onehalf:189,XK_threequarters:190,XK_questiondown:191,XK_Agrave:192,XK_Aacute:193,XK_Acircumflex:194,XK_Atilde:195,XK_Adiaeresis:196,XK_Aring:197,XK_AE:198,XK_Ccedilla:199,XK_Egrave:200,XK_Eacute:201,XK_Ecircumflex:202,XK_Ediaeresis:203,XK_Igrave:204,XK_Iacute:205,XK_Icircumflex:206,XK_Idiaeresis:207,XK_ETH:208,XK_Eth:208,XK_Ntilde:209,XK_Ograve:210,XK_Oacute:211,XK_Ocircumflex:212,XK_Otilde:213,XK_Odiaeresis:214,XK_multiply:215,XK_Oslash:216,XK_Ooblique:216,XK_Ugrave:217,XK_Uacute:218,XK_Ucircumflex:219,XK_Udiaeresis:220,XK_Yacute:221,XK_THORN:222,XK_Thorn:222,XK_ssharp:223,XK_agrave:224,XK_aacute:225,XK_acircumflex:226,XK_atilde:227,XK_adiaeresis:228,XK_aring:229,XK_ae:230,XK_ccedilla:231,XK_egrave:232,XK_eacute:233,XK_ecircumflex:234,XK_ediaeresis:235,XK_igrave:236,XK_iacute:237,XK_icircumflex:238,XK_idiaeresis:239,XK_eth:240,XK_ntilde:241,XK_ograve:242,XK_oacute:243,XK_ocircumflex:244,XK_otilde:245,XK_odiaeresis:246,XK_division:247,XK_oslash:248,XK_ooblique:248,XK_ugrave:249,XK_uacute:250,XK_ucircumflex:251,XK_udiaeresis:252,XK_yacute:253,XK_thorn:254,XK_ydiaeresis:255}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){(function(e){function r(t){var n,r=!1,s=!1,c=!1!==t.jsonp;if(e.location){var u="https:"===location.protocol,l=location.port;l||(l=u?443:80),r=t.hostname!==location.hostname||l!==t.port,s=t.secure!==u}if(t.xdomain=r,t.xscheme=s,n=new i(t),"open"in n&&!t.forceJSONP)return new o(t);if(!c)throw new Error("JSONP disabled");return new a(t)}var i=n(17),o=n(72),a=n(71),s=n(73);t.polling=r,t.websocket=s}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=n(16),o=n(19),a=n(7),s=n(13),c=n(44),u=n(3)("engine.io-client:polling");e.exports=r;var l=function(){var e=n(17),t=new e({xdomain:!1});return null!=t.responseType}();s(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){u("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||t()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;u("polling got data %s",e);var n=function(e,n,r){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){u("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){function r(e){function n(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&n(e[o]))return!0}return!1}return n(e)}var i=n(30);e.exports=r}).call(t,function(){return this}())},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(5),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,c=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(c),a=0,o=0;a<c;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,a,c=t||e.length,u=new Array(2*c);for(i=0,n=0;n<c;)if(o=e[n++],o<128)u[i++]=o;else if(a=s[o],a>4)u[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<c;)o=o<<6|63&e[n++],a--;a>1?u[i++]=65533:o<65536?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return r(u,i)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},function(e,t){"use strict";function n(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=n},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){"use strict";function n(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return e^-1}var i=n();e.exports=r},function(e,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");i!=-1&&o!=-1&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),s={},c=14;c--;)s[r[c]]=a[c]||"";return i!=-1&&o!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=o(e),a=r.source,l=r.id,d=r.path,f=u[l]&&d in u[l].nsps,h=t.forceNew||t["force new connection"]||!1===t.multiplex||f;return h?(c("ignoring socket cache for %s",a),n=s(a,t)):(u[l]||(c("new io instance for %s",a),u[l]=s(a,t)),n=u[l]),r.query&&!t.query?t.query=r.query:t&&"object"==typeof t.query&&(t.query=i(t.query)),n.socket(r.path,t)}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o=n(94),a=n(20),s=n(39),c=n(3)("socket.io-client");e.exports=t=r;var u=t.managers={};t.protocol=a.protocol,t.connect=r,t.Manager=n(39),t.Socket=n(41)},function(e,t,n){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var i=n(68),o=n(41),a=n(9),s=n(20),c=n(40),u=n(24),l=n(3)("socket.io-client:manager"),d=n(28),f=n(61),h=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=c(n,"open",function(){r.onopen(),e&&e()}),a=c(n,"error",function(t){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;l("connect attempt will timeout after %d",s);var u=setTimeout(function(){l("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this},r.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",u(this,"ondata"))),this.subs.push(c(e,"ping",u(this,"onping"))),this.subs.push(c(e,"pong",u(this,"onpong"))),this.subs.push(c(e,"error",u(this,"onerror"))),this.subs.push(c(e,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},r.prototype.socket=function(e,t){function n(){~d(i.connecting,r)||i.connecting.push(r)}var r=this.nsps[e];if(!r){r=new o(this,e,t),this.nsps[e]=r;var i=this;r.on("connecting",n),r.on("connect",function(){r.id=i.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t){function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=n},function(e,t,n){function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var i=n(20),o=n(9),a=n(100),s=n(40),c=n(24),u=n(3)("socket.io-client:socket"),l=n(27);e.exports=t=r;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),n=i.EVENT;l(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:i.CONNECT,query:this.query}):this.packet({type:i.CONNECT}))},r.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u("sending ack %j",r);var o=l(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(t,function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e){var t="";do t=a[e%s]+t,e=Math.floor(e/s);while(e>0);return t}function r(e){var t=0;for(l=0;l<e.length;l++)t=t*s+c[e.charAt(l)];return t}function i(){var e=n(+new Date);return e!==o?(u=0,o=e):e+"."+n(u++)}for(var o,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,c={},u=0,l=0;l<s;l++)c[a[l]]=l;i.encode=n,i.decode=r,e.exports=i},function(e,t){function n(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}e.exports=n},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),u=r(c),l=n(57),d=r(l),f=n(15),h=r(f),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._keyboard=null,n._mouse=null,n._mouseButtonMask=0,n._resizeTimer=null,n.container=null,n.params=e,n.params.options=n.params.options||{},n.id=n.params.id||"apx_"+(new Date).getTime()+"_"+Math.ceil(1e3*Math.random()),n.stream=n.params.stream,n._setContainer(n.params.container),n._createUI(),n._initInputDevices(),n.grabInput(),n}return a(t,e),s(t,[{key:"_setContainer",value:function(e){"string"==typeof e?this.container=(0,h["default"])("#"+e):e instanceof HTMLElement&&(this.container=(0,h["default"])(e))}},{key:"_createUI",value:function(){var e=this;this.el=(0,h["default"])('<div class="uz-eaas" tabindex="0"></div>').css({"background-color":"transparent",position:"relative",outline:"none",width:"100%",height:"100%"}).on("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}).on("click",function(){e.focus()}),this.video=(0,h["default"])('<video class="uz-avp-video" autoplay="autoplay"></video>').appendTo(this.el),this.remoteCursor=(0,
h["default"])("<img/>").css({display:"none",position:"absolute",left:0,top:0}).appendTo(this.el),this.container.append(this.el),this.__w_r_handler=this._handleWindowResize.bind(this),(0,h["default"])(window).on("resize",this.__w_r_handler),this.resizeTo(1024,768),this.focus(),this.updateWithStream(this.stream)}},{key:"focus",value:function(){var e=this;setTimeout(function(){e.el.dom[0].focus()},50)}},{key:"updateWithStream",value:function(e){if(e){this.stream=e;var t=e.stream;t&&attachMediaStream(this.video.dom[0],t)}}},{key:"_handleWindowResize",value:function(){var e=this;clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(function(){e.emit("app_resize")},100)}},{key:"_initInputDevices",value:function(){var e,t=this,n=this.el.dom[0];this._keyboard=new d["default"].Keyboard({target:n,skipKeys:[["ctrl",27],["alt",9]],onKeyPress:function(e,n){t.emit("keyboard_input",{keyValue:e,isPressed:n})}}),this._mouse=new d["default"].Mouse({target:n,notify:(e=this._keyboard,this._keyboard.sync).bind(e),onMouseButton:function(e,n,r,i){r?t._mouseButtonMask|=i:t._mouseButtonMask^=i,t.emit("mouse_input",{posX:e,posY:n,buttonMask:t._mouseButtonMask})},onMouseMove:function(e,n){t.emit("mouse_input",{posX:e,posY:n,buttonMask:t._mouseButtonMask})}})}},{key:"grabInput",value:function(){this._keyboard&&this._keyboard.grab(),this._mouse&&this._mouse.grab(),this._mouseButtonMask=0}},{key:"ungrabInput",value:function(){this._keyboard&&this._keyboard.ungrab(),this._mouse&&this._mouse.ungrab(),this._mouseButtonMask=0}},{key:"resizeTo",value:function(e,t){if(e>0&&t>0){var n={width:e,height:t};this.el.css(n).find(".uz-avp-video").css(n)}this.focus()}},{key:"setCursor",value:function(e,t,n){this.el.css({cursor:"url("+e+") "+t+" "+n+", auto"}),this.remoteCursor.attr("src",e)}},{key:"hideRemoteCursor",value:function(){this.remoteCursor.css({display:"none",left:0,top:0})}},{key:"showRemoteCursor",value:function(){this.remoteCursor.css("display","block")}},{key:"updateRemoteCursorPos",value:function(e,t){this.showRemoteCursor(),this.remoteCursor.css({left:e,top:t-10})}},{key:"destroy",value:function(){this.ungrabInput(),this.video.dom[0].pause(),(0,h["default"])(window).off("resize",this.__w_r_handler),this.el.remove()}}]),t}(u["default"]);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(38),u=r(c),l=n(4),d=r(l),f=n(2),h=r(f),p=n(6),m=r(p),g=n(21),v=r(g),y=n(12),_=r(y),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=t.DISCONNECTED,n.p2p=!1,n.roomID="",n.remoteStreams={},n.localStreams={},n.socket={},n.params=e,n.on("room-disconnected",function(){n.cleanup()}),n}return a(t,e),s(t,[{key:"cleanup",value:function(){this.state=t.DISCONNECTED;for(var e in this.remoteStreams)if(this.remoteStreams.hasOwnProperty(e)){var n=this.remoteStreams[e];this._removeStream(n),delete this.remoteStreams[e],this.emit("stream-removed",{stream:n})}this.remoteStreams={};for(var r in this.localStreams)if(this.localStreams.hasOwnProperty(r)){var i=this.localStreams[r];i.pc.close(),delete this.localStreams[r]}try{this.socket.disconnect()}catch(e){h["default"].Debug("Socket already disconnected")}this.socket=void 0}},{key:"connect",value:function(){var e=this;this.state!==t.DISCONNECTED&&h["default"].Warn("Room already connected"),this.state=t.CONNECTING,this._connectSocket(this.params.token||{},function(n){var r=n.id,i=n.streams||[],o=[];e.state=t.CONNECTED,e.p2p=n.p2p,e.iceServers=n.iceServers,e.params.defaultVideoBW=n.defaultVideoBW,e.params.maxVideoBW=n.maxVideoBW;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a],c=new _["default"]({local:!1,streamID:s.id,audio:s.audio,video:s.video,data:s.data,screen:s.screen,attributes:s.attributes});o.push(c),e.remoteStreams[s.id]=c}h["default"].Info("Connected to room "+r),e.roomID=r,e.emit("room-connected",{streams:o})},function(t){h["default"].Error("MCU Not Connected:",t),e.emit("room-error",{message:t})})}},{key:"publish",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(n.maxVideoBW=n.maxVideoBW||this.params.defaultVideoBW,n.maxVideoBW>this.params.maxVideoBW&&(n.maxVideoBW=this.params.maxVideoBW),void 0===n.minVideoBW&&(n.minVideoBW=0),n.minVideoBW>this.params.defaultVideoBW&&(n.minVideoBW=this.params.defaultVideoBW),e.local&&void 0===this.localStreams[e.getID()])if(e.hasAudio()||e.hasVideo()||e.hasScreen())if(void 0!==e.url||void 0!==e.recording){var i=void 0,o=void 0;e.url?(i="url",o=e.url):(i="recording",o=e.recording),h["default"].Info("Checking publish options for",e.getID()),e.checkOptions(n),this._sendSocketSDP("publish",{state:i,data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes(),createOffer:n.createOffer},o,function(n,i){null!==n?(h["default"].Info("Stream published"),e.getID=function(){return n},e.sendData=function(n){t._sendDataSocket(e,n)},e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t,r&&r(n)):(h["default"].Error("Error when publishing the stream",i),r&&r(void 0,i))})}else this.p2p?(this.params.maxAudioBW=n.maxAudioBW,this.params.maxVideoBW=n.maxVideoBW,this._sendSocketSDP("publish",{state:"p2p",data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),attributes:e.getAttributes()},void 0,function(n,i){null===n&&(h["default"].Error("Error when publishing the stream",i),r&&r(void 0,i)),h["default"].Info("Stream published"),e.getID=function(){return n},e.hasData()&&(e.sendData=function(n){t._sendDataSocket(e,n)}),e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t})):(h["default"].Info("Publishing to E Normally, is createOffer",n.createOffer),this._sendSocketSDP("publish",{state:"erizo",data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),minVideoBW:n.minVideoBW,attributes:e.getAttributes(),createOffer:n.createOffer},void 0,function(i,o){return null===i?(h["default"].Error("Error when publishing the stream: ",o),void(r&&r(void 0,o))):(h["default"].Info("Stream assigned an Id, starting the publish process"),e.getID=function(){return i},e.hasData()&&(e.sendData=function(n){t._sendDataSocket(e,n)}),e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[i]=e,e.room=t,e.pc=new v["default"]({iceServers:t.iceServers,maxAudioBW:n.maxAudioBW,maxVideoBW:n.maxVideoBW,limitMaxAudioBW:t.params.maxAudioBW,limitMaxVideoBW:t.params.maxVideoBW,audio:e.hasAudio(),video:e.hasVideo(),callback:function(n){n.connectionType="publisher","candidate"===n.type&&(n={type:"candidate",connectionType:"publisher",candidate:{candidate:n.candidate.candidate,sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid}}),h["default"].Debug("Sending message",n),t._sendSocketSDP("signaling_message",{streamId:e.getID(),msg:n},void 0,function(){})},trace:function(e){t.emit("mcu_signaling_msg",e)}}),e.pc.addStream(e.stream),n.createOffer||e.pc.createOffer(),void(r&&r(i)))}));else e.hasData()&&this._sendSocketSDP("publish",{state:"data",data:e.hasData(),audio:!1,video:!1,screen:!1,attributes:e.getAttributes()},void 0,function(n,i){return null===n?(h["default"].Error("Error publishing stream ",i),void(r&&r(void 0,i))):(h["default"].Info("Stream published"),e.getID=function(){return n},e.sendData=function(n){t._sendDataSocket(e,n)},e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t,void(r&&r(n)))})}},{key:"startRecording",value:function(e,t){h["default"].Debug("Start Recording stream:",e.getID()),this._sendSocketMSG("startRecorder",{to:e.getID()},function(e,n){return null===e?(h["default"].Error("Error on start recording",n),void(t&&t(void 0,n))):(h["default"].Info("Start recording",e),void(t&&t(e)))})}},{key:"stopRecording",value:function(e,t){this._sendSocketMSG("stopRecorder",{id:e},function(n,r){return null===n?(h["default"].Error("Error on stop recording",r),void(t&&t(void 0,r))):(h["default"].Info("Stop recording",e),void(t&&t(!0)))})}},{key:"unpublish",value:function(e,t){if(e.local){this._sendSocketMSG("unpublish",e.getID(),function(e,n){return null===e?(h["default"].Error("Error unpublishing stream",n),void(t&&t(void 0,n))):(h["default"].Info("Stream unpublished"),void(t&&t(!0)))});var n=e.room.p2p;if(e.room=void 0,(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url){if(n)for(var r in e.pc)e.pc[r].close();else e.pc.close();e.pc=void 0}delete this.localStreams[e.getID()],e.getID=function(){},e.sendData=function(e){},e.setAttributes=function(e){}}else h["default"].Error("Cannot unpublish, stream does not exist or is not local"),t&&t(void 0,error)}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(!e.local){if(e.hasVideo()||e.hasAudio()||e.hasScreen())this.p2p?(this._sendSocketSDP("subscribe",{streamId:e.getID()}),r&&r(!0)):(h["default"].Info("Checking subscribe options for",e.getID()),e.checkOptions(n),this._sendSocketSDP("subscribe",{streamId:e.getID(),audio:n.audio,video:n.video,data:n.data,browser:m["default"].getBrowser(),createOffer:n.createOffer,slideShowMode:n.slideShowMode},void 0,function(i,o){return null===i?(h["default"].Error("Error subscribing to stream ",o),void(r&&r(void 0,o))):(h["default"].Info("Subscriber added"),e.pc=new v["default"]({iceServers:t.iceServers,audio:n.audio,video:n.video,nop2p:!0,callback:function(n){n.connectionType="subscriber","candidate"===n.type&&(n={type:"candidate",connectionType:"subscriber",candidate:{candidate:n.candidate.candidate,sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid}}),h["default"].Debug("Sending message",n),t._sendSocketSDP("signaling_message",{streamId:e.getID(),msg:n,browser:e.pc.browser},void 0,function(){})},trace:function(e){t.emit("mcu_signaling_msg",e)}}),e.pc.onaddstream=function(n){h["default"].Info("Stream subscribed"),e.stream=n.stream,t.emit("stream-subscribed",{stream:e})},e.pc.createOffer(!0),void(r&&r(!0)))}));else{if(!e.hasData()||n.data===!1)return void h["default"].Info("Subscribing to anything");this._sendSocketSDP("subscribe",{streamId:e.getID(),data:n.data},void 0,function(n,i){return null===n?(h["default"].Error("Error subscribing to stream ",i),void(r&&r(void 0,i))):(h["default"].Info("Stream subscribed"),t.emit("stream-subscribed",{stream:e}),void(r&&r(!0)))})}h["default"].Info("Subscribing to: "+e.getID())}}},{key:"unsubscribe",value:function(e,t){var n=this;this.socket&&!e.local&&this._sendSocketMSG("unsubscribe",e.getID(),function(r,i){null===r?t&&t(void 0,i):(n._removeStream(e),t&&t(!0))},function(){h["default"].Error("Error calling unsubscribe.")})}},{key:"disconnect",value:function(){h["default"].Debug("Disconnection requested"),this.emit("room-disconnected",{message:"expected-disconnection"})}},{key:"getStreamsByAttribute",value:function(e,t){var n=[];for(var r in this.remoteStreams)if(this.remoteStreams.hasOwnProperty(r)){var i=this.remoteStreams[r],o=i.getAttributes();o&&o[e]&&o[e]===t&&n.push(i)}return n}},{key:"_sendSocketMSG",value:function(e,t,n,r){this.socket.emit(e,t,function(e,t){"success"===e?n&&n(t):"error"===e?r&&r(t):n&&n(e,t)})}},{key:"_sendSocketSDP",value:function(e,t,n,r){this.socket.emit(e,t,n,function(e,t){r&&r(e,t)})}},{key:"_removeStream",value:function(e){e&&e.stream&&(e.pc&&e.pc.close(),e.local&&e.stream.stop())}},{key:"_sendDataSocket",value:function(e,t){e.local?this._sendSocketMSG("sendDataStream",{id:e.getID(),msg:t}):h["default"].Error("Cannot send data through a remote stream")}},{key:"_updateAttributes",value:function(e,t){e.local?(e.updateLocalAttributes(t),this._sendSocketMSG("updateStreamAttributes",{id:e.getID(),attrs:t})):h["default"].Error("Cannot update attributes in a remote stream")}},{key:"_connectSocket",value:function(e,n,r){var i=this,o=function(e,t){e.pc=new v["default"]({iceServers:i.iceServers,maxAudioBW:i.params.maxAudioBW,maxVideoBW:i.params.maxVideoBW,limitMaxAudioBW:i.params.maxAudioBW,limitMaxVideoBW:i.params.maxVideoBW,callback:function(n){i._sendSocketSDP("signaling_message",{streamId:e.getID(),peerSocket:t,msg:n})},trace:function(e){i.emit("mcu_signaling_msg",e)}}),e.pc.onaddstream=function(t){h["default"].Info("Stream subscribed"),e.stream=t.stream,i.emit("stream-subscribed",{stream:e})}};this.socket=(0,u["default"])(e.host,{reconnection:!1,multiplex:!1}),this.socket.on("onAddStream",function(e){var t=new _["default"]({local:!1,streamID:e.id,audio:e.audio,video:e.video,data:e.data,screen:e.screen,attributes:e.attributes});i.remoteStreams[e.id]=t,i.emit("stream-added",{stream:t})}),this.socket.on("signaling_message_erizo",function(e){var t=e.peerId?i.remoteStreams[e.peerId]:i.localStreams[e.streamId];t&&t.pc.processSignalingMessage(e.mess)}),this.socket.on("signaling_message_peer",function(e){var t=i.localStreams[e.streamId];t?t.pc[e.peerSocket].processSignalingMessage(e.msg):(t=i.remoteStreams[e.streamId],t.pc||o(t,e.peerSocket),t.pc.processSignalingMessage(e.msg))}),this.socket.on("publish_me",function(e){var t=i.localStreams[e.streamId];t.pc=t.pc||{},t.pc[e.peerSocket]=new v["default"]({iceServers:i.iceServers,audio:t.hasAudio(),video:t.hasVideo(),callback:function(t){i._sendSocketSDP("signaling_message",{streamId:e.streamId,peerSocket:e.peerSocket,msg:t})},trace:function(e){i.emit("mcu_signaling_msg",e)}}),t.pc[e.peerSocket].oniceconnectionstatechange=function(n){"disconnected"===n&&(t.pc[e.peerSocket].close(),delete t.pc[e.peerSocket])},t.pc[e.peerSocket].addStream(t.stream),t.pc[e.peerSocket].createOffer()}),this.socket.on("onBandwidthAlert",function(e){if(h["default"].Info("Bandwidth Alert on",e.streamID,"message",e.message,"BW:",e.bandwidth),e.streamID){var t=i.remoteStreams[e.streamID];t&&t.emit("bandwidth-alert",{stream:t,msg:e.message,bandwidth:e.bandwidth})}}),this.socket.on("onDataStream",function(e){var t=i.remoteStreams[e.id];t.emit("stream-data",{msg:e.msg,stream:t})}),this.socket.on("onUpdateAttributeStream",function(e){var t=i.remoteStreams[e.id];t.updateLocalAttributes(e.attrs),t.emit("stream-attributes-update",{attrs:e.attrs,stream:t})}),this.socket.on("onRemoveStream",function(e){var t=i.remoteStreams[e.id];i._removeStream(t),delete i.remoteStreams[e.id],i.emit("stream-removed",{stream:t})}),this.socket.on("disconnect",function(){h["default"].Info("Socket disconnected, lost connection to MCU"),i.state!==t.DISCONNECTED&&(h["default"].Error("Unexpected disconnection from MCU"),i.emit("room-disconnected",{message:"unexpected-disconnection"}))}),this.socket.on("connection_failed",function(e){"publish"===e.type?(h["default"].Error("ICE Connection Failed on publishing, disconnecting"),i.state!==t.DISCONNECTED&&i.emit("stream-failed",{message:"Publishing local stream failed ICE Checks, disconnecting client"})):(h["default"].Error("ICE Connection Failed on subscribe, alerting"),i.state!==t.DISCONNECTED&&i.emit("stream-failed",{message:"Subscriber failed the ICE Checks, cannot reach Licode for media"}))}),this.socket.on("error",function(e){r("Cannot connect to Controller (socket.io error)",e)}),this._sendSocketMSG("xtToken",e,n,r)}}]),t}(d["default"]);b.DISCONNECTED=0,b.CONNECTING=1,b.CONNECTED=2,t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(10),u=r(c),l=n(4),d=r(l),f=n(82),h=r(f),p=n(79),m=n(56),g=r(m),v=n(15),y=r(v),_=n(8),b=r(_),w=n(2),k=r(w),C=n(6),S=r(C),T=n(12),E=(r(T),n(14)),P=r(E),A=n(11),R=r(A),I=n(48),x=r(I),O=n(50),M=r(O),D=n(47),N=r(D),K=n(22),B=r(K),X=1500,L=4e3,U=5,W=77001,j=88001,z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.params=null,n.room=null,n.controlChannel=null,n.isParticipantMode=!1,n._isActionStart=!0,n._reconnecting=!1,n._retryTimes=0,n._roomConnectCount=0,n._networkState=0,n._scale=1,n._appDelay=0,n.params=e,n.controlChannel=n.createControlChannel(),n._initReconnectionHandler(),n}return a(t,e),s(t,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setContainer(e.container),this.clientVersion=1,this.clientType=e.useH264?5:0,this.userNickname=e.userNickname||"";var t=e.userId;if(!t)throw new Error("missing the *userId* for the session");return this._setUserId(t),e.mcuUrl&&e.gwHost&&e.gwPort?(k["default"].Debug("calling new version sdk: start()"),this._connect(e)):(k["default"].Debug("calling lagacy version sdk: start()"),this._connectLagacy(e))}},{key:"_connectLagacy",value:function(e){var t=this,n=e.sessionId,r=e.appId;if(n)this.isParticipantMode=!0,this.sessionId=n;else{if(!r)throw new Error("*appId* or *sessionId* is required for start or join a session");this.isParticipantMode=!1,this.appId=r,this.fileId=e.fileId,this.fileName=e.fileName,this.filePath=e.filePath,this.authParam=e.authParam,this.dfsPath=e.dfsPath}var i=null;return i=this.isParticipantMode?P["default"].requestJoinSession(R["default"].getToken(),{sessionId:this.sessionId,userId:this.userId}):P["default"].requestStartSession(R["default"].getToken(),{type:"EDITING",appId:this.appId,userId:this.userId,fileId:this.fileId,fileName:encodeURIComponent(this.fileName||""),filePath:encodeURIComponent(this.filePath||""),authParam:this.authParam}),i.then(function(e){t.sessionMgrUrl=b["default"].SESSION_MGR_URL,t.sessionId=e.sessionId,t.mcuUrl=e.mcuUrl,t.gwHost=e.gwHost,t.gwPort=e.gwPort,t.readOnly=e.readOnly}).then(function(){return(e.beforeConnect||function(){return u["default"].resolve()})()}).then(function(){t.controlChannel.connect(t.gwHost,t.gwPort)})}},{key:"_connect",value:function(e){var t=!!e.isParticipantMode,n=e.sessionMgrUrl,r=e.sessionId,i=e.mcuUrl,o=e.gwHost,a=e.gwPort;if(!n)throw new Error("*sessionMgrUrl* is required for start or join a session");if(!r)throw new Error("*sessionId* is required for start or join a session");if(!i)throw new Error("*mcuUrl* is required for start or join a session");if(!o)throw new Error("*gwHost* is required for start or join a session");if(!a)throw new Error("*gwPort* is required for start or join a session");return this.isParticipantMode=t,this.sessionMgrUrl=n,this.sessionId=r,this.mcuUrl=i,this.gwHost=o,this.gwPort=a,this.controlChannel.connect(this.gwHost,this.gwPort),u["default"].resolve()}},{key:"disconnect",value:function(){this.controlChannel&&this.controlChannel.disconnect(),this.room&&this.room.disconnect(),this.player&&this.player.destroy(),clearInterval(this._stats_timer),this._stopReconnect()}},{key:"leave",value:function(e){this.controlChannel.requestLeaveSession(e)}},{key:"requestControl",value:function(){this.controlChannel.requestForController(this.userId)}},{key:"requestKickoutParticipant",value:function(){this.controlChannel.requestKickoutParticipant(this.userId)}},{key:"requestChangeIME",value:function(e){this.controlChannel.requestChangeIME(e)}},{key:"requestAppRuntimeInfo",value:function(){var e=this.appContainer.width(),t=this.appContainer.height();this.controlChannel.requestChangeClientSize(e,t),this.controlChannel.requestIMEList(this.userId)}},{key:"requestInsertText",value:function(e){this.controlChannel.sendClipboardText(e)}},{key:"requestInsertImage",value:function(e,t){this.controlChannel.sendClipboardImage(e,t)}},{key:"requestSendClipboardData",value:function(e,t,n){var r=t.length,i=0;e===B["default"].PNG?i=r:(t=e===B["default"].RTF?g["default"].encode(h["default"].deflate(t)):p.Base64.encode(t),i=t.length),i<=3145728?this.controlChannel.sendClipboardData(e,t,n,r):this.emit("APP_CLIPBOARD_OVERFLOW")}},{key:"requestChangeNickname",value:function(e){this.controlChannel.requestChangeNickname(e)}},{key:"requestResumeZomebieSession",value:function(){this.controlChannel.requestResumeZomebieSession(1)}},{key:"requestTransformUser",value:function(e){e.nickName=encodeURIComponent(e.nickName);var t=""+(e.id||""),n=angular.toJson(e);this.controlChannel.requestTransformUser(t,n),this._setUserId(t)}},{key:"requestCallRemoteAPI",value:function(e,t){return this.controlChannel.requestCallRemoteAPI(e,t)}},{key:"getRoom",value:function(){var e=this;if(!this.room){var t={token:R["default"].getToken(),user:this.userId,host:this.mcuUrl,sessionId:this.sessionId,sessionMgrUrl:this.sessionMgrUrl};t.clientVersion=this.clientVersion,t.clientType=this.roomClientType;var n=this.room=new x["default"]({token:t});n.on("room-error",function(t){e._reconnecting||e.emit("SESSION_DISCONNECTED",{type:"unexpected",errorCode:W})}),n.on("room-connected",function(t){e._subscribeStream(t.streams),e._roomConnectCount+=1,e.emit("SESSION_CONNECTED",{firstTime:0===e._roomConnectCount})}),n.on("room-disconnected",function(t){"expected-disconnection"===t.message?e.emit("SESSION_DISCONNECTED",{type:"expected"}):e.emit("__request_reconnect__")}),n.on("stream-added",function(t){var n=t.stream;n&&e._subscribeStream([n])}),n.on("stream-subscribed",function(t){var n=t.stream;n&&e.initPlayerWithStream(n)}),n.on("stream-failed",function(t){e.room.disconnect()}),n.on("mcu_signaling_msg",function(t){"ssrc"===t.type?(e.ssrcAudio=t.audio,e.ssrcVideo=t.video):e.emit("MCU_SIG",t)})}return this.room}},{key:"createControlChannel",value:function(){var e=this,n=new M["default"]({secure:b["default"].USE_CONTROL_CHANNEL_SSL});return n.on("channel_error",function(t){e._reconnecting||e.emit("SESSION_DISCONNECTED",{type:"unexpected",errorCode:j})}),n.on("channel_close",function(t){t.wasClean||e.emit("__request_reconnect__")}),n.on("channel_open",function(){e._isActionStart?(e._isActionStart=!1,e.isParticipantMode?e.controlChannel.requestJoinSession(e.sessionId,e.userId,e.userNickname,e.clientVersion,e.clientType):e.controlChannel.requestStartSession(e.sessionId,e.userId,e.userNickname,e.clientVersion,e.clientType)):e.controlChannel.requestReconnectSession(e.sessionId,e.userId,e.userNickname)}),n.on("heartbeat_lost",function(){e.emit("__request_reconnect__")}),n.on("kMsgTypeStartAppAck",function(t){var n=t.returnCode,r=t.clientType;e.roomClientType=r,e.isNormalResponse(n)||e.emit("APP_START_FAILED",{errorCode:n})}),n.on("kMsgTypeNotifyStartProgress",function(n){var r=n.returnCode;if(e.isNormalResponse(r))switch(n.type){case t.START_APP_PREPARING:100===n.percentage&&(e.requestAppRuntimeInfo(),e.emit("APP_START_PREPARING"));break;case t.START_APP_OPEN:e.getRoom().connect(),e.emit("APP_START_OPEN");break;case t.START_APP_READY:e.emit("APP_START_COMPLETED",{controllerId:e.userId,hostId:e.userId})}else e.emit("APP_START_FAILED",{errorCode:r})}),n.on("kMsgTypeJoinSessionAck",function(t){var n=t.returnCode,r=t.clientType;e.roomClientType=r,e.isNormalResponse(n)?(e.getRoom().connect(),e.requestAppRuntimeInfo(),e.emit("APP_START_COMPLETED",{controllerId:t.controllerId,hostId:t.hostId})):e.emit("APP_START_FAILED",{errorCode:n})}),n.on("kMsgTypeReconnectSessionAck",function(t){var n=t.returnCode;e._stopReconnect(),e.isNormalResponse(n)||e.emit("SESSION_RECONNECT_ERROR",{errorCode:n})}),n.on("kMsgTypeLeaveSessionAck",function(t){var n=t.returnCode;e.isParticipantMode?e.isNormalResponse(n)?e.emit("APP_WILL_EXIT",{reason:null}):e.emit("APP_LEAVE_FAILED",{errorCode:n}):e.isNormalResponse(n)||e.emit("APP_LEAVE_FAILED",{errorCode:n})}),n.on("kMsgTypeChangeClientSizeAck",function(t){e._onClientSizeChanged(t.actualWidth,t.actualHeight)}),n.on("kMsgTypeNotifyClientSizeChange",function(t){e._onClientSizeChanged(t.actualWidth,t.actualHeight)}),n.on("kMsgTypeCursorShapeUpdate",function(t){e.player&&e.player.setCursor("data:image/bmp;base64,"+t.color_bytes_base64,t.xhot,t.yhot)}),n.on("kMsgTypeNotifyMouseInput",function(t){if(e.player){var n=e._scale,r=Math.ceil(t.posX*n),i=Math.ceil(t.posY*n);e.player.updateRemoteCursorPos(r,i)}}),n.on("kMsgTypeRequestForControllerAck",function(t){e.isNormalResponse(t.returnCode)&&(e.player&&(e.player.hideRemoteCursor(),e.player.focus()),e.emit("APP_CONTROL_GOT"))}),n.on("kMsgTypeNotifyControllerChange",function(t){t.controllerId===e.userId&&e.player&&(e.player.hideRemoteCursor(),e.player.focus()),e.emit("APP_CONTROLLER_CHANGE",t)}),n.on("kMsgTypeAcquireIMEListAck",function(t){e.emit("APP_IME_LIST",{listIME:t.IMElist,currIME:t.CurIME})}),n.on("kMsgTypeChangeIMEAck",function(t){e.player&&e.player.focus()}),n.on("kMsgTypeNotifyIMEChange",function(t){e.emit("APP_IME_CHANGE",{ime:t.IME})}),n.on("kMsgTypeNotifyParticipantEvent",function(n){var r=n.notifyEvent;r===t.P_EVENT_BE_KICKED_OUT||r===t.P_EVENT_HOST_LEFT||r===t.P_EVENT_HOST_DISCONNECTED?(e.disconnect(),e.emit("APP_WILL_EXIT",{reason:r})):r===t.P_EVENT_HOST_RECONNECTED||r===t.P_EVENT_FILE_MERGING}),n.on("kMsgTypeNotifyParticipantChange",function(t){e.emit("APP_PARTICIPANT_CHANGE",t)}),n.on("kMsgTypeNotifyNicknameChange",function(t){e.emit("APP_USERNICK_CHANGE",t)}),n.on("kMsgTypeTransformUserAck",function(t){var n=t.errorCode;e.isNormalResponse(n)||e.emit("APP_START_FAILED",{errorCode:n})}),n.on("kMsgTypeNotifyUserTransform",function(t){e.emit("APP_USER_TRANSFORMED",t)}),n.on("kMsgTypeZomebieSessionNotify",function(t){e.emit("APP_IN_ZOMEBIE",t)}),n.on("kMsgTypePrintFileInfo",function(t){e.emit("APP_PRINT",t)}),n.on("kMsgTypeUsbRedirCallbackAddr",function(t){e.emit("DEVICE_USB_REDIRECT",t)}),n.on("kMsgTypeRemoteCallAPIAck",function(t){e.emit("APP_CALL_API",t)}),n.on("kMsgTypeClipBoardSupportRTF",function(t){e.isClipboardSupportRTF=t.bSupportRTF}),n.on("kMsgTypeServerClipboardData",function(t){var n=t.clipType,r=t.clipData;if(n!==B["default"].TEXT&&n!==B["default"].RTF&&n!==B["default"].HTML&&n!==B["default"].PNG||(n!==B["default"].PNG&&(r=p.Base64.decode(r)),e.clipboardData=e.clipboardData||new B["default"],e.clipboardData.setData(n,r)),e.controlChannel.notifyClipboardDataRecieved(n,!0),t.bLast){var i=e.clipboardData;e.clipboardData=null,e.emit("APP_CLIPBOARD_RECIEVED",i)}}),n.on("kMsgTypeClientClipboardDataAck",function(t){e.emit("APP_CLIPBOARD_WROTE",t)}),n}},{key:"isNormalResponse",value:function(e){return e in t.RETURN_CODE_NORMAL}},{key:"initPlayerWithStream",value:function(e){var t=this;return this.player||(this.player=new N["default"]({container:this.appContainer.dom[0],stream:e}).on("keyboard_input",function(e){t.controlChannel.sendKeyboardInput(e.keyValue,e.isPressed)}).on("mouse_input",function(e){var n=1/t._scale;t.controlChannel.sendMouseInput(e.posX*n,e.posY*n,e.buttonMask)}).on("app_resize",function(){t.controlChannel.requestChangeClientSize(t.appContainer.width(),t.appContainer.height())})),this.player.updateWithStream(e),this._monitAppStreamState(e),this.player}},{key:"setScale",value:function(e){this._scale=Math.abs(e)||1}},{key:"resetPlayerSizeLocal",value:function(){var e=this.appClientSize;this.player&&e&&(this.setScale(1),this.player.resizeTo(e.w,e.h))}},{key:"fitPlayerSizeToContainerLocal",value:function(e,t){var n=this;setTimeout(function(){var e=n.appClientSize;if(n.player&&e){var t={w:n.appContainer.width(),h:n.appContainer.height()},r=e.w,i=e.h,o=t.w,a=t.h,s=o/a,c=r/i,u=1;u=c>s?o/r:a/i;var l=Math.ceil(r*u),d=Math.ceil(i*u);n.setScale(u),n.player.resizeTo(l,d),n.emit("APP_PLAYER_SIZE_CHANGE",{local:{w:l,h:d},remote:e})}},500)}},{key:"setContainer",value:function(e){if("string"==typeof e)this.appContainer=(0,y["default"])("#"+e);else{if(!(e instanceof HTMLElement))throw new Error("container element or element id is required");e.getAttribute("id")||e.setAttribute("id","uzac"+(new Date).getTime()),this.appContainer=(0,y["default"])(e)}}},{key:"_onClientSizeChanged",value:function(e,t){var n=this,r={w:e,h:t};this.appClientSize=r,this.player?(this.player.resizeTo(e,t),this.emit("APP_PLAYER_SIZE_CHANGE",{local:r,remote:r})):setTimeout(function(){return n._onClientSizeChanged(e,t)},300)}},{key:"_subscribeStream",value:function(e){for(var t=e.length||0,n=0;n<t;n++){var r=e[n];this._localStream&&this._localStream.getID()===r.getID()||this.room.subscribe(r)}}},{key:"_setUserId",value:function(e){this.userId=""+(e||"")}},{key:"_initReconnectionHandler",value:function(){var e=this;this.on("__request_reconnect__",function(){e._reconnecting||(0===e._retryTimes&&e.emit("SESSION_RECONNECTING"),e._reconnect())})}},{key:"_reconnect",value:function(){var e=this;if(this.room)if(this._reconnecting=!0,this._retryTimes+=1,k["default"].Debug(">>> retry times:",this._retryTimes),clearTimeout(this._reconnct_conn_timer),1===this._retryTimes||this._retryTimes>1&&this.room.state===x["default"].CONNECTING&&"failed"===this.controlChannel._u_state){try{this.room.cleanup(),this.controlChannel.disconnect()}catch(e){}this._reconnct_conn_timer=setTimeout(function(){e.room.connect(),e.controlChannel.init(),e.controlChannel.connect(e.gwHost,e.gwPort),e._handleReconnect()},L)}else this._handleReconnect()}},{key:"_handleReconnect",value:function(){var e=this;clearTimeout(this._reconnct_timer),this._reconnct_timer=setTimeout(function(){e.room.state!==x["default"].DISCONNECTED&&e.controlChannel._u_state in{normal:1,connect:1}?e._stopReconnect():e._retryTimes<U?e._reconnect():(e._stopReconnect(),e.emit("SESSION_DISCONNECTED",{type:"unexpected",errorCode:j}))},L)}},{key:"_stopReconnect",value:function(){clearTimeout(this._reconnct_conn_timer),clearTimeout(this._reconnct_timer),this._reconnecting=!1,this._retryTimes=0}},{key:"_monitAppStreamState",value:function(e){var t=this;clearInterval(this._stats_timer);var n=S["default"].getBrowser();"mozilla"===n?(this._packetsLost=0,this._packetsReceived=0,this._stats_timer=setInterval(function(){e.pc.peerConnection.getStats(null,function(e){try{var n=0,r=0,i=0;for(var o in e){var a=e[o];if("inboundrtp"===a.type&&a.isRemote===!1&&"video"===a.mediaType){n=a.jitter,r=a.packetsLost,i=a.packetsReceived;break}}if("undefined"!=typeof r&&"undefined"!=typeof i){var s=i-t._packetsReceived;if(!isNaN(s)){var c=r-t._packetsLost,u=c/(s+c),l=1,d=Math.floor((15*t._appDelay+n*(s+10)*(5+20*u))/16);t._appDelay=d,l=d<=200?1:d>200&&d<=300?2:d>300&&d<=500?3:4,t._packetsLost=r,t._packetsReceived=i,t.controlChannel.sendQosFeedback(d),t._networkState!==l&&(t._networkState=l,t.emit("NETWORK_CHANGE",{state:l}))}}}catch(e){clearInterval(t._stats_timer)}},function(){k["default"].Debug("^^^^^^^^^^^^^^^^^^^^^^^^")})},X)):(this._netstats||(this._netstats={frames:0,thresholds:{200:{frames:0,netMin:Number.MAX_SAFE_INTEGER,netMax:0,netSum:0,recMin:Number.MAX_SAFE_INTEGER,
recMax:0,recSum:0},300:{frames:0,netMin:Number.MAX_SAFE_INTEGER,netMax:0,netSum:0,recMin:Number.MAX_SAFE_INTEGER,recMax:0,recSum:0},500:{frames:0,netMin:Number.MAX_SAFE_INTEGER,netMax:0,netSum:0,recMin:Number.MAX_SAFE_INTEGER,recMax:0,recSum:0}}}),this._stats_timer=setInterval(function(){e.pc.peerConnection.getStats(null,function(e){try{var n=0,r=0;for(var i in e){var o=e[i],a=o.type;"googCandidatePair"===a&&"true"===o.googActiveConnection&&"true"===o.googReadable?n=parseInt(o.googRtt):"ssrc"===a&&o.ssrc===t.ssrcVideo&&(r=parseInt(o.googCurrentDelayMs))}var s=null,c=1,u=Math.floor(n+r);t._appDelay=u,u<=200?c=1:u>200&&u<=300?(c=2,s="200"):u>300&&u<=500?(c=3,s="300"):(c=4,s="500"),t._netstats.frames+=1,s&&(t._netstats.thresholds[s].frames+=1,t._netstats.thresholds[s].netMin=Math.min(t._netstats.thresholds[s].netMin,n),t._netstats.thresholds[s].netMax=Math.max(t._netstats.thresholds[s].netMax,n),t._netstats.thresholds[s].netSum+=n,t._netstats.thresholds[s].recMin=Math.min(t._netstats.thresholds[s].recMin,r),t._netstats.thresholds[s].recMax=Math.max(t._netstats.thresholds[s].recMax,r),t._netstats.thresholds[s].recSum+=r),t.controlChannel.sendQosFeedback(r),t._networkState!==c&&(t._networkState=c,t.emit("NETWORK_CHANGE",{state:c}))}catch(e){clearInterval(t._stats_timer)}},function(){k["default"].Debug("^^^^^^^^^^^^^^^^^^^^^^^^")})},X))}}]),t}(d["default"]);z.START_APP_PREPARING=1,z.START_APP_OPEN=2,z.START_APP_READY=3,z.P_EVENT_BE_KICKED_OUT=1,z.P_EVENT_HOST_LEFT=2,z.P_EVENT_HOST_DISCONNECTED=3,z.P_EVENT_HOST_RECONNECTED=4,z.P_EVENT_FILE_MERGING=5,z.RETURN_CODE_NORMAL={0:1,50100:1,50101:1,50300:1,50401:1,51100:1},t["default"]=z},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),u=r(c),l=n(11),d=r(l),f=n(51),h=r(f),p=n(23),m=r(p),g=n(2),v=r(g),y=n(60),_=r(y),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._u_host="",n._u_port=443,n._u_secure=!1,n._u_state="disconnected",n._sock=null,n._msgTimer=null,n._disconnectTimer=null,n._heartBeatTimer=null,n.params=e,n._u_secure=!!n.params.secure,n._sock=new _["default"],n.init(),n}return a(t,e),s(t,[{key:"init",value:function(){var e=this;this._sock.off("message"),this._sock.off("open"),this._sock.off("close"),this._sock.off("error"),this._sock.on("message",this._handleMessage.bind(this)),this._sock.on("open",function(){"connect"===e._u_state?(e._updateState("normal"),e.emit("channel_open")):e._fail("Got unexpected WebSocket connection")}),this._sock.on("close",function(t){var n="";t.code&&(n=" (code: "+t.code+(t.reason?", reason: "+t.reason:"")+")"),"disconnect"===e._u_state?e._updateState("disconnected","Control channel disconnected "+n):e._u_state in{failed:1,disconnected:1}?v["default"].Error("Received onclose while disconnected "+n):e._fail("Server disconnected "+n),e._sock.off("close"),e.emit("channel_close",t)}),this._sock.on("error",function(t){e._updateState("failed"),e.emit("channel_error",t)})}},{key:"connect",value:function(e,t){return this._u_host=e,this._u_port=t,this._u_host&&this._u_port?void this._updateState("connect"):this._fail("Must set host and port")}},{key:"disconnect",value:function(){this._updateState("disconnect"),this._sock.off("open"),this._sock.off("error"),this._sock.off("message")}},{key:"requestStartSession",value:function(e,t,n,r,i){"normal"===this._u_state&&this._execute("kMsgTypeStartApp",{token:d["default"].getToken(),clientId:d["default"].getClientId(),clientVer:r,clientType:i,sessionId:e,userId:t,nickname:encodeURIComponent(n)}),this._checkHeartBeart()}},{key:"requestJoinSession",value:function(e,t,n,r,i){"normal"===this._u_state&&this._execute("kMsgTypeJoinSession",{token:d["default"].getToken(),clientId:d["default"].getClientId(),clientVer:r,clientType:i,sessionId:e,userId:t,nickname:encodeURIComponent(n)})}},{key:"requestReconnectSession",value:function(e,t,n){"normal"===this._u_state&&this._execute("kMsgTypeReconnectSession",{token:d["default"].getToken(),clientId:d["default"].getClientId(),sessionId:e,userId:t,nickname:encodeURIComponent(n)})}},{key:"requestLeaveSession",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeLeaveSession",{force:!!e})}},{key:"requestChangeClientSize",value:function(e,t){"normal"===this._u_state&&this._execute("kMsgTypeChangeClientSize",{desiredWidth:Math.ceil(e),desiredHeight:Math.ceil(t)})}},{key:"requestForController",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeRequestForController",{clientId:d["default"].getClientId(),userId:e})}},{key:"requestKickoutParticipant",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeKickoutParticipant",{clientId:d["default"].getClientId(),userId:e})}},{key:"requestChangeIME",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeChangeIME",{IME:e})}},{key:"requestIMEList",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeAcquireIMEList",{clientId:d["default"].getClientId(),userId:e})}},{key:"requestChangeNickname",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeChangeNickname",{nickname:e})}},{key:"requestTransformUser",value:function(e,t){"normal"===this._u_state&&this._execute("kMsgTypeTransformUser",{clientId:d["default"].getClientId(),userId:e,extraData:t})}},{key:"requestResumeZomebieSession",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeZomebieSessionResume",{action:e})}},{key:"requestCallRemoteAPI",value:function(e,t){if("normal"===this._u_state){var n="fid"+(new Date).getTime()+Math.floor(1e3*Math.random());return this._execute("kMsgTypeRemoteCallAPI",{FunctionId:n,FunctionName:e,FunctionArgs:t}),n}}},{key:"sendHeartBeart",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeHeartBeatAck",{timestamp:e}),this._checkHeartBeart()}},{key:"sendKeyboardInput",value:function(e,t){"normal"===this._u_state&&(e!==m["default"].XK_Meta_L&&e!==m["default"].XK_Super_L||(e=m["default"].XK_Control_L),this._execute("kMsgTypeClientKeyboardInput",{keyValue:e,isPressed:t}))}},{key:"sendMouseInput",value:function(e,t,n){"normal"===this._u_state&&this._execute("kMsgTypeClientMouseInput",{posX:Math.ceil(e),posY:Math.ceil(t),buttonMask:n})}},{key:"sendClipboardText",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeClipboardData",{clipType:1,clipDataLen:e.length,clipdata:e})}},{key:"sendClipboardImage",value:function(e,t){"normal"===this._u_state&&this._execute("kMsgTypeClipboardData",{clipType:2,clipDataLen:e.length,clipdata:e,imageFormat:t})}},{key:"sendQosFeedback",value:function(e){"normal"===this._u_state&&this._execute("kMsgTypeQoSFeedback",{delay:e})}},{key:"notifyClipboardDataRecieved",value:function(e,t){"normal"===this._u_state&&this._execute("kMsgTypeServerClipboardDataAck",{clipType:e,bSuccess:t})}},{key:"sendClipboardData",value:function(e,t,n,r){if("normal"===this._u_state){var i={clipType:e,clipData:t,bLast:n};"undefined"==typeof r&&null===r||(i.length=r),this._execute("kMsgTypeClientClipboardData",i)}}},{key:"_updateState",value:function(e,n){var r=this,i=this._u_state;e===i&&v["default"].Debug("Already in state "+e+"', ignoring");var o={disconnected:1,loaded:1,connect:1,disconnect:1,failed:1,fatal:1};switch(e in o&&this._cleanupSocket(e),"fatal"===i&&v["default"].Error("Fatal error, cannot continue"),this._u_state="failed"===i&&"disconnected"===e?"failed":e,this._disconnectTimer&&"disconnect"!==this._u_state&&(clearTimeout(this._disconnectTimer),this._disconnectTimer=null,this._sock.off("close")),e){case"normal":"disconnected"!==i&&"failed"!==i||v["default"].Error("Invalid transition from 'disconnected' or 'failed' to 'normal'");break;case"connect":this._connect();break;case"disconnect":this._disconnectTimer=setTimeout(function(){r._fail("Disconnect timeout")},t.DISCONN_TIMEOUT);break;case"failed":"disconnected"===i?v["default"].Debug("Invalid transition from 'disconnected' to 'failed'"):"normal"===i?v["default"].Debug("Error while connected."):"init"===i&&v["default"].Debug("Error while initializing."),setTimeout(function(){r._updateState("disconnected")},50)}"failed"===i&&"disconnected"===e?this.emit("channel_statechange",{state:e,oldstate:i}):this.emit("channel_statechange",{state:e,oldstate:i,msg:n})}},{key:"_fail",value:function(e){return this._updateState("failed",e),!1}},{key:"_connect",value:function(){var e=(this._u_secure?"wss":"ws")+"://",t=e+this._u_host+":"+this._u_port;this._sock.open(t)}},{key:"_cleanupSocket",value:function(e){this._msgTimer&&(clearInterval(this._msgTimer),this._msgTimer=null),this._heartBeatTimer&&(clearTimeout(this._heartBeatTimer),this._heartBeatTimer=null),this._sock.close()}},{key:"_execute",value:function(e,t){var n=h["default"].build(e,JSON.stringify(t));n&&("kMsgTypeHeartBeatAck"!==e&&"kMsgTypeClientMouseInput"!==e&&"kMsgTypeClientKeyboardInput"!==e&&"kMsgTypeQoSFeedback"!==e&&v["default"].Debug("[SEND]",e,t),this._sock.send(n))}},{key:"_handleMessage",value:function(){var e=this;if(0===this._sock.rQlen())return void v["default"].Warn("_handleMessage called on an empty receive queue");switch(this._u_state){case"disconnected":case"failed":v["default"].Error("Got data while disconnected");break;case"normal":this._handleControlMessage()&&this._sock.rQlen()>0&&(this._msgTimer?v["default"].Debug("Has more data to process, using existing timer"):(v["default"].Debug("Has more data to process, creating a new timer"),this._msgTimer=setTimeout(function(){e._msgTimer=null,e._handleMessage()},0)));break;default:this._updateState("normal")}}},{key:"_checkHeartBeart",value:function(){var e=this;clearTimeout(this._heartBeatTimer),this._heartBeatTimer=setTimeout(function(){e.emit("heartbeat_lost")},1e4)}},{key:"_handleControlMessage",value:function(){var e=this._sock,t=e.rQlen();if(t<8)return!1;var n=(e.rQshift8(),e.rQshift8(),e.rQshift16()),r=e.rQshift32(),i=e.rQshiftStr(r),o=JSON.parse(i),a=h["default"].value2name[n];return"kMsgTypeHeartBeat"===a?this.sendHeartBeart(o.timestamp):(v["default"].Debug("[RECIEVE]",a,o),this.emit(a,o)),!0}}]),t}(u["default"]);b.DISCONN_TIMEOUT=5e3,t["default"]=b},function(e,t){"use strict";function n(e,t){var n=r[e];if("undefined"!=typeof n&&null!==n){var i=t.length,o=[];o.push8(1),o.push8(1),o.push16(n),o.push32(i);for(var a=0;a<i;a++)o.push(t.charCodeAt(a));return o}return null}Object.defineProperty(t,"__esModule",{value:!0});var r={kMsgTypeStartApp:101,kMsgTypeStartAppAck:102,kMsgTypeNotifyStartProgress:103,kMsgTypeJoinSession:201,kMsgTypeJoinSessionAck:202,kMsgTypeLeaveSession:301,kMsgTypeLeaveSessionAck:302,kMsgTypeReconnectSession:401,kMsgTypeReconnectSessionAck:402,kMsgTypeKickoutParticipant:501,kMsgTypeNotifyParticipantEvent:502,kMsgTypeNotifyParticipantChange:503,kMsgTypeChangeClientSize:601,kMsgTypeChangeClientSizeAck:602,kMsgTypeNotifyClientSizeChange:603,kMsgTypeClientMouseInput:701,kMsgTypeNotifyMouseInput:702,kMsgTypeClientKeyboardInput:801,kMsgTypeHeartBeat:901,kMsgTypeHeartBeatAck:902,kMsgTypeRequestForController:1001,kMsgTypeRequestForControllerAck:1002,kMsgTypeNotifyControllerChange:1003,kMsgTypeChangeNickname:1101,kMsgTypeNotifyNicknameChange:1102,kMsgTypeCursorShapeUpdate:1201,kMsgTypeClipboardData:1301,kMsgTypeClipboardDataAck:1302,kMsgTypeTransformUser:1401,kMsgTypeTransformUserAck:1402,kMsgTypeNotifyUserTransform:1403,kMsgTypeChangeIME:1501,kMsgTypeChangeIMEAck:1502,kMsgTypeNotifyIMEChange:1503,kMsgTypeAcquireIMEList:1504,kMsgTypeAcquireIMEListAck:1505,kMsgTypeZomebieSessionNotify:1601,kMsgTypeZomebieSessionResume:1602,kMsgTypePrintFileInfo:1901,kMsgTypeUsbRedirCallbackAddr:2001,kMsgTypeQoSFeedback:2101,kMsgTypeServerClipboardData:2201,kMsgTypeServerClipboardDataAck:2202,kMsgTypeClientClipboardData:2203,kMsgTypeClientClipboardDataAck:2204,kMsgTypeClipBoardSupportRTF:2205,kMsgTypeRemoteCallAPI:3101,kMsgTypeRemoteCallAPIAck:3102},i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);t["default"]={name2value:r,value2name:i,build:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(38),u=r(c),l=n(4),d=r(l),f=n(2),h=r(f),p=n(6),m=r(p),g=n(21),v=r(g),y=n(12),_=r(y),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=t.DISCONNECTED,n.p2p=!1,n.roomID="",n.remoteStreams={},n.localStreams={},n.socket={},n.participants={},n.params=e,n.on("room-disconnected",function(){n.cleanup()}),n}return a(t,e),s(t,[{key:"cleanup",value:function(){this.state=t.DISCONNECTED;for(var e in this.remoteStreams)if(this.remoteStreams.hasOwnProperty(e)){var n=this.remoteStreams[e];this._removeStream(n),delete this.remoteStreams[e],this.emit("stream-removed",{stream:n})}this.remoteStreams={};for(var r in this.localStreams)if(this.localStreams.hasOwnProperty(r)){var i=this.localStreams[r];i.pc.close(),delete this.localStreams[r]}try{this.socket.disconnect()}catch(e){h["default"].Debug("Socket already disconnected")}this.socket=void 0,this.participants={}}},{key:"connect",value:function(){var e=this;this.state!==t.DISCONNECTED&&h["default"].Warn("Room already connected"),this.state=t.CONNECTING,this._connectSocket(this.params.token||{},function(n){var r=n.id;n.streams||[];e.state=t.CONNECTED,e.p2p=n.p2p,e.iceServers=n.iceServers,e.params.defaultVideoBW=n.defaultVideoBW,e.params.maxVideoBW=n.maxVideoBW;var i=n.participants||[];for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];e.participants[a.id]=a}var s="subscribe-active",c=new _["default"]({local:!1,streamID:s,audio:!0,video:!0,data:!1,screen:!1});e.remoteStreams[s]=c,h["default"].Info("Connected to room "+r),e.roomID=r,e.emit("room-connected",{participants:e.participants,stream:c})},function(t){h["default"].Error("Not Connected! Error: "+t),e.emit("room-error",{message:t})})}},{key:"publish",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(n.maxVideoBW=n.maxVideoBW||this.params.defaultVideoBW,n.maxVideoBW>this.params.maxVideoBW&&(n.maxVideoBW=this.params.maxVideoBW),void 0===n.minVideoBW&&(n.minVideoBW=0),n.minVideoBW>this.params.defaultVideoBW&&(n.minVideoBW=this.params.defaultVideoBW),e.local&&void 0===this.localStreams[e.getID()])if(e.hasAudio()||e.hasVideo()||e.hasScreen())if(void 0!==e.url||void 0!==e.recording){var i=void 0,o=void 0;e.url?(i="url",o=e.url):(i="recording",o=e.recording),h["default"].Info("Checking publish options for",e.getID()),e.checkOptions(n),this._sendSocketSDP("publish",{state:i,data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes(),createOffer:n.createOffer},o,function(n,i){null!==n?(h["default"].Info("Stream published"),e.getID=function(){return n},e.sendData=function(n){t._sendDataSocket(e,n)},e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t,r&&r(n)):(h["default"].Error("Error when publishing the stream",i),r&&r(void 0,i))})}else this.p2p?(this.params.maxAudioBW=n.maxAudioBW,this.params.maxVideoBW=n.maxVideoBW,this._sendSocketSDP("publish",{state:"p2p",data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),attributes:e.getAttributes()},void 0,function(n,i){null===n&&(h["default"].Error("Error when publishing the stream",i),r&&r(void 0,i)),h["default"].Info("Stream published"),e.getID=function(){return n},e.hasData()&&(e.sendData=function(n){t._sendDataSocket(e,n)}),e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t})):(h["default"].Info("Publishing to E Normally, is createOffer",n.createOffer),this._sendSocketSDP("publish",{state:"erizo",data:e.hasData(),audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),minVideoBW:n.minVideoBW,attributes:e.getAttributes(),createOffer:n.createOffer},void 0,function(i,o){return null===i?(h["default"].Error("Error when publishing the stream: ",o),void(r&&r(void 0,o))):(h["default"].Info("Stream assigned an Id, starting the publish process:",i),e.getID=function(){return i},e.hasData()&&(e.sendData=function(n){t._sendDataSocket(e,n)}),e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[i]=e,e.room=t,e.pc=new v["default"]({iceServers:t.iceServers,maxAudioBW:n.maxAudioBW,maxVideoBW:n.maxVideoBW,limitMaxAudioBW:t.params.maxAudioBW,limitMaxVideoBW:t.params.maxVideoBW,audio:e.hasAudio(),video:e.hasVideo(),callback:function(n){n.connectionType="publisher","candidate"===n.type&&(n={type:"candidate",connectionType:"publisher",candidate:{candidate:n.candidate.candidate,sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid}}),h["default"].Debug("Sending message",n),t._sendSocketSDP("signaling_message",{connectionType:"publisher",streamId:e.getID(),msg:n},void 0,function(){})}}),e.pc.addStream(e.stream),n.createOffer||e.pc.createOffer(),void(r&&r(i)))}));else e.hasData()&&this._sendSocketSDP("publish",{state:"data",data:e.hasData(),audio:!1,video:!1,screen:!1,attributes:e.getAttributes()},void 0,function(n,i){return null===n?(h["default"].Error("Error publishing stream ",i),void(r&&r(void 0,i))):(h["default"].Info("Stream published"),e.getID=function(){return n},e.sendData=function(n){t._sendDataSocket(e,n)},e.setAttributes=function(n){t._updateAttributes(e,n)},t.localStreams[n]=e,e.room=t,void(r&&r(n)))})}},{key:"startRecording",value:function(e,t){h["default"].Debug("Start Recording stream:",e.getID()),this._sendSocketMSG("startRecorder",{to:e.getID()},function(e,n){return null===e?(h["default"].Error("Error on start recording",n),void(t&&t(void 0,n))):(h["default"].Info("Start recording",e),void(t&&t(e)))})}},{key:"stopRecording",value:function(e,t){this._sendSocketMSG("stopRecorder",{id:e},function(n,r){return null===n?(h["default"].Error("Error on stop recording",r),void(t&&t(void 0,r))):(h["default"].Info("Stop recording",e),void(t&&t(!0)))})}},{key:"unpublish",value:function(e,t){if(e.local){this._sendSocketMSG("unpublish",e.getID(),function(e,n){return null===e?(h["default"].Error("Error unpublishing stream",n),void(t&&t(void 0,n))):(h["default"].Info("Stream unpublished"),void(t&&t(!0)))});var n=e.room.p2p;if(e.room=void 0,(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url){if(n)for(var r in e.pc)e.pc[r].close();else e.pc.close();e.pc=void 0}delete this.localStreams[e.getID()],e.getID=function(){},e.sendData=function(e){},e.setAttributes=function(e){}}else h["default"].Error("Cannot unpublish, stream does not exist or is not local"),t&&t(void 0,error)}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(!e.local){if(e.hasVideo()||e.hasAudio()||e.hasScreen())this.p2p?(this._sendSocketSDP("subscribe",{streamId:e.getID()}),r&&r(!0)):(h["default"].Info("Checking subscribe options for",e.getID()),e.checkOptions(n),this._sendSocketSDP("subscribe",{streamId:e.getID(),audio:n.audio,video:n.video,data:n.data,browser:m["default"].getBrowser(),createOffer:n.createOffer,slideShowMode:n.slideShowMode},void 0,function(i,o){return null===i?(h["default"].Error("Error subscribing to stream ",o),void(r&&r(void 0,o))):(h["default"].Info("Subscriber added"),e.pc=new v["default"]({iceServers:t.iceServers,audio:n.audio,video:n.video,nop2p:!0,callback:function(n){n.connectionType="subscriber","candidate"===n.type&&(n={type:"candidate",connectionType:"subscriber",candidate:{candidate:n.candidate.candidate,sdpMLineIndex:n.candidate.sdpMLineIndex,sdpMid:n.candidate.sdpMid}}),h["default"].Debug("Sending message",n),t._sendSocketSDP("signaling_message",{connectionType:"subscriber",streamId:e.getID(),msg:n,browser:e.pc.browser},void 0,function(){})}}),e.pc.onaddstream=function(n){h["default"].Info("Stream subscribed"),e.stream=n.stream,t.emit("stream-subscribed",{stream:e})},e.pc.createOffer(!0),void(r&&r(!0)))}));else{if(!e.hasData()||n.data===!1)return void h["default"].Info("Subscribing to anything");this._sendSocketSDP("subscribe",{streamId:e.getID(),data:n.data},void 0,function(n,i){return null===n?(h["default"].Error("Error subscribing to stream ",i),void(r&&r(void 0,i))):(h["default"].Info("Stream subscribed"),t.emit("stream-subscribed",{stream:e}),void(r&&r(!0)))})}h["default"].Info("Subscribing to: "+e.getID())}}},{key:"unsubscribe",value:function(e,t){var n=this;this.socket&&!e.local&&this._sendSocketMSG("unsubscribe",e.getID(),function(r,i){null===r?t&&t(void 0,i):(n._removeStream(e),t&&t(!0))},function(){h["default"].Error("Error calling unsubscribe.")})}},{key:"disconnect",value:function(){h["default"].Debug("Disconnection requested"),this.emit("room-disconnected",{message:"expected-disconnection"})}},{key:"getStreamsByAttribute",value:function(e,t){var n=[];for(var r in this.remoteStreams)if(this.remoteStreams.hasOwnProperty(r)){var i=this.remoteStreams[r],o=i.getAttributes();o&&o[e]&&o[e]===t&&n.push(i)}return n}},{key:"_sendSocketMSG",value:function(e,t,n,r){this.socket.emit(e,t,function(e,t){"success"===e?n&&n(t):"error"===e?r&&r(t):n&&n(e,t)})}},{key:"_sendSocketSDP",value:function(e,t,n,r){this.socket.emit(e,t,n,function(e,t){r&&r(e,t)})}},{key:"_removeStream",value:function(e){e&&e.stream&&(e.pc&&e.pc.close(),e.local&&e.stream.stop())}},{key:"_sendDataSocket",value:function(e,t){e.local?this._sendSocketMSG("sendDataStream",{id:e.getID(),msg:t}):h["default"].Error("You can not send data through a remote stream")}},{key:"_updateAttributes",value:function(e,t){e.local?(e.updateLocalAttributes(t),this._sendSocketMSG("updateStreamAttributes",{id:e.getID(),attrs:t})):h["default"].Error("You can not update attributes in a remote stream")}},{key:"_connectSocket",value:function(e,n,r){var i=this,o=function(e,t){e.pc=new v["default"]({iceServers:i.iceServers,maxAudioBW:i.params.maxAudioBW,maxVideoBW:i.params.maxVideoBW,limitMaxAudioBW:i.params.maxAudioBW,limitMaxVideoBW:i.params.maxVideoBW,callback:function(n){i._sendSocketSDP("signaling_message",{streamId:e.getID(),peerSocket:t,msg:n})}}),e.pc.onaddstream=function(t){h["default"].Info("Stream subscribed"),e.stream=t.stream,i.emit("stream-subscribed",{stream:e})}};this.socket=(0,u["default"])(e.host,{reconnection:!1,multiplex:!1}),this.socket.on("onAddStream",function(e){var t=new _["default"]({local:!1,streamID:e.id,audio:e.audio,video:e.video,data:e.data,screen:e.screen,attributes:e.attributes});i.remoteStreams[e.id]=t,i.emit("stream-added",{stream:t})}),this.socket.on("signaling_message_erizo",function(e){var t=e.peerId?i.remoteStreams[e.peerId]:i.localStreams[e.streamId];t&&t.pc.processSignalingMessage(e.mess)}),this.socket.on("signaling_message_peer",function(e){var t=i.localStreams[e.streamId];t?t.pc[e.peerSocket].processSignalingMessage(e.msg):(t=i.remoteStreams[e.streamId],t.pc||o(t,e.peerSocket),t.pc.processSignalingMessage(e.msg))}),this.socket.on("publish_me",function(e){var t=i.localStreams[e.streamId];t.pc=t.pc||{},t.pc[e.peerSocket]=new v["default"]({iceServers:i.iceServers,audio:t.hasAudio(),video:t.hasVideo(),callback:function(t){i._sendSocketSDP("signaling_message",{streamId:e.streamId,peerSocket:e.peerSocket,msg:t})}}),t.pc[e.peerSocket].oniceconnectionstatechange=function(n){"disconnected"===n&&(t.pc[e.peerSocket].close(),delete t.pc[e.peerSocket])},t.pc[e.peerSocket].addStream(t.stream),t.pc[e.peerSocket].createOffer()}),this.socket.on("onBandwidthAlert",function(e){if(h["default"].Info("Bandwidth Alert on",e.streamID,"message",e.message,"BW:",e.bandwidth),e.streamID){var t=i.remoteStreams[e.streamID];t&&t.emit("bandwidth-alert",{stream:t,msg:e.message,bandwidth:e.bandwidth})}}),this.socket.on("onDataStream",function(e){var t=i.remoteStreams[e.id];t.emit("stream-data",{msg:e.msg,stream:t})}),this.socket.on("onUpdateAttributeStream",function(e){var t=i.remoteStreams[e.id];t.updateLocalAttributes(e.attrs),t.emit("stream-attributes-update",{attrs:e.attrs,stream:t})}),this.socket.on("onRemoveStream",function(e){var t=i.remoteStreams[e.id];i._removeStream(t),delete i.remoteStreams[e.id],i.emit("stream-removed",{stream:t})}),this.socket.on("disconnect",function(){h["default"].Info("Socket disconnected, lost connection to Controller"),i.state!==t.DISCONNECTED&&(h["default"].Error("Unexpected disconnection from Controller"),i.emit("room-disconnected",{message:"unexpected-disconnection"}))}),this.socket.on("connection_failed",function(e){"publish"===e.type?(h["default"].Error("ICE Connection Failed on publishing, disconnecting"),i.state!==t.DISCONNECTED&&i.emit("stream-failed",{message:"Publishing local stream failed ICE Checks, disconnecting client"})):(h["default"].Error("ICE Connection Failed on subscribe, alerting"),i.state!==t.DISCONNECTED&&i.emit("stream-failed",{message:"Subscriber failed the ICE Checks, cannot reach Licode for media"}))}),this.socket.on("error",function(e){r("Cannot connect to Controller (socket.io error)",e)}),this.socket.on("onPaticipantJoin",function(e){h["default"].Info("onPaticipantJoin:",e);var t=e.id;i.participants[t]=e,i.emit("participant-join",{participants:i.participants,participant:e})}),this.socket.on("onPaticipantLeave",function(e){h["default"].Info("onPaticipantLeave:",e);var t=e.id;delete i.participants[t],i.emit("participant-leave",{participants:i.participants,participant:e})}),this._sendSocketMSG("xtToken",e,n,r)}}]),t}(d["default"]);b.DISCONNECTED=0,b.CONNECTING=1,b.CONNECTED=2,t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(15),u=(r(c),n(6)),l=(r(u),n(4)),d=r(l),f=n(8),h=(r(f),n(2)),p=r(h),m=n(12),g=r(m),v=n(14),y=r(v),_=n(11),b=r(_),w=n(52),k=r(w),C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.isParticipantMode=!1,n.room=null,n._reconnecting=!1,n._reconnectCount=0,n._roomConnectCount=0,n.params=e,n.localStream=new g["default"](n.params.localStreamConfig),n._initReconnectionHandler(),n}return a(t,e),s(t,[{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.userNickname=t.userNickname||"",this.sessionId=t.sessionId,this.sessionName=t.sessionName,y["default"].getMCUAddress(this.sessionId).then(function(t){e.mcuURL=t.mcuURL,e.getRoom().connect()})}},{key:"disconnect",value:function(){this.room&&this.room.disconnect(),this._stopReconnect()}},{key:"getRoom",value:function(){var e=this;if(!this.room){var t=this.room=new k["default"]({token:{token:b["default"].getToken(),host:this.mcuURL,room:this.sessionId,username:this.userNickname}});t.on("room-error",function(t){var n=t.message||"",r=(n.match(/\[(.*?)\]/)||[])[1];p["default"].Debug(">>>>>> room-error:",r),e._reconnecting||e.emit("SESSION_DISCONNECTED",{type:"unexpected"})}),t.on("room-connected",function(n){e._roomConnectCount+=1,t.publish(e.localStream,{maxVideoBW:3e3,minVideoBW:500},function(r,i){r?(t.subscribe(n.stream),e.emit("SESSION_CONNECTED",{firstTime:0===e._roomConnectCount,participants:n.participants})):p["default"].Error("----------",i)})}),t.on("room-disconnected",function(t){"expected-disconnection"===t.message?e.emit("SESSION_DISCONNECTED",{type:"expected"}):e.emit("__request_reconnect__")}),t.on("participant-join",function(t){e.emit("PARTICIPANT_JOIN",t)}),t.on("participant-leave",function(t){e.emit("PARTICIPANT_LEAVE",t)}),t.on("stream-subscribed",function(t){var n=t.stream;n&&e.emit("REMOTE_STREAM_SUBSCRIBED",{stream:n})}),t.on("stream-failed",function(t){e.room.disconnect()})}return this.room}},{key:"_initReconnectionHandler",value:function(){var e=this;this.on("__request_reconnect__",function(){e._reconnecting||(0===e._reconnectCount&&e.emit("SESSION_RECONNECTING"),e._reconnect())})}},{key:"_reconnect",value:function(){var e=this;if(this.room){this._reconnecting=!0,this._reconnectCount+=1;try{this.room.cleanup()}catch(e){}this.room.connect(),clearTimeout(this._reconnct_timer),this._reconnct_timer=setTimeout(function(){var t=e.room.state;p["default"].Debug("[times",e._reconnectCount,"]"),t===k["default"].CONNECTED?e._stopReconnect():e._reconnectCount<5?e._reconnect():(e._stopReconnect(),e.emit("SESSION_DISCONNECTED",{type:"unexpected"}))},8e3)}}},{key:"_stopReconnect",value:function(){clearTimeout(this._reconnct_timer),this._reconnectCount=0,this._reconnecting=!1}}]),t}(d["default"]);t["default"]=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),u=r(c),l=n(22),d=r(l),f=n(6),h=r(f),p=h["default"].getBrowserInfo(),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));
}return a(t,e),s(t,[{key:"processPasteEvent",value:function(e){var t=this,n=null,r=new d["default"];if(e&&e.clipboardData&&e.clipboardData.getData){var i=e.clipboardData;if(/text\/rtf/.test(i.types)&&"Safari"!==p.name&&r.setData(d["default"].RTF,i.getData("text/rtf")),/text\/html/.test(i.types)&&r.setData(d["default"].HTML,i.getData("text/html")),/text\/plain/.test(i.types)&&r.setData(d["default"].TEXT,i.getData("text/plain")),/Files/.test(i.types)){var o=i.items;if(o){for(var a=0,s=o.length;a<s;a++)if("image/png"==o[a].type){n=o[a].getAsFile();break}}else if(i.files)for(var c=i.files,u=0,l=c.length;u<l;u++)if(c[u].type.indexOf("image/png")!=-1){n=c[u];break}if(n){var f=new FileReader;f.onload=function(e){r.setData(d["default"].PNG,e.target.result.split(",")[1]),t.emit("clipdata",r)},f.readAsDataURL(n)}else this.emit("clipdata",r);return e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1}return this.emit("clipdata",r),!0}if(window.clipboardData){var h=this.getClipContent();r.setData(h.type,h.data),this.emit("clipdata",r)}else this.emit("clipdata",r)}},{key:"getClipContent",value:function(e){var t={};if(!document.queryCommandSupported("paste"))return null;var n=this.createTempNode();n.focus();try{if(document.queryCommandEnabled("paste")){var r=document.execCommand("paste");if(r){var i=n.innerHTML,o=n.children;if(o&&1===o.length&&(i.indexOf("img")>-1||i.indexOf("IMG")>-1)){var a=i.match(/src=[\'\"]?([^\'\"]*)[\'\"]?/i)[1];if(a.indexOf("base64")>-1)return t.type=d["default"].PNG,t.data=a.split(",")[1],t}return t.type=d["default"].HTML,t.data="<body>"+n.innerHTML+"</body>",t}}}finally{n.parentNode.removeChild(n)}return null}},{key:"createTempNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=document.createElement(e),n=document.body;return t.id="_tmpEditable","div"===e&&(t.contentEditable=!0),t.style.position="absolute",t.style.zIndex=9999,t.style.left=n.scrollLeft+50+"px",t.style.top=n.scrollTop+50+"px",t.tabIndex=2,t.style.outline="none",t.style.opacity=0,n.appendChild(t),t}}]),t}(u["default"]);t["default"]=m},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(10),a=a||{};window.AdapterJS=a,e.exports=a,a.options=a.options||{},a.VERSION="@@version",a.onwebrtcready=a.onwebrtcready||function(e){},a._onwebrtcreadies=[],a.webRTCReady=function(e){if("function"!=typeof e)throw new Error("Callback provided is not a function");!0===a.onwebrtcreadyDone?e(null!==a.WebRTCPlugin.plugin):a._onwebrtcreadies.push(e)},a.WebRTCPlugin=a.WebRTCPlugin||{},a.WebRTCPlugin.pluginInfo=a.WebRTCPlugin.pluginInfo||{prefix:"Tem",plugName:"TemWebRTCPlugin",pluginId:"plugin0",type:"application/x-temwebrtcplugin",onload:"__TemWebRTCReady0",portalLink:null,downloadLink:null,companyName:"Temasys",downloadLinks:{mac:"http://img.uzer.me/statics/plugins/TemWebRTCPlugin.pkg",win:"http://img.uzer.me/statics/plugins/TemWebRTCPlugin.msi"}},"undefined"!=typeof a.WebRTCPlugin.pluginInfo.downloadLinks&&null!==a.WebRTCPlugin.pluginInfo.downloadLinks&&(navigator.platform.match(/^Mac/i)?a.WebRTCPlugin.pluginInfo.downloadLink=a.WebRTCPlugin.pluginInfo.downloadLinks.mac:navigator.platform.match(/^Win/i)&&(a.WebRTCPlugin.pluginInfo.downloadLink=a.WebRTCPlugin.pluginInfo.downloadLinks.win)),a.WebRTCPlugin.TAGS={NONE:"none",AUDIO:"audio",VIDEO:"video"},a.WebRTCPlugin.pageId=Math.random().toString(36).slice(2),a.WebRTCPlugin.plugin=null,a.WebRTCPlugin.setLogLevel=null,a.WebRTCPlugin.defineWebRTCInterface=null,a.WebRTCPlugin.isPluginInstalled=null,a.WebRTCPlugin.pluginInjectionInterval=null,a.WebRTCPlugin.injectPlugin=null,a.WebRTCPlugin.PLUGIN_STATES={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.NONE,a.onwebrtcreadyDone=!1,a.WebRTCPlugin.PLUGIN_LOG_LEVELS={NONE:"NONE",ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",VERBOSE:"VERBOSE",SENSITIVE:"SENSITIVE"},a.WebRTCPlugin.WaitForPluginReady=null,a.WebRTCPlugin.callWhenPluginReady=null,window.__TemWebRTCReady0=function(){if("complete"===document.readyState)a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.READY,a.maybeThroughWebRTCReady();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.READY,a.maybeThroughWebRTCReady())},100)},a.maybeThroughWebRTCReady=function(){a.onwebrtcreadyDone||(a.onwebrtcreadyDone=!0,a._onwebrtcreadies.length?a._onwebrtcreadies.forEach(function(e){"function"==typeof e&&e(null!==a.WebRTCPlugin.plugin)}):"function"==typeof a.onwebrtcready&&a.onwebrtcready(null!==a.WebRTCPlugin.plugin))},a.TEXT={PLUGIN:{REQUIRE_INSTALLATION:"你当前的浏览器需要安装WebRTC插件才能支持正常访问本网站的服务。",NOT_SUPPORTED:"你当前的浏览器不支持WebRTC。",BUTTON:"立即安装"},REFRESH:{REQUIRE_REFRESH:"请刷新页面",BUTTON:"刷新页面"}},a._iceConnectionStates={starting:"starting",checking:"checking",connected:"connected",completed:"connected",done:"completed",disconnected:"disconnected",failed:"failed",closed:"closed"},a._iceConnectionFiredStates=[],a.isDefined=null,a.parseWebrtcDetectedBrowser=function(){var e=null;if(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)e=navigator.userAgent.match(/OPR\/(\d+)/i)||[],_="opera",b=parseInt(e[1]||"0",10),w=26,s="webkit",c="SCTP";else if(navigator.userAgent.match(/Bowser\/[0-9.]*/g)){e=navigator.userAgent.match(/Bowser\/[0-9.]*/g)||[];var t=parseInt((navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[])[2]||"0",10);_="bowser",b=parseFloat((e[0]||"0/0").split("/")[1],10),w=0,s="webkit",c=t>30?"SCTP":"RTP"}else if(navigator.userAgent.indexOf("OPiOS")>0)e=navigator.userAgent.match(/OPiOS\/([0-9]+)\./),_="opera",b=parseInt(e[1]||"0",10),w=0,s=null,c=null;else if(navigator.userAgent.indexOf("CriOS")>0)e=navigator.userAgent.match(/CriOS\/([0-9]+)\./)||[],_="chrome",b=parseInt(e[1]||"0",10),w=0,s=null,c=null;else if(navigator.userAgent.indexOf("FxiOS")>0)e=navigator.userAgent.match(/FxiOS\/([0-9]+)\./)||[],_="firefox",b=parseInt(e[1]||"0",10),w=0,s=null,c=null;else if(document.documentMode)e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],_="IE",b=parseInt(e[1],10),w=9,s="plugin",c="SCTP",b||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],b=parseInt(e[1]||"0",10));else if(window.StyleMedia||navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e=navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)||[],_="edge",b=parseFloat((e[0]||"0/0").split("/")[1],10),w=13.10547,s="ms",c=null;else if("undefined"!=typeof InstallTrigger||navigator.userAgent.indexOf("irefox")>0)e=navigator.userAgent.match(/Firefox\/([0-9]+)\./)||[],_="firefox",b=parseInt(e[1]||"0",10),w=31,s="moz",c="SCTP";else if(window.chrome&&window.chrome.webstore||navigator.userAgent.indexOf("Chrom")>0)e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[],_="chrome",b=parseInt(e[2]||"0",10),w=38,s="webkit",c=b>30?"SCTP":"RTP";else if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){e=navigator.userAgent.match(/version\/(\d+)/i)||[];var n=navigator.userAgent.match(/(iPhone|iPad)/gi)||[];_="safari",b=parseInt(e[1]||"0",10),w=7,s=0===n.length?"plugin":null,c=0===n.length?"SCTP":null}window.webrtcDetectedBrowser=_,window.webrtcDetectedVersion=b,window.webrtcMinimumVersion=w,window.webrtcDetectedType=s,window.webrtcDetectedDCSupport=c},a.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},a.renderNotificationBar=function(e,t,n,r,i){if("complete"===document.readyState){var o=window,s=document.createElement("iframe");s.name="adapterjs-alert",s.style.position="fixed",s.style.top="-41px",s.style.left=0,s.style.right=0,s.style.width="100%",s.style.height="40px",s.style.backgroundColor="#ffffe1",s.style.border="none",s.style.borderBottom="1px solid #888888",s.style.zIndex="9999999","string"==typeof s.style.webkitTransition?s.style.webkitTransition="all .5s ease-out":"string"==typeof s.style.transition&&(s.style.transition="all .5s ease-out"),document.body.appendChild(s);var c=s.contentWindow?s.contentWindow:s.contentDocument.document?s.contentDocument.document:s.contentDocument;c.document.open(),c.document.write('<span style="display: inline-block; font-family: Helvetica, Arial,sans-serif; font-size: .9rem; padding: 4px; vertical-align: middle; cursor: default;">'+e+"</span>"),t&&n?(c.document.write('<button id="okay">'+t+'</button><button id="cancel">取消</button>'),c.document.close(),a.addEvent(c.document.getElementById("okay"),"click",function(e){i&&a.renderNotificationBar(a.TEXT.EXTENSION?a.TEXT.EXTENSION.REQUIRE_REFRESH:a.TEXT.REFRESH.REQUIRE_REFRESH,a.TEXT.REFRESH.BUTTON,"javascript:location.reload()"),window.open(n,r?"_blank":"_top"),e.preventDefault();try{e.cancelBubble=!0}catch(e){}var t=setInterval(function(){k||navigator.plugins.refresh(!1),a.WebRTCPlugin.isPluginInstalled(a.WebRTCPlugin.pluginInfo.prefix,a.WebRTCPlugin.pluginInfo.plugName,a.WebRTCPlugin.pluginInfo.type,function(){clearInterval(t),a.WebRTCPlugin.defineWebRTCInterface()},function(){})},500)}),a.addEvent(c.document.getElementById("cancel"),"click",function(e){o.document.body.removeChild(s)})):c.document.close(),setTimeout(function(){"string"==typeof s.style.webkitTransform?s.style.webkitTransform="translateY(40px)":"string"==typeof s.style.transform?s.style.transform="translateY(40px)":s.style.top="0px"},300)}};var s=null,c=null,u=null,l=null,d=null,f="function"==typeof f?f:null,h="function"==typeof h?h:null,p=null,m=null,g=null,v=null,y=null,_=null,b=null,w=null;if(!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))||0===(navigator.userAgent.match(/android/gi)||[]).length&&0===(navigator.userAgent.match(/chrome/gi)||[]).length&&navigator.userAgent.indexOf("Safari/")>0){"object"===("undefined"==typeof console?"undefined":r(console))&&"function"==typeof console.log||(console={}||console,console.log=function(e){},console.info=function(e){},console.error=function(e){},console.dir=function(e){},console.exception=function(e){},console.trace=function(e){},console.warn=function(e){},console.count=function(e){},console.debug=function(e){},console.count=function(e){},console.time=function(e){},console.timeEnd=function(e){},console.group=function(e){},console.groupCollapsed=function(e){},console.groupEnd=function(e){}),a.parseWebrtcDetectedBrowser();var k="IE"===_;a.WebRTCPlugin.WaitForPluginReady=function(){for(;a.WebRTCPlugin.pluginState!==a.WebRTCPlugin.PLUGIN_STATES.READY;);},a.WebRTCPlugin.callWhenPluginReady=function(e){if(a.WebRTCPlugin.pluginState===a.WebRTCPlugin.PLUGIN_STATES.READY)e();else var t=setInterval(function(){a.WebRTCPlugin.pluginState===a.WebRTCPlugin.PLUGIN_STATES.READY&&(clearInterval(t),e())},100)},a.WebRTCPlugin.setLogLevel=function(e){a.WebRTCPlugin.callWhenPluginReady(function(){a.WebRTCPlugin.plugin.setLogLevel(e)})},a.WebRTCPlugin.injectPlugin=function(){if("complete"===document.readyState&&a.WebRTCPlugin.pluginState===a.WebRTCPlugin.PLUGIN_STATES.INITIALIZING){if(a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.INJECTING,"IE"===_&&b<=10){var e=document.createDocumentFragment();for(a.WebRTCPlugin.plugin=document.createElement("div"),a.WebRTCPlugin.plugin.innerHTML='<object id="'+a.WebRTCPlugin.pluginInfo.pluginId+'" type="'+a.WebRTCPlugin.pluginInfo.type+'" width="1" height="1"><param name="pluginId" value="'+a.WebRTCPlugin.pluginInfo.pluginId+'" /> <param name="windowless" value="false" /> <param name="pageId" value="'+a.WebRTCPlugin.pageId+'" /> <param name="onload" value="'+a.WebRTCPlugin.pluginInfo.onload+'" /><param name="tag" value="'+a.WebRTCPlugin.TAGS.NONE+'" />'+(a.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+"</object>";a.WebRTCPlugin.plugin.firstChild;)e.appendChild(a.WebRTCPlugin.plugin.firstChild);document.body.appendChild(e),a.WebRTCPlugin.plugin=document.getElementById(a.WebRTCPlugin.pluginInfo.pluginId)}else a.WebRTCPlugin.plugin=document.createElement("object"),a.WebRTCPlugin.plugin.id=a.WebRTCPlugin.pluginInfo.pluginId,k?(a.WebRTCPlugin.plugin.width="1px",a.WebRTCPlugin.plugin.height="1px"):(a.WebRTCPlugin.plugin.width="0px",a.WebRTCPlugin.plugin.height="0px"),a.WebRTCPlugin.plugin.type=a.WebRTCPlugin.pluginInfo.type,a.WebRTCPlugin.plugin.innerHTML='<param name="onload" value="'+a.WebRTCPlugin.pluginInfo.onload+'"><param name="pluginId" value="'+a.WebRTCPlugin.pluginInfo.pluginId+'"><param name="windowless" value="false" /> '+(a.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+'<param name="pageId" value="'+a.WebRTCPlugin.pageId+'"><param name="tag" value="'+a.WebRTCPlugin.TAGS.NONE+'" />',document.body.appendChild(a.WebRTCPlugin.plugin);a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.INJECTED}},a.WebRTCPlugin.isPluginInstalled=function(e,t,n,r,i){if(k){try{new ActiveXObject(e+"."+t)}catch(e){return void i()}r()}else{for(var o=navigator.mimeTypes,a=0;a<o.length;a++)if(o[a].type.indexOf(n)>=0)return void r();i()}},a.WebRTCPlugin.defineWebRTCInterface=function(){if(a.WebRTCPlugin.pluginState===a.WebRTCPlugin.PLUGIN_STATES.READY)return void console.error("AdapterJS - WebRTC interface has already been defined");a.WebRTCPlugin.pluginState=a.WebRTCPlugin.PLUGIN_STATES.INITIALIZING,a.isDefined=function(e){return null!==e&&void 0!==e},u=function(e,t,n){var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e,hasCredentials:!1}:0===i[0].indexOf("turn")&&(r={url:e,hasCredentials:!0,credential:n,username:t}),r},l=function(e,t,n){for(var r=[],i=0;i<e.length;++i)r.push(u(e[i],t,n));return r},f=function(e){return a.WebRTCPlugin.WaitForPluginReady(),a.WebRTCPlugin.plugin.ConstructSessionDescription(e.type,e.sdp)},d=function(e,t){if(void 0!==e&&null!==e&&!Array.isArray(e.iceServers))throw new Error("Failed to construct 'RTCPeerConnection': Malformed RTCConfiguration");if("undefined"!=typeof t&&null!==t){var n=!1;if(n|="object"!==("undefined"==typeof t?"undefined":r(t)),n|=t.hasOwnProperty("mandatory")&&void 0!==t.mandatory&&null!==t.mandatory&&t.mandatory.constructor!==Object,n|=t.hasOwnProperty("optional")&&void 0!==t.optional&&null!==t.optional&&!Array.isArray(t.optional))throw new Error("Failed to construct 'RTCPeerConnection': Malformed constraints object")}a.WebRTCPlugin.WaitForPluginReady();var i=null;if(e&&Array.isArray(e.iceServers)){i=e.iceServers;for(var o=0;o<i.length;o++)i[o].urls&&!i[o].url&&(i[o].url=i[o].urls),i[o].hasCredentials=a.isDefined(i[o].username)&&a.isDefined(i[o].credential)}if(a.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION&&a.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION>1)return i&&(e.iceServers=i),a.WebRTCPlugin.plugin.PeerConnection(e);var s=t&&t.mandatory?t.mandatory:null,c=t&&t.optional?t.optional:null;return a.WebRTCPlugin.plugin.PeerConnection(a.WebRTCPlugin.pageId,i,s,c)};var e=window.MediaStreamTrack=function(){};e.getSources=function(e){a.WebRTCPlugin.callWhenPluginReady(function(){a.WebRTCPlugin.plugin.GetSources(e)})};var t=function(e){if("object"!==("undefined"==typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"==typeof i.ideal?(a[o("min",n)]=i.ideal,t.optional.push(a),a={},a[o("max",n)]=i.ideal,t.optional.push(a)):(a[o("",n)]=i.ideal,t.optional.push(a))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(p=function(e,n,r){var i={};i.audio=!!e.audio&&t(e.audio),i.video=!!e.video&&t(e.video),a.WebRTCPlugin.callWhenPluginReady(function(){a.WebRTCPlugin.plugin.getUserMedia(i,n,r)})},window.navigator.getUserMedia=p,!navigator.mediaDevices&&"undefined"!=typeof o){var n=function(e){return new o(function(t,n){p(e,t,n)})};navigator.mediaDevices={getUserMedia:n,enumerateDevices:function(){return new o(function(t){var n={audio:"audioinput",video:"videoinput"};return e.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],id:e.id,deviceId:e.id,groupId:""}}))})})}}}m=function(e,t){if(e&&e.parentNode){var n;null===t?n="":("undefined"!=typeof t.enableSoundTracks&&t.enableSoundTracks(!0),n=t.id);var r=0===e.id.length?Math.random().toString(36).slice(2):e.id,i=e.nodeName.toLowerCase();if("object"!==i){var o;switch(i){case"audio":o=a.WebRTCPlugin.TAGS.AUDIO;break;case"video":o=a.WebRTCPlugin.TAGS.VIDEO;break;default:o=a.WebRTCPlugin.TAGS.NONE}var s=document.createDocumentFragment(),c=document.createElement("div"),u="";for(e.className?u='class="'+e.className+'" ':e.attributes&&e.attributes["class"]&&(u='class="'+e.attributes["class"].value+'" '),c.innerHTML='<object id="'+r+'" '+u+'type="'+a.WebRTCPlugin.pluginInfo.type+'"><param name="pluginId" value="'+r+'" /> <param name="pageId" value="'+a.WebRTCPlugin.pageId+'" /> <param name="windowless" value="true" /> <param name="streamId" value="'+n+'" /> <param name="tag" value="'+o+'" /> </object>';c.firstChild;)s.appendChild(c.firstChild);var l="",d="";e.clientWidth||e.clientHeight?(d=e.clientWidth,l=e.clientHeight):(e.width||e.height)&&(d=e.width,l=e.height),e.parentNode.insertBefore(s,e),s=document.getElementById(r),s.width=d,s.height=l,e.parentNode.removeChild(e)}else{for(var f=e.children,h=0;h!==f.length;++h)if("streamId"===f[h].name){f[h].value=n;break}e.setStreamId(n)}var p=document.getElementById(r);return a.forwardEventHandlers(p,e,Object.getPrototypeOf(e)),p}},v=function(e,t){for(var n=null,r=t.children,i=0;i!==r.length;++i)if("streamId"===r[i].name){a.WebRTCPlugin.WaitForPluginReady(),n=a.WebRTCPlugin.plugin.getStreamWithId(a.WebRTCPlugin.pageId,r[i].value);break}return null!==n?m(e,n):void console.log("Could not find the stream associated with this element")},window.RTCPeerConnection=d,window.RTCSessionDescription=f,window.RTCIceCandidate=h,window.attachMediaStream=m,window.reattachMediaStream=v,window.getUserMedia=p,a.attachMediaStream=m,a.reattachMediaStream=v,a.getUserMedia=p,a.forwardEventHandlers=function(e,t,n){var r=Object.getOwnPropertyNames(n);for(var i in r)if(i){var o=r[i];"function"==typeof o.slice&&"on"===o.slice(0,2)&&"function"==typeof t[o]&&a.addEvent(e,o.slice(2),t[o])}var s=Object.getPrototypeOf(n);s&&a.forwardEventHandlers(e,t,s)},h=function(e){return e.sdpMid||(e.sdpMid=""),a.WebRTCPlugin.WaitForPluginReady(),a.WebRTCPlugin.plugin.ConstructIceCandidate(e.sdpMid,e.sdpMLineIndex,e.candidate)},a.addEvent(document,"readystatechange",a.WebRTCPlugin.injectPlugin),a.WebRTCPlugin.injectPlugin()},a.WebRTCPlugin.pluginNeededButNotInstalledCb=a.WebRTCPlugin.pluginNeededButNotInstalledCb||function(){a.addEvent(document,"readystatechange",a.WebRTCPlugin.pluginNeededButNotInstalledCbPriv),a.WebRTCPlugin.pluginNeededButNotInstalledCbPriv()},a.WebRTCPlugin.pluginNeededButNotInstalledCbPriv=function(){if(!a.options.hidePluginInstallPrompt){var e=a.WebRTCPlugin.pluginInfo.downloadLink;if(e){var t;t=a.WebRTCPlugin.pluginInfo.portalLink?'你当前的浏览器需要安装 <a href="'+a.WebRTCPlugin.pluginInfo.portalLink+'" target="_blank">'+a.WebRTCPlugin.pluginInfo.companyName+" WebRTC插件</a> 才能支持正常访问本网站的服务。":a.TEXT.PLUGIN.REQUIRE_INSTALLATION,a.renderNotificationBar(t,a.TEXT.PLUGIN.BUTTON,e)}else a.renderNotificationBar(a.TEXT.PLUGIN.NOT_SUPPORTED)}},a.WebRTCPlugin.isPluginInstalled(a.WebRTCPlugin.pluginInfo.prefix,a.WebRTCPlugin.pluginInfo.plugName,a.WebRTCPlugin.pluginInfo.type,a.WebRTCPlugin.defineWebRTCInterface,a.WebRTCPlugin.pluginNeededButNotInstalledCb)}else n(103),a.parseWebrtcDetectedBrowser(),navigator.mozGetUserMedia?(MediaStreamTrack.getSources=function(e){setTimeout(function(){var t=[{kind:"audio",id:"default",label:"",facing:""},{kind:"video",id:"default",label:"",facing:""}];e(t)},0)},m=function(e,t){return e.srcObject=t,e},v=function(e,t){return e.srcObject=t.srcObject,e},u=function(e,t,n){console.warn("createIceServer is deprecated. It should be replaced with an application level implementation.");var r=null,i=e.split(":");if(0===i[0].indexOf("stun"))r={urls:[e]};else if(0===i[0].indexOf("turn"))if(b<27){var o=e.split("?");1!==o.length&&0!==o[1].indexOf("transport=udp")||(r={urls:[o[0]],credential:n,username:t})}else r={urls:[e],credential:n,username:t};return r},l=function(e,t,n){console.warn("createIceServers is deprecated. It should be replaced with an application level implementation.");var r=[];for(i=0;i<e.length;i++){var o=u(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.webkitGetUserMedia?(m=function(e,t){return b>=43?e.srcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):console.error("Error attaching stream to element."),e},v=function(e,t){return b>=43?e.srcObject=t.srcObject:e.src=t.src,e},u=function(e,t,n){console.warn("createIceServer is deprecated. It should be replaced with an application level implementation.");var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e}:0===i[0].indexOf("turn")&&(r={url:e,credential:n,username:t}),r},l=function(e,t,n){console.warn("createIceServers is deprecated. It should be replaced with an application level implementation.");var r=[];if(b>=34)r={urls:e,credential:n,username:t};else for(i=0;i<e.length;i++){var o=u(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&(m=function(e,t){return e.srcObject=t,e},v=function(e,t){return e.srcObject=t.srcObject,e}),g=m,"opera"===_&&(g=function(e,t){b>38?e.srcObject=t:"undefined"!=typeof e.src&&(e.src=URL.createObjectURL(t))}),m=function(e,t){return"chrome"!==_&&"opera"!==_||t?g(e,t):e.src="",e},y=v,v=function(e,t){return y(e,t),e},window.attachMediaStream=m,window.reattachMediaStream=v,window.getUserMedia=function(e,t,n){navigator.getUserMedia(e,t,n)},a.attachMediaStream=m,a.reattachMediaStream=v,a.getUserMedia=p,"undefined"==typeof o&&(requestUserMedia=null),a.maybeThroughWebRTCReady()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode:function(e){for(var t="",n=this.toBase64Table,r=e.length,i=r%3,o=0;o<r-2;o+=3)t+=n[e[o]>>2],t+=n[((3&e[o])<<4)+(e[o+1]>>4)],t+=n[((15&e[o+1])<<2)+(e[o+2]>>6)],t+=n[63&e[o+2]];var a=0;return 2===i?(a=r-i,t+=n[e[a]>>2],t+=n[((3&e[a])<<4)+(e[a+1]>>4)],t+=n[(15&e[a+1])<<2],t+=n[64]):1===i&&(a=r-i,t+=n[e[a]>>2],t+=n[(3&e[a])<<4],t+=n[64],t+=n[64]),t},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(e,t){t="undefined"!=typeof t?t:0;var n,r,i=this.toBinaryTable,o=this.base64Pad,a=0,s=0,c=e.indexOf("=")-t;c<0&&(c=e.length-t),r=3*(c>>2)+Math.floor(c%4/1.5),n=new Array(r);for(var u=0,l=t;l<e.length;l++){var d=i[127&e.charCodeAt(l)],f=e.charAt(l)===o;d!==-1?(s=s<<6|d,a+=6,a>=8&&(a-=8,f||(n[u++]=s>>a&255),s&=(1<<a)-1)):console.error("Illegal character code "+e.charCodeAt(l)+" at position "+l)}if(a)throw err=new Error("Corrupted base64 string"),err.name="Base64-Error",err;return n}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(58),s=r(a),c=function(e){this._keyDownList=[],o["default"].set_defaults(this,e,{target:document,focused:!0,skipKeys:[]}),this._handler=new s["default"].KeyEventDecoder(s["default"].kbdUtil.ModifierSync(),s["default"].VerifyCharModifier(s["default"].TrackKeyState(s["default"].EscapeModifiers(this._handleRfbEvent.bind(this))))),this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),keypress:this._handleKeyPress.bind(this),blur:this._allKeysUp.bind(this)}};c.prototype={_handleRfbEvent:function(e){this._onKeyPress&&(o["default"].Debug("onKeyPress "+("keydown"==e.type?"down":"up")+", keysym: "+e.keysym.keysym+"("+e.keysym.keyname+")"),this._onKeyPress(e.keysym.keysym,"keydown"==e.type))},_handleKeyDown:function(e){var t=this._skipKeys;if(t&&t.length)for(var n=t.length,r=e.keyCode,i=0;i<n;i++){for(var a=t[i]||[],s=a.length,c=!0,u=0;u<s;u++){var l=a[u];if("ctrl"===l||"alt"===l||"shift"===l||"meta"===l){if(!e[l+"Key"]){c=!1;break}}else if(l!==r){c=!1;break}}if(c)return o["default"].stopEvent(e),!1}return!this._focused||(!this._handler.keydown(e)||(o["default"].stopEvent(e),!1))},_handleKeyPress:function(e){return!this._focused||(!this._handler.keypress(e)||(o["default"].stopEvent(e),!1))},_handleKeyUp:function(e){return!this._focused||(!this._handler.keyup(e)||(o["default"].stopEvent(e),!1))},_allKeysUp:function(){o["default"].Debug(">> Keyboard.allKeysUp"),this._handler.releaseAll(),o["default"].Debug("<< Keyboard.allKeysUp")},grab:function(){var e=this._target;o["default"].addEvent(e,"keydown",this._eventHandlers.keydown),o["default"].addEvent(e,"keyup",this._eventHandlers.keyup),o["default"].addEvent(e,"keypress",this._eventHandlers.keypress),o["default"].addEvent(window,"blur",this._eventHandlers.blur)},ungrab:function(){var e=this._target;o["default"].removeEvent(e,"keydown",this._eventHandlers.keydown),o["default"].removeEvent(e,"keyup",this._eventHandlers.keyup),o["default"].removeEvent(e,"keypress",this._eventHandlers.keypress),o["default"].removeEvent(window,"blur",this._eventHandlers.blur),this._allKeysUp()},sync:function(e){this._handler.syncModifiers(e)}},o["default"].make_properties(c,[["target","wo","dom"],["focused","rw","bool"],["onKeyPress","rw","func"],["skipKeys","rw","arr"]]);var u=function(e){this._mouseCaptured=!1,this._doubleClickTimer=null,this._lastTouchPos=null,o["default"].set_defaults(this,e,{target:document,focused:!0,scale:1,touchButton:1}),this._eventHandlers={mousedown:this._handleMouseDown.bind(this),mouseup:this._handleMouseUp.bind(this),mousemove:this._handleMouseMove.bind(this),mousewheel:this._handleMouseWheel.bind(this),mousedisable:this._handleMouseDisable.bind(this)}};u.prototype={_captureMouse:function(){this._target.setCapture&&this._target.setCapture(),this._mouseCaptured=!0},_releaseMouse:function(){this._target.releaseCapture&&this._target.releaseCapture(),this._mouseCaptured=!1},_resetDoubleClickTimer:function(){this._doubleClickTimer=null},_handleMouseButton:function(e,t){if(!this._focused)return!0;this._notify&&this._notify(e);var n,r=e?e:window.event,i=o["default"].getEventPosition(e,this._target,this._scale);if(e.touches||e.changedTouches){if(1==t){if(null===this._doubleClickTimer)this._lastTouchPos=i;else{clearTimeout(this._doubleClickTimer);var a=this._lastTouchPos.x-i.x,s=this._lastTouchPos.y-i.y,c=Math.sqrt(a*a+s*s);c<20*window.devicePixelRatio&&(i=this._lastTouchPos)}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}n=this._touchButton}else n=r.which?1<<r.button:(1&r.button)+2*(2&r.button)+(4&r.button)/2;return this._onMouseButton&&(o["default"].Debug("onMouseButton "+(t?"down":"up")+", x: "+i.x+", y: "+i.y+", bmask: "+n),this._onMouseButton(i.x,i.y,t,n)),o["default"].stopEvent(e),!1},_handleMouseDown:function(e){this._captureMouse(),this._handleMouseButton(e,1)},_handleMouseUp:function(e){this._mouseCaptured&&(this._handleMouseButton(e,0),this._releaseMouse())},_handleMouseWheel:function(e){if(!this._focused)return!0;this._notify&&this._notify(e);var t,n=e?e:window.event,r=o["default"].getEventPosition(e,this._target,this._scale),i=n.detail?n.detail*-1:n.wheelDelta/40;return t=i>0?8:16,this._onMouseButton&&(this._onMouseButton(r.x,r.y,1,t),this._onMouseButton(r.x,r.y,0,t)),o["default"].stopEvent(e),!1},_handleMouseMove:function(e){if(!this._focused)return!0;this._notify&&this._notify(e);var t=(e?e:window.event,o["default"].getEventPosition(e,this._target,this._scale));return this._onMouseMove&&this._onMouseMove(t.x,t.y),o["default"].stopEvent(e),!1},_handleMouseDisable:function(e){if(!this._focused)return!0;var t=(e?e:window.event,o["default"].getEventPosition(e,this._target,this._scale));return!(t.realx>=0&&t.realy>=0&&t.realx<this._target.offsetWidth&&t.realy<this._target.offsetHeight)||(o["default"].stopEvent(e),!1)},grab:function(){var e=this._target;o["default"].addEvent(e,"touchstart",this._eventHandlers.mousedown),o["default"].addEvent(window,"touchend",this._eventHandlers.mouseup),o["default"].addEvent(e,"touchend",this._eventHandlers.mouseup),o["default"].addEvent(e,"touchmove",this._eventHandlers.mousemove),o["default"].addEvent(e,"mousedown",this._eventHandlers.mousedown),o["default"].addEvent(window,"mouseup",this._eventHandlers.mouseup),o["default"].addEvent(e,"mouseup",this._eventHandlers.mouseup),o["default"].addEvent(e,"mousemove",this._eventHandlers.mousemove),o["default"].addEvent(e,o["default"].Engine.gecko?"DOMMouseScroll":"mousewheel",this._eventHandlers.mousewheel),o["default"].addEvent(document,"click",this._eventHandlers.mousedisable),o["default"].addEvent(document.body,"contextmenu",this._eventHandlers.mousedisable)},ungrab:function(){var e=this._target;o["default"].removeEvent(e,"touchstart",this._eventHandlers.mousedown),o["default"].removeEvent(window,"touchend",this._eventHandlers.mouseup),o["default"].removeEvent(e,"touchend",this._eventHandlers.mouseup),o["default"].removeEvent(e,"touchmove",this._eventHandlers.mousemove),o["default"].removeEvent(e,"mousedown",this._eventHandlers.mousedown),o["default"].removeEvent(window,"mouseup",this._eventHandlers.mouseup),o["default"].removeEvent(e,"mouseup",this._eventHandlers.mouseup),o["default"].removeEvent(e,"mousemove",this._eventHandlers.mousemove),o["default"].removeEvent(e,o["default"].Engine.gecko?"DOMMouseScroll":"mousewheel",this._eventHandlers.mousewheel),o["default"].removeEvent(document,"click",this._eventHandlers.mousedisable),o["default"].removeEvent(document.body,"contextmenu",this._eventHandlers.mousedisable)}},o["default"].make_properties(u,[["target","ro","dom"],["notify","ro","func"],["focused","rw","bool"],["scale","rw","float"],["onMouseButton","rw","func"],["onMouseMove","rw","func"],["touchButton","rw","int"]]),t["default"]={Keyboard:c,Mouse:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e){for(var n=0;n<e.length;++n)t(e[n])}function r(n,r){var i={type:r},o=f.getKey(n);o&&(i.keyId=o);var a=f.getKeysym(n),s=e.hasShortcutModifier()||!!e.activeCharModifier();a&&("keydown"!==r||f.nonCharacterKey(n)||s)&&(i.keysym=a);var c=16===n.keyCode||"Shift"===n.key,u=!c&&("keydown"!==r||e.hasShortcutModifier()||!!f.nonCharacterKey(n)),l="keydown"===r&&e.activeCharModifier()&&!f.nonCharacterKey(n),d=e.activeCharModifier();if(d&&a){for(var h=!1,p=0;p<d.length;++p)d[p]===a.keysym&&(h=!0);"keypress"!==r||h||(i.escape=e.activeCharModifier())}return l&&t({type:"stall"}),t(i),u}return{keydown:function(t){return n(e.keydown(t)),r(t,"keydown")},keypress:function(e){return r(e,"keypress")},keyup:function(t){return n(e.keyup(t)),r(t,"keyup")},syncModifiers:function(t){n(e.syncAny(t))},releaseAll:function(){t({type:"releaseall"})}}}function o(e){function t(){if(!r)for(var i=function(){clearTimeout(r),r=null,t()};0!==n.length;){var o=n[0];switch(n=n.splice(1),o.type){case"stall":return void(r=setTimeout(i,5));case"keydown":0!==n.length&&"keypress"===n[0].type&&(!n[0].escape||o.keysym&&o.keysym.keysym===n[0].keysym.keysym||(o.escape=n[0].escape),o.keysym=n[0].keysym,
n=n.splice(1))}"stall"!==o.type&&e(o)}}var n=[],r=null;return function(e){n.push(e),t()}}function a(e){var t=[];return function(n){var r=0!==t.length?t[t.length-1]:null;switch(n.type){case"keydown":r&&n.keyId&&r.keyId===n.keyId||(r={keyId:n.keyId,keysyms:{}},t.push(r)),n.keysym&&(r.keysyms[n.keysym.keysym]=n.keysym,r.ignoreKeyPress=!0,e(n));break;case"keypress":r||(r={keyId:n.keyId,keysyms:{}},t.push(r)),n.keysym||console.log("keypress with no keysym:",n),n.keysym&&!r.ignoreKeyPress&&(r.keysyms[n.keysym.keysym]=n.keysym,n.type="keydown",e(n));break;case"keyup":if(0===t.length)return;for(var i=null,o=0;o!==t.length;++o)if(t[o].keyId===n.keyId){i=o;break}null===i&&(i=t.length-1);var a=t.splice(i,1)[0],s=function(){function e(){}return function(t){return e.prototype=t,new e}}();for(var c in a.keysyms){var u=s(n);u.keysym=a.keysyms[c],e(u)}break;case"releaseall":for(var o=0;o<t.length;++o)for(var c in t[o].keysyms){var l=t[o].keysyms[c];e({keyId:0,keysym:l,type:"keyup"})}t=[]}}}function s(e){return function(t){if("keydown"!==t.type||void 0===t.escape)return void e(t);for(var n=0;n<t.escape.length;++n)e({type:"keyup",keyId:0,keysym:d["default"].lookup(t.escape[n])});e(t);for(var n=0;n<t.escape.length;++n)e({type:"keydown",keyId:0,keysym:d["default"].lookup(t.escape[n])})}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(23),u=r(c),l=n(59),d=r(l),f=function(){function e(e){var t={536:350,537:351,538:354,539:355},n=t[e];return n?n:e}function t(){return navigator&&!!/mac/i.exec(navigator.platform)}function n(){return navigator&&!!/win/i.exec(navigator.platform)}function r(){return navigator&&!!/linux/i.exec(navigator.platform)}function i(e,t){var n={};for(var r in t)parseInt(r)!==u["default"].XK_Shift_L&&(n[r]=t[r]);var i=0;for(var a in t)n[a]&&++i;return o(e,n)?i>e.length:i>0}function o(e,t){if(0===e.length)return!1;for(var n=0;n<e.length;++n)if(!t[e[n]])return!1;return!0}function a(e){function a(e,t){function n(e){return{keysym:d["default"].lookup(e),type:l[e]?"keydown":"keyup"}}var r=[];return void 0!==e.ctrlKey&&e.ctrlKey!==l[u["default"].XK_Control_L]&&t!==u["default"].XK_Control_L&&(l[u["default"].XK_Control_L]=e.ctrlKey,r.push(n(u["default"].XK_Control_L))),void 0!==e.altKey&&e.altKey!==l[u["default"].XK_Alt_L]&&t!==u["default"].XK_Alt_L&&(l[u["default"].XK_Alt_L]=e.altKey,r.push(n(u["default"].XK_Alt_L))),void 0!==e.altGraphKey&&e.altGraphKey!==l[u["default"].XK_ISO_Level3_Shift]&&t!==u["default"].XK_ISO_Level3_Shift&&(l[u["default"].XK_ISO_Level3_Shift]=e.altGraphKey,r.push(n(u["default"].XK_ISO_Level3_Shift))),void 0!==e.shiftKey&&e.shiftKey!==l[u["default"].XK_Shift_L]&&t!==u["default"].XK_Shift_L&&(l[u["default"].XK_Shift_L]=e.shiftKey,r.push(n(u["default"].XK_Shift_L))),void 0!==e.metaKey&&e.metaKey!==l[u["default"].XK_Meta_L]&&t!==u["default"].XK_Meta_L&&(l[u["default"].XK_Meta_L]=e.metaKey,r.push(n(u["default"].XK_Meta_L))),r}function s(e,t){var n=c(e),r=n?n.keysym:null;return null!==r&&void 0!==l[r]&&(l[r]=t),a(e,r)}e||(e=t()?[u["default"].XK_Alt_L]:n()?[u["default"].XK_Alt_L,u["default"].XK_Control_L]:r()?[u["default"].XK_ISO_Level3_Shift]:[]);var l={};return l[u["default"].XK_Control_L]=!1,l[u["default"].XK_Alt_L]=!1,l[u["default"].XK_ISO_Level3_Shift]=!1,l[u["default"].XK_Shift_L]=!1,l[u["default"].XK_Meta_L]=!1,{keydown:function(e){return s(e,!0)},keyup:function(e){return s(e,!1)},syncAny:function(e){return a(e)},hasShortcutModifier:function(){return i(e,l)},activeCharModifier:function(){return o(e,l)?e:null}}}function s(e){return"keyCode"in e&&"key"in e?e.key+":"+e.keyCode:"keyCode"in e?e.keyCode:e.key}function c(t){var n;if(t["char"]&&1===t["char"].length?n=t["char"].charCodeAt(0):t.charCode?n=t.charCode:t.keyCode&&"keypress"===t.type&&(n=t.keyCode),n){var r=d["default"].fromUnicode(e(n));if(r)return r}return t.keyCode||t.which?d["default"].lookup(l(t)):null}function l(e){var t=e.shiftKey,n=e.keyCode||e.which;if("number"!=typeof n)return null;if(n>=48&&n<=57)return n;if(n>=65&&n<=90)return t?n:n+32;if(n>=96&&n<=105)return u["default"].XK_KP_0+(n-96);switch(n){case 32:return u["default"].XK_space;case 106:return u["default"].XK_KP_Multiply;case 107:return u["default"].XK_KP_Add;case 108:return u["default"].XK_KP_Separator;case 109:return u["default"].XK_KP_Subtract;case 110:return u["default"].XK_KP_Decimal;case 111:return u["default"].XK_KP_Divide;case 43:return u["default"].XK_plus;case 61:return"="===e.key?u["default"].XK_equal:"+"===e.key?u["default"].XK_plus:u["default"].XK_equal;case 187:return"="===e.key?u["default"].XK_equal:"+"===e.key?u["default"].XK_plus:(e.ctrlKey||e.metaKey)&&e.shiftKey===!1?u["default"].XK_equal:u["default"].XK_plus;case 188:return u["default"].XK_comma;case 189:return u["default"].XK_minus;case 190:return u["default"].XK_period}return f({keyCode:n})}function f(e){if(!e.keyCode)return null;var t=e.keyCode;if(t>=112&&t<=135)return u["default"].XK_F1+t-112;switch(t){case 8:return u["default"].XK_BackSpace;case 13:return u["default"].XK_Return;case 9:return u["default"].XK_Tab;case 27:return u["default"].XK_Escape;case 46:return u["default"].XK_Delete;case 36:return u["default"].XK_Home;case 35:return u["default"].XK_End;case 33:return u["default"].XK_Page_Up;case 34:return u["default"].XK_Page_Down;case 45:return u["default"].XK_Insert;case 37:return u["default"].XK_Left;case 38:return u["default"].XK_Up;case 39:return u["default"].XK_Right;case 40:return u["default"].XK_Down;case 16:return u["default"].XK_Shift_L;case 17:return u["default"].XK_Control_L;case 18:return u["default"].XK_Alt_L;case 224:return u["default"].XK_Meta_L;case 225:return u["default"].XK_ISO_Level3_Shift;case 91:return u["default"].XK_Super_L;case 92:return u["default"].XK_Super_R;case 93:return u["default"].XK_Menu;default:return null}}return{hasShortcutModifier:i,hasCharModifier:o,ModifierSync:a,getKey:s,getKeysym:c,keysymFromEvent:l,nonCharacterKey:f,substituteCodepoint:e}}();t["default"]={kbdUtil:f,KeyEventDecoder:i,VerifyCharModifier:o,TrackKeyState:a,EscapeModifiers:s}},function(e,t){"use strict";function n(e){return e?{keysym:e,keyname:i?i[e]:e}:void 0}function r(e){return n(o[e])}Object.defineProperty(t,"__esModule",{value:!0});var i=null,o={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:960,257:992,258:451,259:483,260:417,261:433,262:454,263:486,264:710,265:742,266:709,267:741,268:456,269:488,270:463,271:495,272:464,273:496,274:938,275:954,278:972,279:1004,280:458,281:490,282:460,283:492,284:728,285:760,286:683,287:699,288:725,289:757,290:939,291:955,292:678,293:694,294:673,295:689,296:933,297:949,298:975,299:1007,300:16777516,301:16777517,302:967,303:999,304:681,305:697,308:684,309:700,310:979,311:1011,312:930,313:453,314:485,315:934,316:950,317:421,318:437,321:419,322:435,323:465,324:497,325:977,326:1009,327:466,328:498,330:957,331:959,332:978,333:1010,336:469,337:501,338:5052,339:5053,340:448,341:480,342:931,343:947,344:472,345:504,346:422,347:438,348:734,349:766,350:426,351:442,352:425,353:441,354:478,355:510,356:427,357:443,358:940,359:956,360:989,361:1021,362:990,363:1022,364:733,365:765,366:473,367:505,368:475,369:507,370:985,371:1017,372:16777588,373:16777589,374:16777590,375:16777591,376:5054,377:428,378:444,379:431,380:447,381:430,382:446,399:16777615,402:2294,415:16777631,416:16777632,417:16777633,431:16777647,432:16777648,437:16777653,438:16777654,439:16777655,466:16777681,486:16777702,487:16777703,601:16777817,629:16777845,658:16777874,711:439,728:418,729:511,731:434,733:445,901:1966,902:1953,904:1954,905:1955,906:1956,908:1959,910:1960,911:1963,912:1974,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2e3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,938:1957,939:1961,940:1969,941:1970,942:1971,943:1972,944:1978,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,962:2035,963:2034,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,970:1973,971:1977,972:1975,973:1976,974:1979,1025:1715,1026:1713,1027:1714,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1040:1761,1041:1762,1042:1783,1043:1767,1044:1764,1045:1765,1046:1782,1047:1786,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1056:1778,1057:1779,1058:1780,1059:1781,1060:1766,1061:1768,1062:1763,1063:1790,1064:1787,1065:1789,1066:1791,1067:1785,1068:1784,1069:1788,1070:1760,1071:1777,1072:1729,1073:1730,1074:1751,1075:1735,1076:1732,1077:1733,1078:1750,1079:1754,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1088:1746,1089:1747,1090:1748,1091:1749,1092:1734,1093:1736,1094:1731,1095:1758,1096:1755,1097:1757,1098:1759,1099:1753,1100:1752,1101:1756,1102:1728,1103:1745,1105:1699,1106:1697,1107:1698,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,1168:1725,1169:1709,1170:16778386,1171:16778387,1174:16778390,1175:16778391,1178:16778394,1179:16778395,1180:16778396,1181:16778397,1186:16778402,1187:16778403,1198:16778414,1199:16778415,1200:16778416,1201:16778417,1202:16778418,1203:16778419,1206:16778422,1207:16778423,1208:16778424,1209:16778425,1210:16778426,1211:16778427,1240:16778456,1241:16778457,1250:16778466,1251:16778467,1256:16778472,1257:16778473,1262:16778478,1263:16778479,1329:16778545,1330:16778546,1331:16778547,1332:16778548,1333:16778549,1334:16778550,1335:16778551,1336:16778552,1337:16778553,1338:16778554,1339:16778555,1340:16778556,1341:16778557,1342:16778558,1343:16778559,1344:16778560,1345:16778561,1346:16778562,1347:16778563,1348:16778564,1349:16778565,1350:16778566,1351:16778567,1352:16778568,1353:16778569,1354:16778570,1355:16778571,1356:16778572,1357:16778573,1358:16778574,1359:16778575,1360:16778576,1361:16778577,1362:16778578,1363:16778579,1364:16778580,1365:16778581,1366:16778582,1370:16778586,1371:16778587,1372:16778588,1373:16778589,1374:16778590,1377:16778593,1378:16778594,1379:16778595,1380:16778596,1381:16778597,1382:16778598,1383:16778599,1384:16778600,1385:16778601,1386:16778602,1387:16778603,1388:16778604,1389:16778605,1390:16778606,1391:16778607,1392:16778608,1393:16778609,1394:16778610,1395:16778611,1396:16778612,1397:16778613,1398:16778614,1399:16778615,1400:16778616,1401:16778617,1402:16778618,1403:16778619,1404:16778620,1405:16778621,1406:16778622,1407:16778623,1408:16778624,1409:16778625,1410:16778626,1411:16778627,1412:16778628,1413:16778629,1414:16778630,1415:16778631,1417:16778633,1418:16778634,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1619:16778835,1620:16778836,1621:16778837,1632:16778848,1633:16778849,1634:16778850,1635:16778851,1636:16778852,1637:16778853,1638:16778854,1639:16778855,1640:16778856,1641:16778857,1642:16778858,1648:16778864,1657:16778873,1662:16778878,1670:16778886,1672:16778888,1681:16778897,1688:16778904,1700:16778916,1705:16778921,1711:16778927,1722:16778938,1726:16778942,1729:16778945,1740:16778956,1746:16778962,1748:16778964,1776:16778992,1777:16778993,1778:16778994,1779:16778995,1780:16778996,1781:16778997,1782:16778998,1783:16778999,1784:16779e3,1785:16779001,3458:16780674,3459:16780675,3461:16780677,3462:16780678,3463:16780679,3464:16780680,3465:16780681,3466:16780682,3467:16780683,3468:16780684,3469:16780685,3470:16780686,3471:16780687,3472:16780688,3473:16780689,3474:16780690,3475:16780691,3476:16780692,3477:16780693,3478:16780694,3482:16780698,3483:16780699,3484:16780700,3485:16780701,3486:16780702,3487:16780703,3488:16780704,3489:16780705,3490:16780706,3491:16780707,3492:16780708,3493:16780709,3494:16780710,3495:16780711,3496:16780712,3497:16780713,3498:16780714,3499:16780715,3500:16780716,3501:16780717,3502:16780718,3503:16780719,3504:16780720,3505:16780721,3507:16780723,3508:16780724,3509:16780725,3510:16780726,3511:16780727,3512:16780728,3513:16780729,3514:16780730,3515:16780731,3517:16780733,3520:16780736,3521:16780737,3522:16780738,3523:16780739,3524:16780740,3525:16780741,3526:16780742,3530:16780746,3535:16780751,3536:16780752,3537:16780753,3538:16780754,3539:16780755,3540:16780756,3542:16780758,3544:16780760,3545:16780761,3546:16780762,3547:16780763,3548:16780764,3549:16780765,3550:16780766,3551:16780767,3570:16780786,3571:16780787,3572:16780788,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,4304:16781520,4305:16781521,4306:16781522,4307:16781523,4308:16781524,4309:16781525,4310:16781526,4311:16781527,4312:16781528,4313:16781529,4314:16781530,4315:16781531,4316:16781532,4317:16781533,4318:16781534,4319:16781535,4320:16781536,4321:16781537,4322:16781538,4323:16781539,4324:16781540,4325:16781541,4326:16781542,4327:16781543,4328:16781544,4329:16781545,4330:16781546,4331:16781547,4332:16781548,4333:16781549,4334:16781550,4335:16781551,4336:16781552,4337:16781553,4338:16781554,4339:16781555,4340:16781556,4341:16781557,4342:16781558,7682:16784898,7683:16784899,7690:16784906,7691:16784907,7710:16784926,7711:16784927,7734:16784950,7735:16784951,7744:16784960,7745:16784961,7766:16784982,7767:16784983,7776:16784992,7777:16784993,7786:16785002,7787:16785003,7808:16785024,7809:16785025,7810:16785026,7811:16785027,7812:16785028,7813:16785029,7818:16785034,7819:16785035,7840:16785056,7841:16785057,7842:16785058,7843:16785059,7844:16785060,7845:16785061,7846:16785062,7847:16785063,7848:16785064,7849:16785065,7850:16785066,7851:16785067,7852:16785068,7853:16785069,7854:16785070,7855:16785071,7856:16785072,7857:16785073,7858:16785074,7859:16785075,7860:16785076,7861:16785077,7862:16785078,7863:16785079,7864:16785080,7865:16785081,7866:16785082,7867:16785083,7868:16785084,7869:16785085,7870:16785086,7871:16785087,7872:16785088,7873:16785089,7874:16785090,7875:16785091,7876:16785092,7877:16785093,7878:16785094,7879:16785095,7880:16785096,7881:16785097,7882:16785098,7883:16785099,7884:16785100,7885:16785101,7886:16785102,7887:16785103,7888:16785104,7889:16785105,7890:16785106,7891:16785107,7892:16785108,7893:16785109,7894:16785110,7895:16785111,7896:16785112,7897:16785113,7898:16785114,7899:16785115,7900:16785116,7901:16785117,7902:16785118,7903:16785119,7904:16785120,7905:16785121,7906:16785122,7907:16785123,7908:16785124,7909:16785125,7910:16785126,7911:16785127,7912:16785128,7913:16785129,7914:16785130,7915:16785131,7916:16785132,7917:16785133,7918:16785134,7919:16785135,7920:16785136,7921:16785137,7922:16785138,7923:16785139,7924:16785140,7925:16785141,7926:16785142,7927:16785143,7928:16785144,7929:16785145,8194:2722,8195:2721,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8210:2747,8211:2730,8212:2729,8213:1967,8215:3295,8216:2768,8217:2769,8218:2813,8220:2770,8221:2771,8222:2814,8224:2801,8225:2802,8226:2790,8229:2735,8230:2734,8240:2773,8242:2774,8243:2775,8248:2812,8254:1150,8304:16785520,8308:16785524,8309:16785525,8310:16785526,8311:16785527,8312:16785528,8313:16785529,8320:16785536,8321:16785537,8322:16785538,8323:16785539,8324:16785540,8325:16785541,8326:16785542,8327:16785543,8328:16785544,8329:16785545,8352:16785568,8353:16785569,8354:16785570,8355:16785571,8356:16785572,8357:16785573,8358:16785574,8359:16785575,8360:16785576,8361:3839,8362:16785578,8363:16785579,8364:8364,8453:2744,8470:1712,8471:2811,8478:2772,8482:2761,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8539:2755,8540:2756,8541:2757,8542:2758,8592:2299,8593:2300,8594:2301,8595:2302,8658:2254,8660:2253,8706:2287,8709:16785925,8711:2245,8712:16785928,8713:16785929,8715:16785931,8728:3018,8730:2262,8731:16785947,8732:16785948,8733:2241,8734:2242,8743:2270,8744:2271,8745:2268,8746:2269,8747:2239,8748:16785964,8749:16785965,8756:2240,8757:16785973,8764:2248,8771:2249,8773:16785992,8775:16785991,8800:2237,8801:2255,8802:16786018,8803:16786019,8804:2236,8805:2238,8834:2266,8835:2267,8866:3068,8867:3036,8868:3010,8869:3022,8968:3027,8970:3012,8981:2810,8992:2212,8993:2213,9109:3020,9115:2219,9117:2220,9118:2221,9120:2222,9121:2215,9123:2216,9124:2217,9126:2218,9128:2223,9132:2224,9143:2209,9146:2543,9147:2544,9148:2546,9149:2547,9225:2530,9226:2533,9227:2537,9228:2531,9229:2532,9251:2732,9252:2536,9472:2211,9474:2214,9484:2210,9488:2539,9492:2541,9496:2538,9500:2548,9508:2549,9516:2551,9524:2550,9532:2542,9618:2529,9642:2791,9643:2785,9644:2779,9645:2786,9646:2783,9647:2767,9650:2792,9651:2787,9654:2781,9655:2765,9660:2793,9661:2788,9664:2780,9665:2764,9670:2528,9675:2766,9679:2782,9702:2784,9734:2789,9742:2809,9747:2762,9756:2794,9758:2795,9792:2808,9794:2807,9827:2796,9829:2798,9830:2797,9837:2806,9839:2805,10003:2803,10007:2804,10013:2777,10016:2800,10216:2748,10217:2750,10240:16787456,10241:16787457,10242:16787458,10243:16787459,10244:16787460,10245:16787461,10246:16787462,10247:16787463,10248:16787464,10249:16787465,10250:16787466,10251:16787467,10252:16787468,10253:16787469,10254:16787470,10255:16787471,10256:16787472,10257:16787473,10258:16787474,10259:16787475,10260:16787476,10261:16787477,10262:16787478,10263:16787479,10264:16787480,10265:16787481,10266:16787482,10267:16787483,10268:16787484,10269:16787485,10270:16787486,10271:16787487,10272:16787488,10273:16787489,10274:16787490,10275:16787491,10276:16787492,10277:16787493,10278:16787494,10279:16787495,10280:16787496,10281:16787497,10282:16787498,10283:16787499,10284:16787500,10285:16787501,10286:16787502,10287:16787503,10288:16787504,10289:16787505,10290:16787506,10291:16787507,10292:16787508,10293:16787509,10294:16787510,10295:16787511,10296:16787512,10297:16787513,10298:16787514,10299:16787515,10300:16787516,10301:16787517,10302:16787518,10303:16787519,10304:16787520,10305:16787521,10306:16787522,10307:16787523,10308:16787524,10309:16787525,10310:16787526,10311:16787527,10312:16787528,10313:16787529,10314:16787530,10315:16787531,10316:16787532,10317:16787533,10318:16787534,10319:16787535,10320:16787536,10321:16787537,10322:16787538,10323:16787539,10324:16787540,10325:16787541,10326:16787542,10327:16787543,10328:16787544,10329:16787545,10330:16787546,10331:16787547,10332:16787548,10333:16787549,10334:16787550,10335:16787551,10336:16787552,10337:16787553,10338:16787554,10339:16787555,10340:16787556,10341:16787557,10342:16787558,10343:16787559,10344:16787560,10345:16787561,10346:16787562,10347:16787563,10348:16787564,10349:16787565,10350:16787566,10351:16787567,10352:16787568,10353:16787569,10354:16787570,10355:16787571,10356:16787572,10357:16787573,10358:16787574,10359:16787575,10360:16787576,10361:16787577,10362:16787578,10363:16787579,10364:16787580,10365:16787581,10366:16787582,10367:16787583,10368:16787584,10369:16787585,10370:16787586,10371:16787587,10372:16787588,10373:16787589,10374:16787590,10375:16787591,10376:16787592,10377:16787593,10378:16787594,10379:16787595,10380:16787596,10381:16787597,10382:16787598,10383:16787599,10384:16787600,10385:16787601,10386:16787602,10387:16787603,10388:16787604,10389:16787605,10390:16787606,10391:16787607,10392:16787608,10393:16787609,10394:16787610,10395:16787611,10396:16787612,10397:16787613,10398:16787614,10399:16787615,10400:16787616,10401:16787617,10402:16787618,10403:16787619,10404:16787620,10405:16787621,10406:16787622,10407:16787623,10408:16787624,10409:16787625,10410:16787626,10411:16787627,10412:16787628,10413:16787629,10414:16787630,10415:16787631,10416:16787632,10417:16787633,10418:16787634,10419:16787635,10420:16787636,10421:16787637,10422:16787638,10423:16787639,10424:16787640,10425:16787641,10426:16787642,10427:16787643,10428:16787644,10429:16787645,10430:16787646,10431:16787647,10432:16787648,10433:16787649,10434:16787650,10435:16787651,10436:16787652,10437:16787653,10438:16787654,10439:16787655,10440:16787656,10441:16787657,10442:16787658,10443:16787659,10444:16787660,10445:16787661,10446:16787662,10447:16787663,10448:16787664,10449:16787665,10450:16787666,10451:16787667,10452:16787668,10453:16787669,10454:16787670,10455:16787671,10456:16787672,10457:16787673,10458:16787674,10459:16787675,10460:16787676,10461:16787677,10462:16787678,10463:16787679,10464:16787680,10465:16787681,10466:16787682,10467:16787683,10468:16787684,10469:16787685,10470:16787686,10471:16787687,10472:16787688,10473:16787689,10474:16787690,10475:16787691,10476:16787692,10477:16787693,10478:16787694,10479:16787695,10480:16787696,10481:16787697,10482:16787698,10483:16787699,10484:16787700,10485:16787701,10486:16787702,10487:16787703,10488:16787704,10489:16787705,10490:16787706,10491:16787707,10492:16787708,10493:16787709,10494:16787710,10495:16787711,12289:1188,12290:1185,12300:1186,12301:1187,12443:1246,12444:1247,12449:1191,12450:1201,12451:1192,12452:1202,12453:1193,12454:1203,12455:1194,12456:1204,12457:1195,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12483:1199,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12515:1196,12516:1236,12517:1197,12518:1237,12519:1198,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12530:1190,12531:1245,12539:1189,12540:1200};t["default"]={lookup:n,fromUnicode:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=r(a),c=!1,u=41943040,l=10485760,d=function(){try{var e=new Uint8Array([1,2,3]);return String.fromCharCode.apply(null,e),function(e){return String.fromCharCode.apply(null,e)}}catch(e){return function(e){return String.fromCharCode.apply(null,Array.prototype.slice.call(e))}}}();window.WebSocket=window.WebSocket||window.MozWebSocket;var f=function(){function e(){i(this,e),this._websocket=null,this._mode="binary",this._rQ=null,this._rQi=0,this._rQlen=0,this._rQbufferSize=4194304,this._rQmax=this._rQbufferSize/8,this._sQ=null,this._sQlen=0,this._sQbufferSize=10240,this._eventHandlers={message:function(){},open:function(){},close:function(){},error:function(){}},this.maxBufferedAmount=200}return o(e,[{key:"get_sQ",value:function(){return this._sQ}},{key:"get_rQ",value:function(){return this._rQ}},{key:"get_rQi",value:function(){return this._rQi}},{key:"set_rQi",value:function(e){this._rQi=e}},{key:"rQlen",value:function(){return this._rQlen-this._rQi}},{key:"rQpeek8",value:function(){return this._rQ[this._rQi]}},{key:"rQshift8",value:function(){return this._rQ[this._rQi++]}},{key:"rQskip8",value:function(){this._rQi++}},{key:"rQskipBytes",value:function(e){this._rQi+=e}},{key:"rQshift16",value:function(){return(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]}},{key:"rQshift32",value:function(){return(this._rQ[this._rQi++]<<24)+(this._rQ[this._rQi++]<<16)+(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]}},{key:"rQshiftStr",value:function(e){"undefined"==typeof e&&(e=this.rQlen());var t=new Uint8Array(this._rQ.buffer,this._rQi,e);return this._rQi+=e,d(t)}},{key:"rQshiftBytes",value:function(e){return"undefined"==typeof e&&(e=this.rQlen()),this._rQi+=e,new Uint8Array(this._rQ.buffer,this._rQi-e,e)}},{key:"rQshiftTo",value:function(e,t){"undefined"==typeof t&&(t=this.rQlen()),e.set(new Uint8Array(this._rQ.buffer,this._rQi,t)),this._rQi+=t}},{key:"rQwhole",value:function(){return new Uint8Array(this._rQ.buffer,0,this._rQlen)}},{key:"rQslice",value:function(e,t){return t?new Uint8Array(this._rQ.buffer,this._rQi+e,t-e):new Uint8Array(this._rQ.buffer,this._rQi+e,this._rQlen-this._rQi-e)}},{key:"rQwait",value:function(e,t,n){var r=this._rQlen-this._rQi;if(r<t){if(n){if(this._rQi<n)throw new Error("rQwait cannot backup "+n+" bytes");this._rQi-=n}return!0}return!1}},{key:"flush",value:function(){return 0!==this._websocket.bufferedAmount&&s["default"].Debug("bufferedAmount: "+this._websocket.bufferedAmount),this._websocket.bufferedAmount<this.maxBufferedAmount?(this._sQlen>0&&this._websocket.readyState===WebSocket.OPEN&&(this._websocket.send(this._encode_message()),this._sQlen=0),!0):(s["default"].Info("Delaying send, bufferedAmount:",this._websocket.bufferedAmount),!1)}},{key:"send",value:function(e){var t=new Uint8Array(e);return t.length>this._sQbufferSize-this._sQlen&&this._expand_compact_sQ(t.length),this._sQ.set(t,this._sQlen),this._sQlen+=t.length,this.flush()}},{key:"send_string",value:function(e){this.send(e.split("").map(function(e){return e.charCodeAt(0)}))}},{key:"off",value:function(e){this._eventHandlers[e]=function(){}}},{key:"on",value:function(e,t){this._eventHandlers[e]=t}},{key:"_allocate_buffers",value:function(){this._rQ=new Uint8Array(this._rQbufferSize),this._sQ=new Uint8Array(this._sQbufferSize)}},{key:"init",value:function(e,t){this._allocate_buffers(),this._rQi=0,this._websocket=null;var n=!1;"Uint8Array"in window&&"set"in Uint8Array.prototype&&(n=!0);var r=!1;try{n&&("binaryType"in WebSocket.prototype||new WebSocket(t+"://.").binaryType)&&(s["default"].Info("Detected binaryType support in WebSockets"),r=!0)}catch(e){}if("undefined"==typeof e&&(e="binary"),Array.isArray(e)&&e.indexOf("binary")>-1&&(e="binary"),!r)throw new Error("Base64 WebSockets is no longer supported. Please use a browser which supports binary WebSockets.");if("binary"!=e)throw new Error("Base64 WebSockets is no longer supported. Please use the binary subprotocol instead.");return e}},{key:"open",value:function(e,t){var n=this,r=e.match(/^([a-z]+):\/\//)[1];t=this.init(t,r),this._websocket=new WebSocket(e,t),t.indexOf("binary")>=0&&(this._websocket.binaryType="arraybuffer"),this._websocket.onmessage=this._recv_message.bind(this),this._websocket.onopen=function(){if(s["default"].Debug(">> WebSock.onopen"),n._websocket.protocol?(n._mode=n._websocket.protocol,s["default"].Info("Server choose sub-protocol:",n._websocket.protocol)):(n._mode="binary",s["default"].Info("Server select no sub-protocol.")),"binary"!=n._mode)throw new Error("We are no longer supports base64 WebSockets. Please set the binary subprotocol instead.");n._eventHandlers.open(),s["default"].Debug("<< WebSock.onopen")},this._websocket.onclose=function(e){s["default"].Debug(">> WebSock.onclose"),n._eventHandlers.close(e),s["default"].Debug("<< WebSock.onclose")},this._websocket.onerror=function(e){s["default"].Debug(">> WebSock.onerror:",e),n._eventHandlers.error(e),s["default"].Debug("<< WebSock.onerror:",e)}}},{key:"close",value:function(){this._websocket&&(this._websocket.readyState!==WebSocket.OPEN&&this._websocket.readyState!==WebSocket.CONNECTING||(s["default"].Info("Closing WebSocket connection"),this._websocket.close()),this._websocket.onmessage=function(e){})}},{key:"_expand_compact_sQ",value:function(e){var t=e||this._sQlen>this._sQbufferSize/2;if(t&&(e?this._sQbufferSize=8*(this._sQlen+e):this._sQbufferSize*=2),this._sQbufferSize>l&&(this._sQbufferSize=l,this._sQbufferSize-this._sQlen<e))throw new Exception("Send Queue buffer exceeded "+l+" bytes, and the new message could not fit");if(t){var n=this._sQ.buffer;this._sQ=new Uint8Array(this._sQbufferSize),this._sQ.set(new Uint8Array(n))}else c?this._sQ.copyWithin(0,0):this._sQ.set(new Uint8Array(this._sQ.buffer))}},{key:"_encode_message",value:function(){return new Uint8Array(this._sQ.buffer,0,this._sQlen)}},{key:"_expand_compact_rQ",value:function(e){var t=e||this._rQlen-this._rQi>this._rQbufferSize/2;if(t&&(e?this._rQbufferSize=8*(this._rQlen-this._rQi+e):this._rQbufferSize*=2),this._rQbufferSize>u&&(this._rQbufferSize=u,this._rQbufferSize-this._rQlen-this._rQi<e))throw new Exception("Receive Queue buffer exceeded "+u+" bytes, and the new message could not fit");if(t){var n=this._rQ.buffer;this._rQmax=this._rQbufferSize/8,this._rQ=new Uint8Array(this._rQbufferSize),this._rQ.set(new Uint8Array(n,this._rQi))}else c?this._rQ.copyWithin(0,this._rQi):this._rQ.set(new Uint8Array(this._rQ.buffer,this._rQi));this._rQlen=this._rQlen-this._rQi,this._rQi=0}},{key:"_decode_message",value:function(e){var t=new Uint8Array(e);t.length>this._rQbufferSize-this._rQlen&&this._expand_compact_rQ(t.length),this._rQ.set(t,this._rQlen),this._rQlen+=t.length}},{key:"_recv_message",value:function(e){try{this._decode_message(e.data),this.rQlen()>0?(this._eventHandlers.message(),this._rQlen==this._rQi?(this._rQlen=0,this._rQi=0):this._rQlen>this._rQmax&&this._expand_compact_rQ()):s["default"].Debug("Ignoring empty message")}catch(e){var t="";e.name&&(t+="\n    name: "+e.name+"\n",t+="    message: "+e.message+"\n"),"undefined"!=typeof e.description&&(t+="    description: "+e.description+"\n"),"undefined"!=typeof e.stack&&(t+=e.stack),s["default"].Error("caught exception:",t.length>0?t:e),"undefined"!=typeof e.name?this._eventHandlers.error(e.name+": "+e.message):this._eventHandlers.error(e)}}}]),e}();t["default"]=f},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,
this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,i,o,a,s=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),d=new Uint8Array(l);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],d[u++]=r<<2|i>>4,d[u++]=(15&i)<<4|o>>2,d[u++]=(3&o)<<6|63&a;return l}}()},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function i(e){var t,r,i,o,a,s,c=e.length;a=n(e),s=new l(3*c/4-a),i=a>0?c-4:c;var d=0;for(t=0,r=0;t<i;t+=4,r+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[d++]=o>>16&255,s[d++]=o>>8&255,s[d++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[d++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[d++]=o>>8&255,s[d++]=255&o),s}function o(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}function s(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,u=0,l=n-r;u<l;u+=s)o.push(a(e,u,u+s>l?l:u+s));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=r,t.toByteArray=i,t.fromByteArray=s;for(var c=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=d.length;f<h;++f)c[f]=d[f],u[d.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),s=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;e.exports=function(){return a?s?t.Blob:i:c?r:void 0}()}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?d(e,t,n):p(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function l(e,t){if(c(t),e=o(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function f(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=f(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&$(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),a.alloc(+e)}function v(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}var u;if(i){var l=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===c)return l*a}else l!==-1&&(u-=u-l),l=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var d=!0,f=0;f<c;f++)if(o(e,u+f)!==o(t,f)){d=!1;break}if(d)return u}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function C(e,t,n,r){return G(H(t,e.length-n),e,n,r)}function S(e,t,n,r){return G(q(t),e,n,r)}function T(e,t,n,r){return S(e,t,n,r)}function E(e,t,n,r){return G(Q(t),e,n,r)}function P(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var c,u,l,d;switch(s){case 1:o<128&&(a=o);break;case 2:c=e[i+1],128===(192&c)&&(d=(31&o)<<6|63&c,d>127&&(a=d));break;case 3:c=e[i+1],u=e[i+2],128===(192&c)&&128===(192&u)&&(d=(15&o)<<12|(63&c)<<6|63&u,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=e[i+1],u=e[i+2],l=e[i+3],128===(192&c)&&128===(192&u)&&128===(192&l)&&(d=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&l,d>65535&&d<1114112&&(a=d))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return I(r)}function I(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function K(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function X(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,i){return i||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function j(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Q(e){return J.toByteArray(j(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e){return e!==e}var J=n(63),Z=n(78),$=n(66);t.Buffer=a,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return u(null,e,t,n)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):y.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,c=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),d=0;d<c;++d)if(u[d]!==l[d]){o=u[d],s=l[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),Z.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),Z.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),Z.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),Z.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;K(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;K(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):X(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);K(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);K(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):X(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||K(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:H(new a(e,r).toString()),c=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(){return t.colors[l++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(u||n);e.diff=o,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var c=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n}),a=t.formatArgs.apply(e,a);var l=i.log||t.log||console.log.bind(console);l.apply(e,a)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i,t.coerce=c,t.disable=a,t.enable=o,t.enabled=s,t.humanize=n(81),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t,n){e.exports=n(69)},function(e,t,n){e.exports=n(70),e.exports.parser=n(7)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=l(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=l(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var i="object"==typeof t&&t;i.global===i&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=n(25),a=n(9),s=n(3)("engine.io-client:socket"),c=n(28),u=n(7),l=n(36),d=n(92),f=n(19);e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=n(16),r.transports=n(25),r.parser=n(7),r.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=i(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;d=d||t}d||(s('probe transport "%s" opened',e),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(t){if(!d)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",l),!l)return;r.priorWebsocketSuccess="websocket"===l.name,s('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){d||"closed"!==f.readyState&&(s("changing transport and sending upgrade packet"),u(),f.setTransport(l),l.send([{type:"upgrade"}]),f.emit("upgrade",l),l=null,f.upgrading=!1,f.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=l.name,f.emit("upgradeError",n)}}))}function n(){d||(d=!0,u(),l.close(),l=null)}function i(t){var r=new Error("probe error: "+t);r.transport=l.name,n(),s('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function c(e){l&&e.name!==l.name&&(s('"%s" works - aborting "%s"',e.name,l.name),n())}function u(){l.removeListener("open",t),l.removeListener("error",i),l.removeListener("close",o),f.removeListener("close",a),f.removeListener("upgrading",c)}s('probing transport "%s"',e);var l=this.createTransport(e,{probe:1}),d=!1,f=this;r.priorWebsocketSuccess=!1,l.once("open",t),l.once("error",i),l.once("close",o),this.once("close",a),this.once("upgrading",c),l.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval);
},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){s("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(t){function r(){}function i(e){o.call(this,e),this.query=this.query||{},s||(t.___eio||(t.___eio=[]),s=t.___eio),this.index=s.length;var n=this;s.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var o=n(26),a=n(13);e.exports=i;var s,c=/\n/g,u=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=l,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function r(){}function i(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,t.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==n}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var s=n(17),c=n(26),u=n(9),l=n(13),d=n(3)("engine.io-client:polling-xhr");e.exports=i,e.exports.Request=o,l(i,c),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new s(e),r=this;try{d("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.extraHeaders[i])}}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},d("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}t.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}t.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",a):t.addEventListener&&t.addEventListener("beforeunload",a,!1))}).call(t,function(){return this}())},function(e,t,n){(function(t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=d&&!e.forceNode,this.usingBrowserWebSocket||(f=i),o.call(this,e)}var i,o=n(16),a=n(7),s=n(19),c=n(13),u=n(44),l=n(3)("engine.io-client:websocket"),d=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{i=n(114)}catch(e){}var f=d;f||"undefined"!=typeof window||(f=i),e.exports=r,c(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=e.length,o=0,s=i;o<s;o++)!function(e){a.encodePacket(e,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),r.perMessageDeflate){var s="string"==typeof o?t.Buffer.byteLength(o):o.length;s<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--i||n()})}(e[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===r.prototype.name)}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t,n){function r(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===c.call(e)?i(e,t,n):"string"==typeof e?o(e,t,n):a(e,t,n)}function i(e,t,n){for(var r=0,i=e.length;r<i;r++)u.call(e,r)&&t.call(n,e[r],r,e)}function o(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}function a(e,t,n){for(var r in e)u.call(e,r)&&t.call(n,e[r],r,e)}var s=n(29);e.exports=r;var c=Object.prototype.toString,u=Object.prototype.hasOwnProperty},function(e,t){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*m}},function(e,t,n){!function(t){"use strict";var r,i=t.Base64,o="2.1.9";if("undefined"!=typeof e&&e.exports)try{r=n(65).Buffer}catch(e){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(a),c=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(l,u)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[a.charAt(n>>>18),a.charAt(n>>>12&63),t>=2?"=":a.charAt(n>>>6&63),t>=1?"=":a.charAt(63&n)];return r.join("")},h=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},p=r?function(e){return(e.constructor===r.constructor?e:new r(e)).toString("base64")}:function(e){return h(d(e))},m=function(e,t){return t?p(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):p(String(e))},g=function(e){return m(e,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),y=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return c((n>>>10)+55296)+c((1023&n)+56320);case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(v,y)},b=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[c(r>>>16),c(r>>>8&255),c(255&r)];return i.length-=[0,0,2,1][n],i.join("")},w=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,b)},k=r?function(e){return(e.constructor===r.constructor?e:new r(e,"base64")).toString()}:function(e){return _(w(e))},C=function(e){return k(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(){var e=t.Base64;return t.Base64=i,e};if(t.Base64={VERSION:o,atob:w,btoa:h,fromBase64:C,toBase64:m,utob:d,encode:m,encodeURI:g,btou:_,decode:C,noConflict:S},"function"==typeof Object.defineProperty){var T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",T(function(){return C(this)})),Object.defineProperty(String.prototype,"toBase64",T(function(e){return m(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",T(function(){return m(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(this)},function(e,t,n){var r;(function(e,i){(function(){function o(e,t){function n(e){if(n[e]!==g)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,l="function"==typeof u&&_;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===u(0)&&"0"===u(new r)&&'""'==u(new i)&&u(y)===g&&u(g)===g&&u()===g&&"1"===u(a)&&"[1]"==u([a])&&"[null]"==u([g])&&"null"==u(null)&&"[null,null,null]"==u([g,y,null])&&u({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===u(null,a)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(e){l=!1}}o=l}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){a=d(s);var f=5==a.a.length&&1===a.a[0];if(f){try{f=!d('"\t"')}catch(e){}if(f)try{f=1!==d("01")}catch(e){}if(f)try{f=1!==d("1.")}catch(e){}}}}catch(e){f=!1}o=f}}return n[e]=!!o}e||(e=u.Object()),t||(t=u.Object());var r=e.Number||u.Number,i=e.String||u.String,a=e.Object||u.Object,c=e.Date||u.Date,l=e.SyntaxError||u.SyntaxError,d=e.TypeError||u.TypeError,f=e.Math||u.Math,h=e.JSON||u.JSON;"object"==typeof h&&h&&(t.stringify=h.stringify,t.parse=h.parse);var p,m,g,v=a.prototype,y=v.toString,_=new c(-0xc782b5b800cec);try{_=_.getUTCFullYear()==-109252&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(e){}if(!n("json")){var b="[object Function]",w="[object Date]",k="[object Number]",C="[object String]",S="[object Array]",T="[object Boolean]",E=n("bug-string-char-index");if(!_)var P=f.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],R=function(e,t){return A[t]+365*(e-1970)+P((e-1969+(t=+(t>1)))/4)-P((e-1901+t)/100)+P((e-1601+t)/400)};if((p=v.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),m=function(e,t){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)p.call(r,i)&&o++;return n=r=null,o?m=2==o?function(e,t){var n,r={},i=y.call(e)==b;for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i=y.call(e)==b;for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,i,o=y.call(e)==b,a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var I={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x="000000",O=function(e,t){return(x+(t||0)).slice(-e)},M="\\u00",D=function(e){for(var t='"',n=0,r=e.length,i=!E||r>10,o=i&&(E?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=I[a];break;default:if(a<32){t+=M+O(2,a.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},N=function(e,t,n,r,i,o,a){var s,c,u,l,f,h,v,_,b,E,A,I,x,M,K,B;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if(c=y.call(s),c!=w||p.call(s,"toJSON"))"function"==typeof s.toJSON&&(c!=k&&c!=C&&c!=S||p.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(R){for(f=P(s/864e5),u=P(f/365.2425)+1970-1;R(u+1,0)<=f;u++);for(l=P((f-R(u,0))/30.42);R(u,l+1)<=f;l++);f=1+f-R(u,l),h=(s%864e5+864e5)%864e5,v=P(h/36e5)%24,_=P(h/6e4)%60,b=P(h/1e3)%60,E=h%1e3}else u=s.getUTCFullYear(),l=s.getUTCMonth(),f=s.getUTCDate(),v=s.getUTCHours(),_=s.getUTCMinutes(),b=s.getUTCSeconds(),E=s.getUTCMilliseconds();s=(u<=0||u>=1e4?(u<0?"-":"+")+O(6,u<0?-u:u):O(4,u))+"-"+O(2,l+1)+"-"+O(2,f)+"T"+O(2,v)+":"+O(2,_)+":"+O(2,b)+"."+O(3,E)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(c=y.call(s),c==T)return""+s;if(c==k)return s>-1/0&&s<1/0?""+s:"null";if(c==C)return D(""+s);if("object"==typeof s){for(M=a.length;M--;)if(a[M]===s)throw d();if(a.push(s),A=[],K=o,o+=i,c==S){for(x=0,M=s.length;x<M;x++)I=N(x,s,n,r,i,o,a),A.push(I===g?"null":I);B=A.length?i?"[\n"+o+A.join(",\n"+o)+"\n"+K+"]":"["+A.join(",")+"]":"[]"}else m(r||s,function(e){var t=N(e,s,n,r,i,o,a);t!==g&&A.push(D(e)+":"+(i?" ":"")+t)}),B=A.length?i?"{\n"+o+A.join(",\n"+o)+"\n"+K+"}":"{"+A.join(",")+"}":"{}";return a.pop(),B}};t.stringify=function(e,t,n){var r,i,o,a;if(s[typeof t]&&t)if((a=y.call(t))==b)i=t;else if(a==S){o={};for(var c,u=0,l=t.length;u<l;c=t[u++],a=y.call(c),(a==C||a==k)&&(o[c]=1));}if(n)if((a=y.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==C&&(r=n.length<=10?n:n.slice(0,10));return N("",(c={},c[""]=e,c),i,o,r,"",[])}}if(!n("json-parse")){var K,B,X=i.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw K=B=null,l()},W=function(){for(var e,t,n,r,i,o=B,a=o.length;K<a;)switch(i=o.charCodeAt(K)){case 9:case 10:case 13:case 32:K++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=E?o.charAt(K):o[K],K++,e;case 34:for(e="@",K++;K<a;)if(i=o.charCodeAt(K),i<32)U();else if(92==i)switch(i=o.charCodeAt(++K)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=L[i],K++;break;case 117:for(t=++K,n=K+4;K<n;K++)i=o.charCodeAt(K),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||U();e+=X("0x"+o.slice(t,K));break;default:U()}else{if(34==i)break;for(i=o.charCodeAt(K),t=K;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++K);e+=o.slice(t,K)}if(34==o.charCodeAt(K))return K++,e;U();default:if(t=K,45==i&&(r=!0,i=o.charCodeAt(++K)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(K+1),i>=48&&i<=57)&&U(),r=!1;K<a&&(i=o.charCodeAt(K),i>=48&&i<=57);K++);if(46==o.charCodeAt(K)){for(n=++K;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==K&&U(),K=n}if(i=o.charCodeAt(K),101==i||69==i){for(i=o.charCodeAt(++K),43!=i&&45!=i||K++,n=K;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==K&&U(),K=n}return+o.slice(t,K)}if(r&&U(),"true"==o.slice(K,K+4))return K+=4,!0;if("false"==o.slice(K,K+5))return K+=5,!1;if("null"==o.slice(K,K+4))return K+=4,null;U()}return"$"},j=function(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(E?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=W(),"]"!=e;n||(n=!0))n&&(","==e?(e=W(),"]"==e&&U()):U()),","==e&&U(),t.push(j(e));return t}if("{"==e){for(t={};e=W(),"}"!=e;n||(n=!0))n&&(","==e?(e=W(),"}"==e&&U()):U()),","!=e&&"string"==typeof e&&"@"==(E?e.charAt(0):e[0])&&":"==W()||U(),t[e.slice(1)]=j(W());return t}U()}return e},z=function(e,t,n){var r=F(e,t,n);r===g?delete e[t]:e[t]=r},F=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(y.call(i)==S)for(r=i.length;r--;)z(i,r,n);else m(i,function(e){z(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return K=0,B=""+e,n=j(W()),"$"!=W()&&U(),K=B=null,t&&y.call(t)==b?F((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var a=n(102),s={function:!0,object:!0},c=s[typeof t]&&t&&!t.nodeType&&t,u=s[typeof window]&&window||this,l=c&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof i&&i;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),c&&!a)o(u,c);else{var d=u.JSON,f=u.JSON3,h=!1,p=o(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=d,u.JSON3=f,d=f=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}a&&(r=function(){return p}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}).call(this)}).call(t,n(43)(e),function(){return this}())},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return o(e,u,"day")||o(e,c,"hour")||o(e,s,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,c=60*s,u=24*c,l=365.25*u;e.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return n(e);if("number"===o&&isNaN(e)===!1)return t["long"]?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(5).assign,i=n(83),o=n(84),a=n(33),s={};r(s,i,o,a),e.exports=s},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=c.assign({level:y,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==m)throw new Error(l[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===f.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=s.deflateSetDictionary(this.strm,i),n!==m)throw new Error(l[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=n(85),c=n(5),u=n(31),l=n(18),d=n(35),f=Object.prototype.toString,h=0,p=4,m=0,g=1,v=2,y=-1,_=0,b=8;r.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?p:h,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===f.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new c.Buf8(o),i.next_out=0,i.avail_out=o),n=s.deflate(i,r),n!==g&&n!==m)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||r!==p&&r!==v)||("string"===this.options.to?this.onData(u.buf2binstring(c.shrinkBuf(i.output,i.next_out))):this.onData(c.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&n!==g);return r===p?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===m):r!==v||(this.onEnd(m),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===m&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=o,t.gzip=a},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(l[n]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=n(88),s=n(5),c=n(31),u=n(33),l=n(18),d=n(35),f=n(86),h=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,o,l,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?f.input=c.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(p),f.next_out=0,f.avail_out=p),n=a.inflate(f,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&m&&(d="string"==typeof m?c.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,n=a.inflateSetDictionary(this.strm,d)),n===u.Z_BUF_ERROR&&g===!0&&(n=u.Z_OK,g=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=c.utf8border(f.output,f.next_out),o=f.next_out-i,l=c.buf2string(f.output,i),f.next_out=o,f.avail_out=p-o,o&&s.arraySet(f.output,f.output,i,o,0),this.onData(l)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),f.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=o,t.ungzip=i},function(e,t,n){"use strict";function r(e,t){return e.msg=D[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(I.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){x._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,I.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=O(e.adler,t,i,n):2===e.state.wrap&&(e.adler=M(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function d(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,u=e.window,l=e.w_mask,d=e.prev,f=e.strstart+le,h=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,u[n+a]===p&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do;while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=le-(f-o),o=f-le,r>a){if(e.match_start=t,a=r,r>=s)break;h=u[o+a-1],p=u[o+a]}}while((t=d[t&l])>c&&0!==--i);return a<=e.lookahead?a:e.lookahead}function f(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-de)){I.arraySet(e.window,e.window,a,a,0),e.match_start-=a,
e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--n);n=a,t=n;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ue)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ue-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ue)););}while(e.lookahead<de&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===N)return be;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return be;if(e.strstart-e.block_start>=e.w_size-de&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===X?(s(e,!0),0===e.strm.avail_out?ke:Ce):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?be:be}function p(e,t){for(var n,r;;){if(e.lookahead<de){if(f(e),e.lookahead<de&&t===N)return be;if(0===e.lookahead)break}if(n=0,e.lookahead>=ue&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-de&&(e.match_length=d(e,n)),e.match_length>=ue)if(r=x._tr_tally(e,e.strstart-e.match_start,e.match_length-ue),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ue){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=e.strstart<ue-1?e.strstart:ue-1,t===X?(s(e,!0),0===e.strm.avail_out?ke:Ce):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:we}function m(e,t){for(var n,r,i;;){if(e.lookahead<de){if(f(e),e.lookahead<de&&t===N)return be;if(0===e.lookahead)break}if(n=0,e.lookahead>=ue&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ue-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-de&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===ue&&e.strstart-e.match_start>4096)&&(e.match_length=ue-1)),e.prev_length>=ue&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ue,r=x._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ue),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ue-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return be}else if(e.match_available){if(r=x._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return be}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=x._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ue-1?e.strstart:ue-1,t===X?(s(e,!0),0===e.strm.avail_out?ke:Ce):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:we}function g(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=le){if(f(e),e.lookahead<=le&&t===N)return be;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ue&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+le;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=le-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ue?(n=x._tr_tally(e,1,e.match_length-ue),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===X?(s(e,!0),0===e.strm.avail_out?ke:Ce):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:we}function v(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===N)return be;break}if(e.match_length=0,n=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===X?(s(e,!0),0===e.strm.avail_out?ke:Ce):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:we}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function _(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=R[e.level].max_lazy,e.good_match=R[e.level].good_length,e.nice_match=R[e.level].nice_length,e.max_chain_length=R[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ue-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*se),this.dyn_dtree=new I.Buf16(2*(2*oe+1)),this.bl_tree=new I.Buf16(2*(2*ae+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(ce+1),this.heap=new I.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=J,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ye,e.adler=2===t.wrap?0:1,t.last_flush=N,x._tr_init(t),U):r(e,j)}function k(e){var t=w(e);return t===U&&_(e.state),t}function C(e,t){return e&&e.state?2!==e.state.wrap?j:(e.state.gzhead=t,U):j}function S(e,t,n,i,o,a){if(!e)return j;var s=1;if(t===H&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>$||n!==Z||i<8||i>15||t<0||t>9||a<0||a>G)return r(e,j);8===i&&(i=9);var c=new b;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+ue-1)/ue),c.window=new I.Buf8(2*c.w_size),c.head=new I.Buf16(c.hash_size),c.prev=new I.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new I.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,k(e)}function T(e,t){return S(e,t,Z,ee,te,Y)}function E(e,t){var n,s,l,d;if(!e||!e.state||t>L||t<0)return e?r(e,j):j;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===_e&&t!==X)return r(e,0===e.avail_out?F:j);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===he)if(2===s.wrap)e.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=V||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=M(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=pe):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=V||s.level<2?4:0),c(s,Se),s.status=ye);else{var f=Z+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=V||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=h<<6,0!==s.strstart&&(f|=fe),f+=31-f%31,s.status=ye,u(s,f),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===pe)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=me)}else s.status=me;if(s.status===me)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),0===d&&(s.gzindex=0,s.status=ge)}else s.status=ge;if(s.status===ge)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>l&&(e.adler=M(e.adler,s.pending_buf,s.pending-l,l)),0===d&&(s.status=ve)}else s.status=ve;if(s.status===ve&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(c(s,255&e.adler),c(s,e.adler>>8&255),e.adler=0,s.status=ye)):s.status=ye),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,U}else if(0===e.avail_in&&i(t)<=i(n)&&t!==X)return r(e,F);if(s.status===_e&&0!==e.avail_in)return r(e,F);if(0!==e.avail_in||0!==s.lookahead||t!==N&&s.status!==_e){var p=s.strategy===V?v(s,t):s.strategy===Q?g(s,t):R[s.level].func(s,t);if(p!==ke&&p!==Ce||(s.status=_e),p===be||p===ke)return 0===e.avail_out&&(s.last_flush=-1),U;if(p===we&&(t===K?x._tr_align(s):t!==L&&(x._tr_stored_block(s,0,0,!1),t===B&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,U}return t!==X?U:s.wrap<=0?W:(2===s.wrap?(c(s,255&e.adler),c(s,e.adler>>8&255),c(s,e.adler>>16&255),c(s,e.adler>>24&255),c(s,255&e.total_in),c(s,e.total_in>>8&255),c(s,e.total_in>>16&255),c(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?U:W)}function P(e){var t;return e&&e.state?(t=e.state.status,t!==he&&t!==pe&&t!==me&&t!==ge&&t!==ve&&t!==ye&&t!==_e?r(e,j):(e.state=null,t===ye?r(e,z):U)):j}function A(e,t){var n,r,i,a,s,c,u,l,d=t.length;if(!e||!e.state)return j;if(n=e.state,a=n.wrap,2===a||1===a&&n.status!==he||n.lookahead)return j;for(1===a&&(e.adler=O(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new I.Buf8(n.w_size),I.arraySet(l,t,d-n.w_size,n.w_size,0),t=l,d=n.w_size),s=e.avail_in,c=e.next_in,u=e.input,e.avail_in=d,e.next_in=0,e.input=t,f(n);n.lookahead>=ue;){r=n.strstart,i=n.lookahead-(ue-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ue-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=ue-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ue-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=s,n.wrap=a,U}var R,I=n(5),x=n(90),O=n(32),M=n(34),D=n(18),N=0,K=1,B=3,X=4,L=5,U=0,W=1,j=-2,z=-3,F=-5,H=-1,q=1,V=2,Q=3,G=4,Y=0,J=2,Z=8,$=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,oe=30,ae=19,se=2*ie+1,ce=15,ue=3,le=258,de=le+ue+1,fe=32,he=42,pe=69,me=73,ge=91,ve=103,ye=113,_e=666,be=1,we=2,ke=3,Ce=4,Se=3;R=[new y(0,0,0,0,h),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],t.deflateInit=T,t.deflateInit2=S,t.deflateReset=k,t.deflateResetKeep=w,t.deflateSetHeader=C,t.deflate=E,t.deflateEnd=P,t.deflateSetDictionary=A,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},function(e,t){"use strict";var n=30,r=12;e.exports=function(e,t){var i,o,a,s,c,u,l,d,f,h,p,m,g,v,y,_,b,w,k,C,S,T,E,P,A;i=e.state,o=e.next_in,P=e.input,a=o+(e.avail_in-5),s=e.next_out,A=e.output,c=s-(t-e.avail_out),u=s+(e.avail_out-257),l=i.dmax,d=i.wsize,f=i.whave,h=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,y=i.distcode,_=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{g<15&&(m+=P[o++]<<g,g+=8,m+=P[o++]<<g,g+=8),w=v[m&_];t:for(;;){if(k=w>>>24,m>>>=k,g-=k,k=w>>>16&255,0===k)A[s++]=65535&w;else{if(!(16&k)){if(0===(64&k)){w=v[(65535&w)+(m&(1<<k)-1)];continue t}if(32&k){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}C=65535&w,k&=15,k&&(g<k&&(m+=P[o++]<<g,g+=8),C+=m&(1<<k)-1,m>>>=k,g-=k),g<15&&(m+=P[o++]<<g,g+=8,m+=P[o++]<<g,g+=8),w=y[m&b];n:for(;;){if(k=w>>>24,m>>>=k,g-=k,k=w>>>16&255,!(16&k)){if(0===(64&k)){w=y[(65535&w)+(m&(1<<k)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(S=65535&w,k&=15,g<k&&(m+=P[o++]<<g,g+=8,g<k&&(m+=P[o++]<<g,g+=8)),S+=m&(1<<k)-1,S>l){e.msg="invalid distance too far back",i.mode=n;break e}if(m>>>=k,g-=k,k=s-c,S>k){if(k=S-k,k>f&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(T=0,E=p,0===h){if(T+=d-k,k<C){C-=k;do A[s++]=p[T++];while(--k);T=s-S,E=A}}else if(h<k){if(T+=d+h-k,k-=h,k<C){C-=k;do A[s++]=p[T++];while(--k);if(T=0,h<C){k=h,C-=k;do A[s++]=p[T++];while(--k);T=s-S,E=A}}}else if(T+=h-k,k<C){C-=k;do A[s++]=p[T++];while(--k);T=s-S,E=A}for(;C>2;)A[s++]=E[T++],A[s++]=E[T++],A[s++]=E[T++],C-=3;C&&(A[s++]=E[T++],C>1&&(A[s++]=E[T++]))}else{T=s-S;do A[s++]=A[T++],A[s++]=A[T++],A[s++]=A[T++],C-=3;while(C>2);C&&(A[s++]=A[T++],C>1&&(A[s++]=A[T++]))}break}}break}}while(o<a&&s<u);C=g>>3,o-=C,g-=C<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=s,e.avail_in=o<a?5+(a-o):5-(o-a),e.avail_out=s<u?257+(u-s):257-(s-u),i.hold=m,i.bits=g}},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(me),t.distcode=t.distdyn=new y.Buf32(ge),t.sane=1,t.back=-1,R):O}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):O}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?O:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):O}function c(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==R&&(e.state=null),n):O}function u(e){return c(e,ye)}function l(e){if(_e){var t;for(g=new y.Buf32(512),v=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(k(S,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;k(T,e.lens,0,32,v,0,e.work,{bits:5}),_e=!1}e.lencode=g,e.lenbits=9,e.distcode=v,e.distbits=5}function d(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),r>=o.wsize?(y.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),y.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(y.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function f(e,t){var n,i,o,a,s,c,u,f,h,p,m,g,v,me,ge,ve,ye,_e,be,we,ke,Ce,Se,Te,Ee=0,Pe=new y.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return O;n=e.state,n.mode===Q&&(n.mode=G),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,f=n.hold,h=n.bits,p=c,m=u,Ce=R;e:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=G;break}for(;h<16;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(2&n.wrap&&35615===f){n.check=0,Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=b(n.check,Pe,2,0),f=0,h=0,n.mode=X;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=fe;break}if((15&f)!==K){e.msg="unknown compression method",n.mode=fe;break}if(f>>>=4,h-=4,ke=(15&f)+8,0===n.wbits)n.wbits=ke;else if(ke>n.wbits){e.msg="invalid window size",n.mode=fe;break}n.dmax=1<<ke,e.adler=n.check=1,n.mode=512&f?q:Q,f=0,h=0;break;case X:for(;h<16;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(n.flags=f,(255&n.flags)!==K){e.msg="unknown compression method",n.mode=fe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fe;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=b(n.check,Pe,2,0)),f=0,h=0,n.mode=L;case L:for(;h<32;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.head&&(n.head.time=f),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,Pe[2]=f>>>16&255,Pe[3]=f>>>24&255,n.check=b(n.check,Pe,4,0)),f=0,h=0,n.mode=U;case U:for(;h<16;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=b(n.check,Pe,2,0)),f=0,h=0,n.mode=W;case W:if(1024&n.flags){for(;h<16;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=b(n.check,Pe,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=j;case j:if(1024&n.flags&&(g=n.length,g>c&&(g=c),g&&(n.head&&(ke=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,a,g,ke)),512&n.flags&&(n.check=b(n.check,i,g,a)),c-=g,a+=g,n.length-=g),n.length))break e;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===c)break e;g=0;do ke=i[a+g++],n.head&&ke&&n.length<65536&&(n.head.name+=String.fromCharCode(ke));while(ke&&g<c);if(512&n.flags&&(n.check=b(n.check,i,g,a)),c-=g,a+=g,ke)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=F;case F:if(4096&n.flags){if(0===c)break e;g=0;do ke=i[a+g++],n.head&&ke&&n.length<65536&&(n.head.comment+=String.fromCharCode(ke));while(ke&&g<c);if(512&n.flags&&(n.check=b(n.check,i,g,a)),c-=g,a+=g,ke)break e}else n.head&&(n.head.comment=null);n.mode=H;case H:if(512&n.flags){for(;h<16;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fe;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Q;break;case q:for(;h<32;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}e.adler=n.check=r(f),f=0,h=0,n.mode=V;case V:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=f,n.bits=h,x;e.adler=n.check=1,n.mode=Q;case Q:if(t===P||t===A)break e;case G:if(n.last){f>>>=7&h,h-=7&h,n.mode=ue;break}for(;h<3;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}switch(n.last=1&f,f>>>=1,h-=1,3&f){case 0:n.mode=Y;break;case 1:if(l(n),n.mode=ne,t===A){f>>>=2,h-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=fe}f>>>=2,h-=2;break;case Y:for(f>>>=7&h,h-=7&h;h<32;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if((65535&f)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fe;break}if(n.length=65535&f,f=0,h=0,n.mode=J,t===A)break e;case J:n.mode=Z;case Z:if(g=n.length){if(g>c&&(g=c),g>u&&(g=u),0===g)break e;y.arraySet(o,i,a,g,s),c-=g,a+=g,u-=g,s+=g,n.length-=g;break}n.mode=Q;break;case $:for(;h<14;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(n.nlen=(31&f)+257,f>>>=5,h-=5,n.ndist=(31&f)+1,f>>>=5,h-=5,n.ncode=(15&f)+4,f>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fe;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.lens[Ae[n.have++]]=7&f,f>>>=3,h-=3}for(;n.have<19;)n.lens[Ae[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ce=k(C,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ce){e.msg="invalid code lengths set",n.mode=fe;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[f&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(ge<=h);){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(ye<16)f>>>=ge,h-=ge,n.lens[n.have++]=ye;else{if(16===ye){for(Te=ge+2;h<Te;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(f>>>=ge,h-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=fe;break}ke=n.lens[n.have-1],g=3+(3&f),f>>>=2,h-=2}else if(17===ye){for(Te=ge+3;h<Te;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}f>>>=ge,h-=ge,ke=0,g=3+(7&f),f>>>=3,h-=3}else{for(Te=ge+7;h<Te;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}f>>>=ge,h-=ge,ke=0,g=11+(127&f),f>>>=7,h-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fe;break}for(;g--;)n.lens[n.have++]=ke}}if(n.mode===fe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fe;break}if(n.lenbits=9,Se={bits:n.lenbits},Ce=k(S,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ce){e.msg="invalid literal/lengths set",n.mode=fe;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ce=k(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ce){e.msg="invalid distances set",n.mode=fe;break}if(n.mode=ne,t===A)break e;case ne:n.mode=re;case re:if(c>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=f,n.bits=h,w(e,m),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,f=n.hold,h=n.bits,n.mode===Q&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[f&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(ge<=h);){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(ve&&0===(240&ve)){for(_e=ge,be=ve,we=ye;Ee=n.lencode[we+((f&(1<<_e+be)-1)>>_e)],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(_e+ge<=h);){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}f>>>=_e,h-=_e,n.back+=_e}if(f>>>=ge,h-=ge,n.back+=ge,n.length=ye,0===ve){n.mode=ce;break}if(32&ve){n.back=-1,n.mode=Q;break}if(64&ve){e.msg="invalid literal/length code",n.mode=fe;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(Te=n.extra;h<Te;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Ee=n.distcode[f&(1<<n.distbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(ge<=h);){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(0===(240&ve)){for(_e=ge,be=ve,we=ye;Ee=n.distcode[we+((f&(1<<_e+be)-1)>>_e)],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(_e+ge<=h);){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}f>>>=_e,h-=_e,n.back+=_e}if(f>>>=ge,h-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=fe;break}n.offset=ye,n.extra=15&ve,n.mode=ae;case ae:if(n.extra){for(Te=n.extra;h<Te;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fe;break}n.mode=se;case se:if(0===u)break e;if(g=m-u,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fe;break}g>n.wnext?(g-=n.wnext,v=n.wsize-g):v=n.wnext-g,g>n.length&&(g=n.length),me=n.window}else me=o,v=s-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do o[s++]=me[v++];while(--g);0===n.length&&(n.mode=re);break;case ce:if(0===u)break e;o[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;h<32;){if(0===c)break e;c--,f|=i[a++]<<h,h+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,o,m,s-m):_(n.check,o,m,s-m)),m=u,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=fe;break}f=0,h=0}n.mode=le;case le:if(n.wrap&&n.flags){for(;h<32;){if(0===c)break e;c--,f+=i[a++]<<h,h+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fe;break}f=0,h=0}n.mode=de;case de:Ce=I;break e;case fe:Ce=M;break e;case he:return D;case pe:default:return O}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,n.hold=f,n.bits=h,(n.wsize||m!==e.avail_out&&n.mode<fe&&(n.mode<ue||t!==E))&&d(e,e.output,e.next_out,m-e.avail_out)?(n.mode=he,D):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,o,m,e.next_out-m):_(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Q?128:0)+(n.mode===ne||n.mode===J?256:0),(0===p&&0===m||t===E)&&Ce===R&&(Ce=N),Ce)}function h(e){if(!e||!e.state)return O;var t=e.state;return t.window&&(t.window=null),e.state=null,R}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?O:(n.head=t,t.done=!1,R)):O}function m(e,t){var n,r,i,o=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==V?O:n.mode===V&&(r=1,r=_(r,t,o,0),r!==n.check)?M:(i=d(e,t,o,o))?(n.mode=he,D):(n.havedict=1,R)):O}var g,v,y=n(5),_=n(32),b=n(34),w=n(87),k=n(89),C=0,S=1,T=2,E=4,P=5,A=6,R=0,I=1,x=2,O=-2,M=-3,D=-4,N=-5,K=8,B=1,X=2,L=3,U=4,W=5,j=6,z=7,F=8,H=9,q=10,V=11,Q=12,G=13,Y=14,J=15,Z=16,$=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,ae=24,se=25,ce=26,ue=27,le=28,de=29,fe=30,he=31,pe=32,me=852,ge=592,ve=15,ye=ve,_e=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=c,t.inflate=f,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=m,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(5),i=15,o=852,a=592,s=0,c=1,u=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,p,m,g,v,y){var _,b,w,k,C,S,T,E,P,A=y.bits,R=0,I=0,x=0,O=0,M=0,D=0,N=0,K=0,B=0,X=0,L=null,U=0,W=new r.Buf16(i+1),j=new r.Buf16(i+1),z=null,F=0;for(R=0;R<=i;R++)W[R]=0;for(I=0;I<p;I++)W[t[n+I]]++;for(M=A,O=i;O>=1&&0===W[O];O--);if(M>O&&(M=O),0===O)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(x=1;x<O&&0===W[x];x++);for(M<x&&(M=x),K=1,R=1;R<=i;R++)if(K<<=1,K-=W[R],K<0)return-1;if(K>0&&(e===s||1!==O))return-1;for(j[1]=0,R=1;R<i;R++)j[R+1]=j[R]+W[R];for(I=0;I<p;I++)0!==t[n+I]&&(v[j[t[n+I]]++]=I);if(e===s?(L=z=v,S=19):e===c?(L=l,U-=257,z=d,F-=257,S=256):(L=f,z=h,S=-1),X=0,I=0,R=x,C=g,D=M,N=0,w=-1,B=1<<M,k=B-1,e===c&&B>o||e===u&&B>a)return 1;for(;;){T=R-N,v[I]<S?(E=0,P=v[I]):v[I]>S?(E=z[F+v[I]],P=L[U+v[I]]):(E=96,P=0),_=1<<R-N,b=1<<D,x=b;do b-=_,m[C+(X>>N)+b]=T<<24|E<<16|P|0;while(0!==b);for(_=1<<R-1;X&_;)_>>=1;if(0!==_?(X&=_-1,X+=_):X=0,I++,0===--W[R]){if(R===O)break;R=t[n+v[I]]}if(R>M&&(X&k)!==w){for(0===N&&(N=M),C+=x,D=R-N,K=1<<D;D+N<O&&(K-=W[D+N],!(K<=0));)D++,K<<=1;if(B+=1<<D,e===c&&B>o||e===u&&B>a)return 1;w=X&k,m[w]=M<<24|D<<16|C-g|0}}return 0!==X&&(m[C+X]=R-N<<24|64<<16|0),y.bits=M,0}},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?ce[e]:ce[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,n){e.bi_valid>G-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>G-e.bi_valid,e.bi_valid+=n-G):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){c(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function d(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=Q;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<V;n++)r=e.heap[n],o=c[2*c[2*r+1]+1]+1,o>p&&(o=p,m++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=h&&(a=f[r-h]),s=c[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(l[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--n],i>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}function h(e,t,n){var r,i,o=new Array(Q+1),a=0;for(r=1;r<=Q;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=l(o[s]++,s))}}function p(){var e,t,n,r,o,a=new Array(Q+1);for(n=0,r=0;r<j-1;r++)for(le[r]=n,e=0;e<1<<te[r];e++)ue[n++]=r;for(ue[n-1]=r,o=0,r=0;r<16;r++)for(de[r]=o,e=0;e<1<<ne[r];e++)ce[o++]=r;for(o>>=7;r<H;r++)for(de[r]=o<<7,e=0;e<1<<ne[r]-7;e++)ce[256+o++]=r;for(t=0;t<=Q;t++)a[t]=0;for(e=0;e<=143;)ae[2*e+1]=8,e++,a[8]++;for(;e<=255;)ae[2*e+1]=9,e++,a[9]++;for(;e<=279;)ae[2*e+1]=7,e++,a[7]++;for(;e<=287;)ae[2*e+1]=8,e++,a[8]++;for(h(ae,F+1,a),e=0;e<H;e++)se[2*e+1]=5,se[2*e]=l(e,5);fe=new i(ae,te,z+1,F,Q),he=new i(se,ne,0,H,Q),pe=new i(new Array(0),re,0,q,Y)}function m(e){var t;for(t=0;t<F;t++)e.dyn_ltree[2*t]=0;for(t=0;t<H;t++)e.dyn_dtree[2*t]=0;for(t=0;t<q;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*J]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),O.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function _(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function b(e,t,n){var r,i,o,s,l=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?u(e,i,t):(o=ue[i],u(e,o+z+1,t),s=te[o],0!==s&&(i-=le[o],c(e,i,s)),r--,o=a(r),u(e,o,n),s=ne[o],0!==s&&(r-=de[o],c(e,r,s)));while(l<e.last_lit);u(e,J,t)}function w(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=V,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)_(e,o,n);i=c;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,_(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),h(o,u,e.bl_count)}function k(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,
e.bl_tree[2*Z]++):s<=10?e.bl_tree[2*$]++:e.bl_tree[2*ee]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function C(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,d=4;for(0===a&&(l=138,d=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<d){do u(e,i,e.bl_tree);while(0!==--s)}else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,Z,e.bl_tree),c(e,s-3,2)):s<=10?(u(e,$,e.bl_tree),c(e,s-3,3)):(u(e,ee,e.bl_tree),c(e,s-11,7));s=0,o=i,0===a?(l=138,d=3):i===a?(l=6,d=3):(l=7,d=4)}}function S(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=q-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function T(e,t,n,r){var i;for(c(e,t-257,5),c(e,n-1,5),c(e,r-4,4),i=0;i<r;i++)c(e,e.bl_tree[2*ie[i]+1],3);C(e,e.dyn_ltree,t-1),C(e,e.dyn_dtree,n-1)}function E(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return N;for(t=32;t<z;t++)if(0!==e.dyn_ltree[2*t])return N;return D}function P(e){me||(p(),me=!0),e.l_desc=new o(e.dyn_ltree,fe),e.d_desc=new o(e.dyn_dtree,he),e.bl_desc=new o(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,m(e)}function A(e,t,n,r){c(e,(B<<1)+(r?1:0),3),v(e,t,n,!0)}function R(e){c(e,X<<1,3),u(e,J,ae),d(e)}function I(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===K&&(e.strm.data_type=E(e)),w(e,e.l_desc),w(e,e.d_desc),a=S(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?A(e,t,n,r):e.strategy===M||o===i?(c(e,(X<<1)+(r?1:0),3),b(e,ae,se)):(c(e,(L<<1)+(r?1:0),3),T(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&g(e)}function x(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ue[n]+z+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var O=n(5),M=4,D=0,N=1,K=2,B=0,X=1,L=2,U=3,W=258,j=29,z=256,F=z+1+j,H=30,q=19,V=2*F+1,Q=15,G=16,Y=7,J=256,Z=16,$=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,ae=new Array(2*(F+2));r(ae);var se=new Array(2*H);r(se);var ce=new Array(oe);r(ce);var ue=new Array(W-U+1);r(ue);var le=new Array(j);r(le);var de=new Array(H);r(de);var fe,he,pe,me=!1;t._tr_init=P,t._tr_stored_block=A,t._tr_flush_block=I,t._tr_tally=x,t._tr_align=R},function(e,t,n){var r=n(101),i=n(75),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));"undefined"==typeof t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.getDtlsParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i=r.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),o={role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]};return o},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i={usernameFragment:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e),i=r[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),u=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?n.parseFmtp(u[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};r.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var l=n.matchPrefix(e,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),r.forEach(function(e){e.maxBitrate=l})),r},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return t=r[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},n.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},e.exports=n},function(e,t,n){(function(t){function r(e,n){var r=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=r.host.indexOf(":")!==-1,s=a?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}var i=n(36),o=n(3)("socket.io-client:url");e.exports=r}).call(t,function(){return this}())},function(e,t,n){(function(e){var r=n(30),i=n(42);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var c in e)a[c]=t(e[c]);return a}return e}var n=[],o=e.data,a=e;return a.data=t(o),a.attachments=n.length,{packet:a,buffers:n}},t.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var i=t[e.num];return i}if(r(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){function o(t,c,u){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){a++;var l=new FileReader;l.onload=function(){u?u[c]=this.result:s=this.result,--a||n(s)},l.readAsArrayBuffer(t)}else if(r(t))for(var d=0;d<t.length;d++)o(t[d],d,t);else if(t&&"object"==typeof t&&!i(t))for(var f in t)o(t[f],f,t)}var a=0,s=t;o(s),a||n(s)}}).call(t,function(){return this}())},function(e,t){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(98),t.log=o,t.formatArgs=i,t.save=a,t.load=s,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t,n){function r(){return t.colors[l++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(u||n);e.diff=o,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=i.log||t.log||console.log.bind(console);c.apply(e,a)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i,t.coerce=c,t.disable=a,t.enable=o,t.enabled=s,t.humanize=n(99),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return o(e,u,"day")||o(e,c,"hour")||o(e,s,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,c=60*s,u=24*c,l=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?i(e):r(e)}},function(e,t){function n(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}e.exports=n},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";!function(){var t=n(1).log,r=n(1).browserDetails;e.exports.browserDetails=r,e.exports.extractVersion=n(1).extractVersion,e.exports.disableLog=n(1).disableLog;var i=n(104)||null,o=n(106)||null,a=n(108)||null,s=n(110)||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},function(e,t,n){"use strict";var r=n(1).log,i=n(1).browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(105)}},function(e,t,n){"use strict";var r=n(1).log;e.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if(i=i&&("object"==typeof i?i:{ideal:i}),i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return e.label.toLowerCase().indexOf("back")!==-1})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,n){"use strict";var r=n(93),i=n(1).browserDetails,o={shimPeerConnection:function(){if(window.RTCIceGatherer){window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e});var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var n=new Event("enabled");n.enabled=t,this.dispatchEvent(n)}})}window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1||0===e.indexOf("stun:")&&i.version>=14393})[0],!!t}return!1})}this._config=e,this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var r=!n.candidate||0===Object.keys(n.candidate).length;if(r)for(var i=1;i<t.length;i++)t[i].indexOf("\r\na=end-of-candidates\r\n")===-1&&(t[i]+="a=end-of-candidates\r\n");else n.candidate.candidate.indexOf("typ endOfCandidates")===-1&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this._config},window.RTCPeerConnection.prototype.addStream=function(e){var t=e.clone();e.getTracks().forEach(function(e,n){var r=t.getTracks()[n];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),this.localStreams.push(t),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate){i.numChannels=Math.min(e.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);s.candidate.candidate.indexOf("typ endOfCandidates")===-1?l[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":l[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state;
});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&d&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),d&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete");break;case"complete":}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,l=a.localCapabilities,d=a.remoteCapabilities,f="0"===e.split("\n",1)[0].split(" ",2)[1];if(!f&&!a.isDatachannel){var h=r.getIceParameters(e,n);if(o){var p=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});p.length&&c.setRemoteCandidates(p)}var m=r.getDtlsParameters(e,n);o&&(m.role="server"),i.usingBundle&&0!==t||(c.start(s,h,o?"controlling":"controlled"),u.start(m));var g=i._getCommonCapabilities(l,d);i._transceive(a,g.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),l=u[0].substr(2).split(" "),d=l[0],f="0"===l[1],h=r.getDirection(o,a),p=r.matchPrefix(o,"a=mid:");if(p=p.length?p[0].substr(6):r.generateIdentifier(),"application"===d&&"DTLS/SCTP"===l[2])return void(t.transceivers[c]={mid:p,isDatachannel:!0});var m,g,v,y,_,b,w,k,C,S,T,E,P=r.parseRtpParameters(o);f||(T=r.getIceParameters(o,a),E=r.getDtlsParameters(o,a),E.role="client"),k=r.parseRtpEncodingParameters(o);var A,R=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];R&&(A=R.value);var I=r.matchPrefix(o,"a=end-of-candidates",a).length>0,x=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||f)"answer"!==e.type||f||(m=t.transceivers[c],g=m.iceGatherer,v=m.iceTransport,y=m.dtlsTransport,_=m.rtpSender,b=m.rtpReceiver,w=m.sendEncodingParameters,C=m.localCapabilities,t.transceivers[c].recvEncodingParameters=k,t.transceivers[c].remoteCapabilities=P,t.transceivers[c].cname=A,(s||I)&&x.length&&v.setRemoteCandidates(x),t.usingBundle&&0!==c||(v.start(g,T,"controlling"),y.start(E)),t._transceive(m,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h),!b||"sendrecv"!==h&&"sendonly"!==h?delete m.rtpReceiver:(S=b.track,i.push([S,b]),n.addTrack(S)));else{var O=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(p,c);if(I&&O.iceTransport.setRemoteCandidates(x),C=RTCRtpReceiver.getCapabilities(d),C.codecs=C.codecs.filter(function(e){return"rtx"!==e.name}),w=[{ssrc:1001*(2*c+2)}],b=new RTCRtpReceiver(O.dtlsTransport,d),S=b.track,i.push([S,b]),n.addTrack(S),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var M;"audio"===d?M=t.localStreams[0].getAudioTracks()[0]:"video"===d&&(M=t.localStreams[0].getVideoTracks()[0]),M&&(_=new RTCRtpSender(M,O.dtlsTransport))}t.transceivers[c]={iceGatherer:O.iceGatherer,iceTransport:O.iceTransport,dtlsTransport:O.dtlsTransport,localCapabilities:C,remoteCapabilities:P,rtpSender:_,rtpReceiver:b,kind:d,mid:p,cname:A,sendEncodingParameters:w,recvEncodingParameters:k},t._transceive(t.transceivers[c],!1,"sendrecv"===h||"sendonly"===h)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n["new"]>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i=t.track,o=t.kind,a=r.generateIdentifier(),c=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(a,n),u=RTCRtpSender.getCapabilities(o);u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name}),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var l,d,f=[{ssrc:1001*(2*n+1)}];i&&(l=new RTCRtpSender(i,c.dtlsTransport)),t.wantReceive&&(d=new RTCRtpReceiver(c.dtlsTransport,o)),s[n]={iceGatherer:c.iceGatherer,iceTransport:c.iceTransport,dtlsTransport:c.dtlsTransport,localCapabilities:u,remoteCapabilities:null,rtpSender:l,rtpReceiver:d,kind:o,mid:a,sendEncodingParameters:f,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}else this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};e.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(107)}},function(e,t){"use strict";e.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n)["catch"](function(t){return Promise.reject(e(t))})}}},function(e,t,n){"use strict";var r=n(1).browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;if(RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},r.version<48){var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(109)}},function(e,t,n){"use strict";var r=n(1).log,i=n(1).browserDetails;e.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return i.version<44?t(e,n,r):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(n,r))}}},function(e,t){"use strict";var n={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:n.shimGetUserMedia}},function(e,t,n){var r;(function(e,i){!function(o){function a(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function s(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=_(t>>>10&1023|55296),t=56320|1023&t),i+=_(t);return i}function c(e,t){return _(e>>t&63|128)}function u(e){if(0==(4294967168&e))return _(e);var t="";return 0==(4294965248&e)?t=_(e>>6&31|192):0==(4294901760&e)?(t=_(e>>12&15|224),t+=c(e,6)):0==(4292870144&e)&&(t=_(e>>18&7|240),t+=c(e,12),t+=c(e,6)),t+=_(63&e|128)}function l(e){for(var t,n=a(e),r=n.length,i=-1,o="";++i<r;)t=n[i],o+=u(t);return o}function d(){if(y>=v)throw Error("Invalid byte index");var e=255&g[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,n,r,i;if(y>v)throw Error("Invalid byte index");if(y==v)return!1;if(e=255&g[y],y++,0==(128&e))return e;if(192==(224&e)){var t=d();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),i=(15&e)<<12|t<<6|n,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),r=d(),i=(15&e)<<18|t<<12|n<<6|r,i>=65536&&i<=1114111))return i;throw Error("Invalid WTF-8 detected")}function h(e){g=a(e),v=g.length,y=0;for(var t,n=[];(t=f())!==!1;)n.push(t);return s(n)}var p="object"==typeof t&&t,m=("object"==typeof e&&e&&e.exports==p&&e,"object"==typeof i&&i);m.global!==m&&m.window!==m||(o=m);var g,v,y,_=String.fromCharCode,b={version:"1.0.0",encode:l,decode:h};r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(43)(e),function(){return this}())},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,n){var r=e;return d(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=h(t,{uri:e}),r.callback=n,r}function a(e,t,n){return t=o(e,t,n),s(t)}function s(e){function t(){4===l.readyState&&setTimeout(o,0)}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||c(l),b)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,w)}function o(){if(!h){var t;clearTimeout(p),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=w,i=null;return 0!==t?(r={body:n(),statusCode:t,method:g,headers:{},url:m,rawRequest:l},l.getAllResponseHeaders&&(r.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var s=!1,u=function(t,n,r){s||(s=!0,e.callback(t,n,r))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var d,h,p,m=l.url=e.uri||e.url,g=l.method=e.method||"GET",v=e.body||e.data,y=l.headers=e.headers||{},_=!!e.sync,b=!1,w={body:void 0,headers:{},statusCode:0,method:g,url:m,rawRequest:l};if("json"in e&&e.json!==!1&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),v=JSON.stringify(e.json===!0?v:e.json))),l.onreadystatechange=t,l.onload=o,l.onerror=r,l.onprogress=function(){},l.onabort=function(){h=!0},l.ontimeout=r,l.open(g,m,!_,e.username,e.password),_||(l.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(p=setTimeout(function(){if(!h){h=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),l.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&l.setRequestHeader(d,y[d]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(v||null),l}function c(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function u(){}var l=n(76),d=n(29),f=n(91),h=n(113);e.exports=a,a.XMLHttpRequest=l.XMLHttpRequest||u,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:l.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,n,r){return n=o(t,n,r),n.method=e.toUpperCase(),s(n)}})},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t){},114]));