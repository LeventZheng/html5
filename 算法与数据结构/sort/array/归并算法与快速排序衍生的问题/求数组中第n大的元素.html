<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script>
      // 交换数组的两个位置的元素
      Array.prototype.swap = function(i, j) {
        let item = this[i];
        this[i] = this[j];
        this[j] = item;
      };
      var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 11];
      var ranking = 2;
      var targetPor = arr.length - ranking;

      var result = getTargetPor(arr, targetPor); // 返回第n大元素值
      console.log(result);
      console.log(arr);

      function getTargetPor(arr, targetPor) {
        return _QuickSort(arr, 0, arr.length - 1, targetPor);
      }

      function _QuickSort(arr, l, r, targetPor) {
        if (l <= r) {
          var v = arr[l];
          var i = l + 1;
          var j = r;
          while (true) {
            while (i <= r && arr[i] < v) {
              i++;
            }
            while (j >= 0 && arr[j] > v) {
              j--;
            }
            if (i >= j) break;
            arr.swap(i, j);
            i++;
            j--;
          }
          arr.swap(l, j);
          if (j == targetPor) {
            return arr[j];
          }
          else if (targetPor < j) {
            return _QuickSort(arr, l, j - 1, targetPor);
          } else {
            return _QuickSort(arr, j + 1, r, targetPor);
          }
        }
      }

    </script>
  </head>
  <body></body>
</html>
